import{r as n}from"./index-de62f0e0.js";import{a as M,j as re}from"./jsx-runtime-4d953e71.js";import{b as ie}from"./index-ebf28f83.js";import{u as ce,a as ue}from"./index-6fc38565.js";import{u as ae,a as le,b as fe}from"./index-55e62adc.js";import{u as me}from"./index-53f8c568.js";import{o as de,m as J,l as S}from"./theme-326cd56d.js";import{c as pe,q as V,h as c,w as ve,a as Q,t as ge,B as Pe,o as he,u as U,J as Ce}from"./factory-07cc9cf0.js";import{u as be}from"./use-component-style-a395c77f.js";import{m as ye}from"./motion-d07cf02b.js";import{C as Re}from"./close-button-5831b830.js";import{f as W}from"./forward-ref-396247d7.js";import{s as D}from"./slide-fade-31910bd4.js";import{s as Te}from"./scale-fade-0786fd42.js";const[Be,X]=pe({strict:!1,name:"PopoverContext"}),Xe=u=>{const[r,t]=be("Popover",u),{children:m,initialFocusRef:d,restoreFocus:p=!0,autoFocus:h=!0,closeOnBlur:f=!0,closeOnEsc:B=!0,closeOnButton:w=!0,trigger:a="click",openDelay:C=200,closeDelay:g=200,isLazy:A,lazyBehavior:L="unmount",animation:j="scale",duration:x,...z}=de(t),{isOpen:e,onOpen:b,onClose:s,onToggle:O}=ce(t),y=n.useRef(null),k=n.useRef(null),P=n.useRef(null),{present:Z,onAnimationComplete:$}=ie({isOpen:e,ref:P}),v=n.useRef(void 0),I=n.useRef(void 0),R=n.useRef(!1),Y=n.useRef(!1);e&&(Y.current=!0);const{referenceRef:E,getPopperProps:ee,forceUpdate:_,transformOrigin:N}=me({...z,enabled:e});n.useEffect(()=>()=>{v.current&&clearTimeout(v.current),I.current&&clearTimeout(I.current)},[]),ae({enabled:e,ref:k}),le(P,{focusRef:k,visible:e,shouldFocus:p&&a==="click"}),fe(P,{focusRef:d,visible:e,shouldFocus:h&&a==="click"});const H=ue({wasSelected:Y.current,enabled:A,mode:L,isSelected:Z}),oe=n.useCallback((o={},T=null)=>{const i={...o,style:{...o.style,transformOrigin:N},ref:V(P,T),children:H?o.children:null,tabIndex:-1,onKeyDown:c(o.onKeyDown,l=>{B&&l.key==="Escape"&&s()}),onBlur:c(o.onBlur,l=>{const F=J(l),K=S(P.current,F),se=S(k.current,F);e&&f&&(!K&&!se)&&s()})};return a==="hover"&&(i.onMouseEnter=c(o.onMouseEnter,()=>{R.current=!0}),i.onMouseLeave=c(o.onMouseLeave,l=>{l.nativeEvent.relatedTarget!==null&&(R.current=!1,setTimeout(s,g))})),i},[g,f,B,e,s,H,N,a]),q=n.useCallback(o=>{y.current==null&&E(o)},[E]),te=n.useCallback((o={},T=null)=>{const i={...o,ref:V(k,T,q)};return a==="click"&&(i.onClick=c(o.onClick,O)),a==="hover"&&(i.onFocus=c(o.onFocus,()=>{v.current===void 0&&b()}),i.onBlur=c(o.onBlur,l=>{const F=J(l),K=!S(P.current,F);e&&f&&K&&s()}),i.onKeyDown=c(o.onKeyDown,l=>{l.key==="Escape"&&s()}),i.onMouseEnter=c(o.onMouseEnter,()=>{R.current=!0,v.current=window.setTimeout(b,C)}),i.onMouseLeave=c(o.onMouseLeave,()=>{R.current=!1,v.current&&(clearTimeout(v.current),v.current=void 0),I.current=window.setTimeout(()=>{R.current===!1&&s()},g)})),i},[g,f,e,q,s,b,O,C,a]),ne=n.useCallback((o={},T=null)=>({...o,ref:V(T,y,E)}),[y,E]);return M(Be,{value:{isOpen:e,onClose:s,closeOnButton:w,onAnimationComplete:$,forceUpdate:_,getTriggerProps:te,getAnchorProps:ne,getPopperProps:ee,getPopoverProps:oe,animation:j,duration:x,styles:r},children:ve(m,{isOpen:e,onClose:s,forceUpdate:_})})},Ye=({children:u})=>{const r=n.Children.only(u),{getTriggerProps:t}=X();return n.cloneElement(r,t(r.props,r.ref))},G=W(({onClick:u,...r},t)=>{const{styles:m,onClose:d}=X(),p={position:"absolute",...m.closeButton};return M(Re,{ref:t,className:Q("ui-popover-close-button"),__css:p,onClick:c(u,h=>{h.stopPropagation(),d==null||d()}),size:"sm",...r})}),we=(u="scale",r)=>{const t={reverse:!0,duration:r,enter:{visibility:"visible"},transitionEnd:{exit:{visibility:"hidden"}}};switch(u){case"scale":return{...Te,custom:{...t,scale:.95}};case"top":return{...D,custom:{...t,offsetX:0,offsetY:-16}};case"right":return{...D,custom:{...t,offsetX:16,offsetY:0}};case"left":return{...D,custom:{...t,offsetX:-16,offsetY:0}};case"bottom":return{...D,custom:{...t,offsetX:0,offsetY:16}}}},_e=W(({as:u="section",className:r,children:t,w:m,width:d,minW:p,minWidth:h,zIndex:f,__css:B,...w},a)=>{const{isOpen:C,closeOnButton:g,getPopperProps:A,getPopoverProps:L,onAnimationComplete:j,animation:x,duration:z,styles:e}=X(),b=ge(t),[s,...O]=Pe(b,G),y={position:"relative",w:"100%",display:"flex",flexDirection:"column",outline:0,...he(B??e.container,["zIndex"])};return m=m??d??e.container.w??e.container.width,p=p??h??e.container.minW??e.container.minWidth,f=f??e.container.zIndex,M(U.div,{...A({style:{visibility:C?"visible":"hidden"}}),className:"ui-popover",w:m,minW:p,zIndex:f,children:re(U.section,{as:ye[u],className:Q("ui-popover-content",r),...x!=="none"?we(x,z):{},...L(w,a),initial:"exit",animate:C?"enter":"exit",exit:"exit",onAnimationComplete:Ce(j,w.onAnimationComplete),__css:y,children:[s??(g?M(G,{}):null),O]})})});export{Xe as P,Ye as a,_e as b,G as c,X as u};
//# sourceMappingURL=popover-content-0a3b437d.js.map
