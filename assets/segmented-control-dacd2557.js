import{j as p,a as Y}from"./jsx-runtime-3bfad254.js";import{u as ne}from"./index-79dd00f0.js";import{c as ae}from"./index-dc9b9ac0.js";import{t as oe}from"./index-5b4adb92.js";import{u as le}from"./index-c59769ca.js";import{r as s}from"./index-8ee6c85d.js";import{k as re,Q as ie,b as ce,o as $,y as L,t as b,v as N,w as x,p as de,d as y,e as q}from"./factory-11559d5d.js";import{f as G}from"./forward-ref-cf7188bd.js";import{a as ue}from"./use-component-style-57629fd2.js";import{o as fe}from"./theme-provider-d246dc71.js";const{DescendantsContextProvider:ge,useDescendants:me,useDescendant:he}=ae(),[be,pe]=re({strict:!1,name:"SegmentedControlContext"}),we=G((w,V)=>{const[C,k]=ue("SegmentedControl",w);let{className:R,id:c,name:m,isReadOnly:r,isDisabled:a,children:F,items:_=[],...i}=fe(k);const O=ie();c=c??s.useId(),m=m??`segmented-control-${s.useId()}`,i.onChange=ce(i.onChange);const v=me(),[g,h]=s.useState(-1),[S,H]=s.useState(!1),[P,J]=le(),D=s.useRef(null),M=s.useRef(new Map),[d,A]=ne({value:i.value,defaultValue:i.defaultValue,onChange:i.onChange}),j=s.useCallback(()=>{const t={width:0,height:0,x:0,y:0},e=M.current.get(d);if(!e||!D.current||!P.current)return t;const{paddingLeft:o,paddingTop:n}=getComputedStyle(D.current),l=parseFloat(o)||0,u=parseFloat(n)||0;let{width:f,height:B}=e.getBoundingClientRect();return t.x=e.offsetLeft-l,t.y=e.offsetTop-u,t.width=f*(e.offsetWidth/f)||0,t.height=B*(e.offsetWidth/f)||0,t},[P,d]),[z,K]=s.useState(j),E=s.useCallback(t=>{if(a||r){t.preventDefault();return}A(t.target.value)},[a,r,A]),T=s.useCallback((t,e)=>{if(!a)if(e){const o=v.enabledNextValue(t);o&&h(o.index)}else h(t)},[v,a]),W=s.useCallback(()=>h(-1),[]),U=s.useCallback((t={},e=null)=>({...$(i,["value","defaultValue","onChange"]),...t,ref:L(D,P,e),id:c,"aria-disabled":b(a),"aria-readonly":b(r),onBlur:N(t.onBlur,W)}),[c,a,r,P,W,i]),Z=s.useCallback((t={},e=null)=>{const{width:o,height:n,x:l,y:u}=z;return{...t,ref:e,style:{position:"absolute",zIndex:1,width:o,height:n,transform:`translate(${l}px, ${u}px)`}}},[z]),ee=s.useCallback(({index:t,...e}={},o=null)=>{const n=e.disabled??e.isDisabled??a,l=e.readOnly??e.isReadOnly??r,u=e.value===d;return{...$(e,["isDisabled","isReadOnly"]),ref:o,id:`${c}-${t}`,type:"radio",name:m,disabled:n||l,readOnly:l,checked:u,"aria-disabled":b(n),"aria-readonly":b(l),"data-checked":x(u),"data-focus":x(t===g),style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},onChange:N(e.onChange,f=>!n&&!l?E(f):{})}},[a,r,d,c,m,g,E]),te=s.useCallback(({index:t,...e}={},o=null)=>{const n=e.disabled??e.isDisabled??a,l=e.readOnly??e.isReadOnly??r,u=e.value===d,f=t===g;return{props:e,ref:L(B=>M.current.set(e.value,B),o),"aria-disabled":b(n),"aria-readonly":b(l),"data-checked":x(u),"data-focus":x(f),"data-focus-visible":x(f&&S),onFocus:N(e.onFocus,()=>T(t,n||l)),...n||l?{_hover:{},_active:{},_focus:{},_invalid:{},_focusVisible:{}}:{},style:{position:"relative",zIndex:2}}},[g,a,S,r,T,d]);s.useEffect(()=>oe(H),[]),s.useEffect(()=>{K(j())},[g,J,d,j]);const se={position:"relative",display:"inline-flex",alignItems:"center",...C.container},Q=de(F);let I=[];if(!Q.length&&_.length?I=_.map(({label:t,value:e,...o},n)=>p(X,{value:e,...o,children:t},n)):I=Q,d==null&&i.defaultValue==null)for(const t of I){if(t.type!==X)continue;const e=t.props.value;A(e);break}return p(ge,{value:v,children:p(be,{value:{getInputProps:ee,getLabelProps:te,styles:C},children:Y(y.div,{...U({},V),className:q("ui-segmented-control",R),__css:se,children:[O.current?p(y.span,{className:"ui-segmented-control__active",...Z(),__css:C.active}):null,I]})})})}),X=G(({className:w,disabled:V,readOnly:C,isDisabled:k,isReadOnly:R,value:c,onChange:m,children:r,...a},F)=>{const{getInputProps:_,getLabelProps:i,styles:O}=pe(),{index:v,register:g}=he({disabled:k||R}),h={index:v,value:c,onChange:m,disabled:V,readOnly:C,isDisabled:k,isReadOnly:R},S={cursor:"pointer",flex:"1 1 0%",display:"inline-flex",justifyContent:"center",alignItems:"center",...O.button};return Y(y.label,{...i($(h,["onChange"])),className:q("ui-segmented-control__button",w),__css:S,...a,children:[p(y.input,{..._(h,L(g,F))}),p(y.span,{children:r})]})});export{we as S,X as a};
//# sourceMappingURL=segmented-control-dacd2557.js.map
