import{j as s,a as L,F as T}from"./jsx-runtime-5BUNAZ9W.js";import{u as M}from"./index-y3gJVxZf.js";import{r as a}from"./index-4g5l5LRQ.js";import{R as U}from"./Combination-8oCz4vin.js";import{L as w}from"./loading-UQYqEc74.js";import{M as N}from"./motion-klEGzG2n.js";import{m as q}from"./motion-ukEXpwwk.js";import{u as S,d as f,e as G,i as H,f as J}from"./factory-qmA5MQgQ.js";import{A as K}from"./index-EargzzxG.js";import{P as Q}from"./container-portal-zuGopSwV.js";const I=a.createContext({}),x=()=>({isLoading:a.createRef(),start:a.createRef(),finish:a.createRef(),update:a.createRef(),force:a.createRef()}),h=e=>({isLoading:()=>{var t,n;return((n=(t=e.current.isLoading).current)==null?void 0:n.call(t))??!1},start:t=>{var n,o;return(o=(n=e.current.start).current)==null?void 0:o.call(n,t)},finish:()=>{var t,n;return(n=(t=e.current.finish).current)==null?void 0:n.call(t)},update:t=>{var n,o;return(o=(n=e.current.update).current)==null?void 0:o.call(n,t)},force:t=>{var n,o;return(o=(n=e.current.force).current)==null?void 0:o.call(n,t)}}),X=e=>e+1,Y=e=>e===0?e:e-1,de=({screen:e,page:t,background:n,custom:o,children:l})=>{const r=a.useRef(x()),i=a.useRef(x()),p=a.useRef(x()),g=a.useRef(x()),v=h(r),m=h(i),y=h(p),F=h(g),_={screen:v,page:m,background:y,custom:F};return L(I.Provider,{value:_,children:[l,s(C,{controlRefs:r,...e,component:(e==null?void 0:e.component)??(c=>s(A,{...c}))}),s(C,{controlRefs:i,...t,component:(t==null?void 0:t.component)??(c=>s(E,{...c}))}),s(C,{controlRefs:p,...n,blockScrollOnMount:(n==null?void 0:n.blockScrollOnMount)??!1,component:(n==null?void 0:n.component)??(c=>s(W,{...c}))}),s(C,{controlRefs:g,blockScrollOnMount:(n==null?void 0:n.blockScrollOnMount)??!1,...o,component:o==null?void 0:o.component})]})},C=({controlRefs:e,appendToParentPortal:t,containerRef:n,allowPinchZoom:o=!1,blockScrollOnMount:l=!0,initialState:r,duration:i=null,icon:p,text:g,component:v})=>{const m=a.useRef(!1),[{loadingCount:y,message:F,duration:_},c]=a.useState({loadingCount:r?1:0,message:void 0,duration:i}),{isLoading:k,start:B,finish:z,update:D,force:P}=a.useMemo(()=>({isLoading:()=>m.current,start:({message:d,duration:u=i}={})=>{m.current=!0,c(({loadingCount:b})=>({loadingCount:X(b),message:d,duration:u}))},update:d=>c(u=>({...u,...d})),finish:()=>{m.current=!1,c(({loadingCount:d})=>({loadingCount:Y(d),message:void 0,duration:i}))},force:({loadingCount:d=0,message:u,duration:b=i})=>{m.current=!!d,c({loadingCount:d,message:u,duration:b})}}),[i]);f(e.current.isLoading,k),f(e.current.start,B),f(e.current.finish,z),f(e.current.update,D),f(e.current.force,P);const V={initialState:r,icon:p,text:g,message:F,duration:_,onFinish:z};return G(()=>{(r||H(i))&&c({loadingCount:r?1:0,message:void 0,duration:i})},[r,i]),s(K,{initial:!1,children:y?s(Q,{appendToParentPortal:t,containerRef:n,children:s(U,{allowPinchZoom:o,enabled:l,forwardProps:!0,children:s(a.Fragment,{children:s(Z,{component:v,...V})})})}):null})},Z=({component:e,...t})=>typeof e=="function"?e(t):s(T,{}),j=({message:e,...t})=>e?J(e)?e:s(S.p,{...t,children:e}):null,$=(e="fade")=>({initial:{opacity:0,scale:e==="scaleFade"?.95:void 0},animate:{opacity:1,scale:e==="scaleFade"?1:void 0,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:e==="scaleFade"?.95:void 0,transition:{duration:.4,ease:[.4,0,1,1]}}}),O=(e="fill")=>({position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:"beerus",bg:e==="fill"?["white","black"]:"blackAlpha.600",w:"100vw",h:"100dvh",p:"md",display:"flex",justifyContent:"center",alignItems:"center"}),R=(e,t="fade")=>({initial:e?!1:"initial",animate:"animate",exit:"exit",variants:$(t)}),A=a.memo(({initialState:e,icon:t,text:n,message:o,duration:l,onFinish:r})=>{const i={maxW:"md",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"sm"};return M(r,l),s(N,{className:"ui-loading-screen",...R(e),__css:O(),children:L(S.div,{__css:i,children:[s(w,{size:"6xl",...t}),s(j,{message:o,lineClamp:3,...n})]})})});A.displayName="ScreenComponent";const E=a.memo(({initialState:e,icon:t,text:n,message:o,duration:l,onFinish:r})=>{const i={bg:["white","black"],maxW:"md",p:"md",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"sm",rounded:"md",boxShadow:["lg","dark-lg"]};return M(r,l),s(N,{className:"ui-loading-page",...R(e),__css:O("transparent"),children:L(S.div,{as:q.div,className:"ui-loading-page__inner",...R(e,"scaleFade"),__css:i,children:[s(w,{size:"6xl",...t}),s(j,{message:o,lineClamp:3,...n})]})})});E.displayName="PageComponent";const W=a.memo(({initialState:e,icon:t,text:n,message:o,duration:l,onFinish:r})=>{const i={position:"fixed",right:"md",bottom:"md",zIndex:"beerus",bg:["white","black"],maxW:"sm",p:"sm",display:"flex",justifyContent:"center",alignItems:"center",gap:"sm",rounded:"md",boxShadow:["3xl","dark-lg"]};return M(r,l),L(N,{className:"ui-loading-background",...R(e,"scaleFade"),__css:i,children:[s(w,{size:"xl",...t}),s(j,{message:o,fontSize:"sm",lineClamp:1,...n})]})});W.displayName="BackgroundComponent";const me=()=>{const{screen:e,page:t,background:n,custom:o}=a.useContext(I);return{screen:e,page:t,background:n,custom:o}};export{de as L,me as u};
