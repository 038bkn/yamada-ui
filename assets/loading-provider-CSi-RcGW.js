import{j as s}from"./jsx-runtime-CKrituN3.js";import{u as F}from"./index-CKo3gv6y.js";import{r as a}from"./index-CBqU2yxZ.js";import{R as V}from"./Combination-DlzjZhkT.js";import{L as _}from"./loading-BxQYss10.js";import{M}from"./motion-C1gM6QUe.js";import{m as T}from"./motion-JgkBPv6g.js";import{u as w,b as d,d as U,i as q,e as G}from"./factory-D1MzC1Q2.js";import{A as H}from"./index-_tcQm2Fk.js";import{P as J}from"./container-portal-CAcQI922.js";const k=a.createContext({}),g=()=>({isLoading:a.createRef(),start:a.createRef(),finish:a.createRef(),update:a.createRef(),force:a.createRef()}),b=e=>({isLoading:()=>{var t,n;return((n=(t=e.current.isLoading).current)==null?void 0:n.call(t))??!1},start:t=>{var n,o;return(o=(n=e.current.start).current)==null?void 0:o.call(n,t)},finish:()=>{var t,n;return(n=(t=e.current.finish).current)==null?void 0:n.call(t)},update:t=>{var n,o;return(o=(n=e.current.update).current)==null?void 0:o.call(n,t)},force:t=>{var n,o;return(o=(n=e.current.force).current)==null?void 0:o.call(n,t)}}),K=e=>e+1,Q=e=>e===0?e:e-1,ce=({screen:e,page:t,background:n,custom:o,children:l})=>{const i=a.useRef(g()),r=a.useRef(g()),p=a.useRef(g()),f=a.useRef(g()),C=b(i),u=b(r),R=b(p),L=b(f),v={screen:C,page:u,background:R,custom:L};return s.jsxs(k.Provider,{value:v,children:[l,s.jsx(j,{controlRefs:i,...e,component:(e==null?void 0:e.component)??(c=>s.jsx(I,{...c}))}),s.jsx(j,{controlRefs:r,...t,component:(t==null?void 0:t.component)??(c=>s.jsx(O,{...c}))}),s.jsx(j,{controlRefs:p,...n,blockScrollOnMount:(n==null?void 0:n.blockScrollOnMount)??!1,component:(n==null?void 0:n.component)??(c=>s.jsx(E,{...c}))}),s.jsx(j,{controlRefs:f,blockScrollOnMount:(n==null?void 0:n.blockScrollOnMount)??!1,...o,component:o==null?void 0:o.component})]})},j=({controlRefs:e,appendToParentPortal:t,containerRef:n,allowPinchZoom:o=!1,blockScrollOnMount:l=!0,initialState:i,duration:r=null,icon:p,text:f,component:C})=>{const u=a.useRef(!1),[{loadingCount:R,message:L,duration:v},c]=a.useState({loadingCount:i?1:0,message:void 0,duration:r}),{isLoading:A,start:W,finish:S,update:B,force:D}=a.useMemo(()=>({isLoading:()=>u.current,start:({message:m,duration:x=r}={})=>{u.current=!0,c(({loadingCount:y})=>({loadingCount:K(y),message:m,duration:x}))},update:m=>c(x=>({...x,...m})),finish:()=>{u.current=!1,c(({loadingCount:m})=>({loadingCount:Q(m),message:void 0,duration:r}))},force:({loadingCount:m=0,message:x,duration:y=r})=>{u.current=!!m,c({loadingCount:m,message:x,duration:y})}}),[r]);d(e.current.isLoading,A),d(e.current.start,W),d(e.current.finish,S),d(e.current.update,B),d(e.current.force,D);const P={initialState:i,icon:p,text:f,message:L,duration:v,onFinish:S};return U(()=>{(i||q(r))&&c({loadingCount:i?1:0,message:void 0,duration:r})},[i,r]),s.jsx(H,{initial:!1,children:R?s.jsx(J,{appendToParentPortal:t,containerRef:n,children:s.jsx(V,{allowPinchZoom:o,enabled:l,forwardProps:!0,children:s.jsx(a.Fragment,{children:s.jsx(X,{component:C,...P})})})}):null})},X=({component:e,...t})=>typeof e=="function"?e(t):s.jsx(s.Fragment,{}),N=({message:e,...t})=>e?G(e)?e:s.jsx(w.p,{...t,children:e}):null,Y=(e="fade")=>({initial:{opacity:0,scale:e==="scaleFade"?.95:void 0},animate:{opacity:1,scale:e==="scaleFade"?1:void 0,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:e==="scaleFade"?.95:void 0,transition:{duration:.4,ease:[.4,0,1,1]}}}),z=(e="fill")=>({position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:9999,bg:e==="fill"?["fallback(white, #fbfbfb)","fallback(black, #141414)"]:"fallback(blackAlpha.600, rgba(0, 0, 0, 0.48))",w:"100vw",h:"100dvh",p:"1rem",display:"flex",justifyContent:"center",alignItems:"center"}),h=(e,t="fade")=>({initial:e?!1:"initial",animate:"animate",exit:"exit",variants:Y(t)}),I=a.memo(({initialState:e,icon:t,text:n,message:o,duration:l,onFinish:i})=>{const r={maxW:"24rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5rem"};return F(i,l),s.jsx(M,{className:"ui-loading-screen",...h(e),__css:z(),children:s.jsxs(w.div,{__css:r,children:[s.jsx(_,{size:"6xl",...t}),s.jsx(N,{message:o,lineClamp:3,...n})]})})});I.displayName="ScreenComponent";const O=a.memo(({initialState:e,icon:t,text:n,message:o,duration:l,onFinish:i})=>{const r={bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],maxW:"24rem",p:"1rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5rem",rounded:"0.375rem",boxShadow:["0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)","0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4)"]};return F(i,l),s.jsx(M,{className:"ui-loading-page",...h(e),__css:z("transparent"),children:s.jsxs(w.div,{as:T.div,className:"ui-loading-page__inner",...h(e,"scaleFade"),__css:r,children:[s.jsx(_,{size:"6xl",...t}),s.jsx(N,{message:o,lineClamp:3,...n})]})})});O.displayName="PageComponent";const E=a.memo(({initialState:e,icon:t,text:n,message:o,duration:l,onFinish:i})=>{const r={position:"fixed",right:"1rem",bottom:"1rem",zIndex:9999,bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],maxW:"20rem",p:"0.5rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem",rounded:"0.375rem",boxShadow:["0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 -25px 50px -12px rgba(0, 0, 0, 0.25)","0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4)"]};return F(i,l),s.jsxs(M,{className:"ui-loading-background",...h(e,"scaleFade"),__css:r,children:[s.jsx(_,{size:"xl",...t}),s.jsx(N,{message:o,fontSize:"sm",lineClamp:1,...n})]})});E.displayName="BackgroundComponent";const le=()=>{const{screen:e,page:t,background:n,custom:o}=a.useContext(k);return{screen:e,page:t,background:n,custom:o}};export{ce as L,le as u};
