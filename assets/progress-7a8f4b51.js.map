{"version":3,"file":"progress-7a8f4b51.js","sources":["../../packages/components/progress/src/progress.tsx"],"sourcesContent":["import {\n  ui,\n  forwardRef,\n  HTMLUIProps,\n  ThemeProps,\n  useMultiComponentStyle,\n  omitThemeProps,\n  CSSUIObject,\n  Interpolation,\n  CSSUIProps,\n} from '@yamada-ui/core'\nimport { useAnimation } from '@yamada-ui/use-animation'\nimport { createContext, cx, omitObject, valueToPercent } from '@yamada-ui/utils'\nimport { FC } from 'react'\n\nconst [ProgressProvider, useProgress] = createContext<\n  Record<string, CSSUIObject>\n>({\n  name: `ProgressStylesContext`,\n  errorMessage: `useProgress returned is 'undefined'. Seems you forgot to wrap the components in \"<Progress />\" `,\n})\n\ntype ProgressOptions = {\n  /**\n   * The value of the progress.\n   *\n   * @default 0\n   */\n  value?: number\n  /**\n   * The minimum value of the progress.\n   *\n   * @default 0\n   */\n  min?: number\n  /**\n   * The maximum value of the progress.\n   *\n   * @default 100\n   */\n  max?: number\n  /**\n   * If `true`, the progress bar will show stripe.\n   *\n   * @default false\n   */\n  hasStripe?: boolean\n  /**\n   * If `true`, and hasStripe is `true`, the stripes will be animated.\n   *\n   * @default false\n   */\n  isStripeAnimation?: boolean\n  /**\n   * If `true`, the progress will be indeterminate and the `value` prop will be ignored.\n   *\n   * @default false\n   */\n  isAnimation?: boolean\n  /**\n   * The animation speed in seconds.\n   *\n   * @default '1.4s'\n   */\n  speed?: string | number\n  /**\n   * The CSS `color` property.\n   */\n  filledTrackColor?: CSSUIProps<'unResponsive'>['color']\n}\n\nexport type ProgressProps = HTMLUIProps<'div'> &\n  ThemeProps<'Progress'> &\n  ProgressOptions\n\nexport const Progress = forwardRef<ProgressProps, 'div'>((props, ref) => {\n  const [styles, mergedProps] = useMultiComponentStyle('Progress', props)\n  const {\n    className,\n    children,\n    value,\n    min,\n    max,\n    hasStripe,\n    isStripeAnimation,\n    isAnimation,\n    speed,\n    borderRadius: _borderRadius,\n    rounded,\n    ...rest\n  } = omitThemeProps(mergedProps)\n\n  const borderRadius =\n    _borderRadius ?? rounded ?? (styles.track.borderRadius as string | number)\n\n  const css: CSSUIObject = {\n    w: '100%',\n    overflow: 'hidden',\n    pos: 'relative',\n    ...styles.track,\n  }\n\n  return (\n    <ProgressProvider value={styles}>\n      <ui.div\n        ref={ref}\n        className={cx('ui-progress', className)}\n        __css={css}\n        borderRadius={borderRadius}\n        {...omitObject(rest, ['filledTrackColor'])}\n      >\n        <ProgressFilledTrack\n          min={min}\n          max={max}\n          value={value}\n          hasStripe={hasStripe}\n          isStripeAnimation={isStripeAnimation}\n          isAnimation={isAnimation}\n          speed={speed}\n          borderRadius={borderRadius}\n        />\n        {children}\n      </ui.div>\n    </ProgressProvider>\n  )\n})\n\ntype ProgressFilledTrackProps = HTMLUIProps<'div'> & ProgressProps\n\nconst ProgressFilledTrack: FC<ProgressFilledTrackProps> = ({\n  value = 0,\n  min = 0,\n  max = 100,\n  hasStripe,\n  isStripeAnimation,\n  isAnimation,\n  speed = '1.4s',\n  ...rest\n}) => {\n  const percent = valueToPercent(value, min, max)\n\n  const styles = useProgress()\n\n  const stripeAnimation = useAnimation({\n    keyframes: {\n      '0%': { bgPosition: '1rem 0' },\n      '100%': { bgPosition: '0 0' },\n    },\n    duration: typeof speed === 'string' ? speed : `${speed}s`,\n    iterationCount: 'infinite',\n    timingFunction: 'linear',\n  })\n\n  const interpolationAnimation = useAnimation({\n    keyframes: {\n      '0%': { left: '-40%' },\n      '100%': { left: '100%' },\n    },\n    duration: typeof speed === 'string' ? speed : `${speed}s`,\n    iterationCount: 'infinite',\n    timingFunction: 'ease',\n  })\n\n  isStripeAnimation = !isAnimation && hasStripe && isStripeAnimation\n\n  const css: Interpolation<{}> = {\n    ...(isStripeAnimation\n      ? {\n          animation: stripeAnimation,\n        }\n      : {}),\n    ...(isAnimation\n      ? {\n          position: 'absolute',\n          willChange: 'left',\n          minWidth: '50%',\n          animation: interpolationAnimation,\n        }\n      : {}),\n  }\n\n  const __css: CSSUIObject = {\n    w: `${percent}%`,\n    h: '100%',\n    ...styles.filledTrack,\n  }\n\n  return <ui.div css={css} __css={__css} {...rest} />\n}\n"],"names":["ProgressProvider","useProgress","createContext","Progress","forwardRef","props","ref","styles","mergedProps","useMultiComponentStyle","className","children","value","min","max","hasStripe","isStripeAnimation","isAnimation","speed","_borderRadius","rounded","rest","omitThemeProps","borderRadius","css","jsx","jsxs","ui","cx","omitObject","ProgressFilledTrack","percent","valueToPercent","stripeAnimation","useAnimation","interpolationAnimation","__css"],"mappings":"iVAeA,KAAM,CAACA,EAAkBC,CAAW,EAAIC,EAEtC,CACA,KAAM,wBACN,aAAc,iGAChB,CAAC,EAuDYC,EAAWC,EAAiC,CAACC,EAAOC,IAAQ,CACvE,KAAM,CAACC,EAAQC,CAAW,EAAIC,EAAuB,WAAYJ,CAAK,EAChE,CACJ,UAAAK,EACA,SAAAC,EACA,MAAAC,EACA,IAAAC,EACA,IAAAC,EACA,UAAAC,EACA,kBAAAC,EACA,YAAAC,EACA,MAAAC,EACA,aAAcC,EACd,QAAAC,EACA,GAAGC,CAAA,EACDC,EAAed,CAAW,EAExBe,EACJJ,GAAiBC,GAAYb,EAAO,MAAM,aAEtCiB,EAAmB,CACvB,EAAG,OACH,SAAU,SACV,IAAK,WACL,GAAGjB,EAAO,KAAA,EAIV,OAAAkB,EAACzB,EAAiB,CAAA,MAAOO,EACvB,SAAAmB,EAACC,EAAG,IAAH,CACC,IAAArB,EACA,UAAWsB,EAAG,cAAelB,CAAS,EACtC,MAAOc,EACP,aAAAD,EACC,GAAGM,EAAWR,EAAM,CAAC,kBAAkB,CAAC,EAEzC,SAAA,CAAAI,EAACK,EAAA,CACC,IAAAjB,EACA,IAAAC,EACA,MAAAF,EACA,UAAAG,EACA,kBAAAC,EACA,YAAAC,EACA,MAAAC,EACA,aAAAK,CAAA,CACF,EACCZ,CAAA,CAAA,CAEL,CAAA,CAAA,CAEJ,CAAC,EAIKmB,EAAoD,CAAC,CACzD,MAAAlB,EAAQ,EACR,IAAAC,EAAM,EACN,IAAAC,EAAM,IACN,UAAAC,EACA,kBAAAC,EACA,YAAAC,EACA,MAAAC,EAAQ,OACR,GAAGG,CACL,IAAM,CACJ,MAAMU,EAAUC,EAAepB,EAAOC,EAAKC,CAAG,EAExCP,EAASN,IAETgC,EAAkBC,EAAa,CACnC,UAAW,CACT,KAAM,CAAE,WAAY,QAAS,EAC7B,OAAQ,CAAE,WAAY,KAAM,CAC9B,EACA,SAAU,OAAOhB,GAAU,SAAWA,EAAQ,GAAGA,CAAK,IACtD,eAAgB,WAChB,eAAgB,QAAA,CACjB,EAEKiB,EAAyBD,EAAa,CAC1C,UAAW,CACT,KAAM,CAAE,KAAM,MAAO,EACrB,OAAQ,CAAE,KAAM,MAAO,CACzB,EACA,SAAU,OAAOhB,GAAU,SAAWA,EAAQ,GAAGA,CAAK,IACtD,eAAgB,WAChB,eAAgB,MAAA,CACjB,EAEmBF,EAAA,CAACC,GAAeF,GAAaC,EAEjD,MAAMQ,EAAyB,CAC7B,GAAIR,EACA,CACE,UAAWiB,CAAA,EAEb,CAAC,EACL,GAAIhB,EACA,CACE,SAAU,WACV,WAAY,OACZ,SAAU,MACV,UAAWkB,CAAA,EAEb,CAAC,CAAA,EAGDC,EAAqB,CACzB,EAAG,GAAGL,CAAO,IACb,EAAG,OACH,GAAGxB,EAAO,WAAA,EAGZ,SAAQoB,EAAG,IAAH,CAAO,IAAAH,EAAU,MAAAY,EAAe,GAAGf,CAAM,CAAA,CACnD"}