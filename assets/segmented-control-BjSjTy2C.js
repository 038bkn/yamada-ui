import{j as r,a as ee}from"./jsx-runtime-2xDJh5tt.js";import{u as te}from"./index-D4fsg9Nk.js";import{c as se}from"./index-DeEl9i-o.js";import{t as ne}from"./index-D4pp_ODl.js";import{r as s}from"./index-CBqU2yxZ.js";import{L as ae}from"./index-CpvBRLJe.js";import{a as oe,g as le,o as A,w as $,L as h,h as L,M as k,v as re,u as P,c as E,N as ie}from"./factory-DLpD49Xl.js";import{M as ce}from"./motion-CIylrsRE.js";import{f as J}from"./forward-ref-DuAegr0M.js";import{a as de}from"./use-component-style-D9HuanlY.js";import{o as ue}from"./theme-provider-DXhTM26K.js";const{DescendantsContextProvider:me,useDescendants:fe,useDescendant:ge}=se(),[be,K]=oe({strict:!1,name:"SegmentedControlContext"}),De=J((C,y)=>{const[d,u]=de("SegmentedControl",C);let{className:m,id:l,name:x,isReadOnly:o,isDisabled:n,children:O,items:I=[],value:F,defaultValue:R,...c}=ue(u);l??(l=s.useId()),x??(x=`segmented-control-${s.useId()}`),c.onChange=le(c.onChange);const v=fe(),[f,S]=s.useState(-1),[V,D]=s.useState(!1),M=s.useRef(null),j=s.useRef(new Map),[g,B]=te({value:F,defaultValue:R,onChange:c.onChange}),z=s.useCallback(e=>{if(n||o){e.preventDefault();return}B(e.target.value)},[n,o,B]),G=s.useCallback((e,t)=>{if(!n)if(t){const i=v.enabledNextValue(e);i&&S(i.index)}else S(e)},[v,n]),T=s.useCallback(()=>S(-1),[]),Q=s.useCallback((e={},t=null)=>({...A(c,["onChange","aria-readonly"]),...e,ref:$(M,t),id:l,"aria-disabled":h(n),"aria-readonly":h(o),onBlur:L(e.onBlur,T)}),[l,n,o,T,c]),U=s.useCallback(({index:e,...t},i=null)=>{const a=t.disabled??t.isDisabled??n,b=t.readOnly??t.isReadOnly??o,p=t.value===g;return{...A(t,["isDisabled","isReadOnly","aria-readonly"]),ref:i,id:`${l}-${e}`,type:"radio",name:x,disabled:a||b,readOnly:b,checked:p,"aria-disabled":h(a),"aria-readonly":h(b),"data-checked":k(p),"data-focus":k(e===f),style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},onChange:L(t.onChange,_=>!a&&!b?z(_):{})}},[n,o,g,l,x,f,z]),W=s.useCallback(({index:e,isDisabled:t,isReadOnly:i,...a},b=null)=>{const p=a.disabled??t??n,_=a.readOnly??i??o,Y=a.value===g,H=e===f;return{...a,ref:$(Z=>j.current.set(a.value,Z),b),"aria-disabled":h(p),"aria-readonly":h(_),"data-checked":k(Y),"data-focus":k(H),"data-focus-visible":k(H&&V),onFocus:L(a.onFocus,()=>G(e,p||_||!1)),...p||_?{_hover:{},_active:{},_focus:{},_invalid:{},_focusVisible:{}}:{}}},[f,n,V,o,G,g]);s.useEffect(()=>ne(D),[]);const X={display:"inline-flex",alignItems:"center",...d.container},q=re(O);let N=[];if(!q.length&&I.length?N=I.map(({label:e,value:t,...i},a)=>r(w,{value:t,...i,children:e},a)):N=q,g==null&&R==null)for(const e of N){if(e.type!==w&&e.type.displayName!==w.displayName)continue;const t=e.props.value;B(t);break}return r(me,{value:v,children:r(be,{value:{getInputProps:U,getLabelProps:W,styles:d,selectedValue:g},children:r(ae,{id:l,children:r(P.div,{...Q({},y),className:E("ui-segmented-control",m),__css:X,children:N})})})})}),w=J(({className:C,disabled:y,readOnly:d,isDisabled:u,isReadOnly:m,value:l,onChange:x,children:o,motionProps:n,...O},I)=>{const[,F]=ie({rerender:!0}),{selectedValue:R,getInputProps:c,getLabelProps:v,styles:f}=K(),{index:S,register:V}=ge({disabled:u||m}),D={index:S,value:l,onChange:x,disabled:y,readOnly:d,isDisabled:u,isReadOnly:m},M={position:"relative",cursor:"pointer",flex:"1 1 0%",display:"inline-flex",justifyContent:"center",alignItems:"center",...f.button},j=R===l;return ee(P.label,{...v(A(D,["onChange"])),className:E("ui-segmented-control__button",C),__css:M,...O,children:[r(P.input,{...c(D,$(V,I))}),j&&F?r(pe,{...n}):null,r(P.span,{zIndex:"1",children:o})]})});w.displayName="SegmentedControlButton";const pe=({className:C,transition:y,...d})=>{const{styles:u}=K(),m={position:"absolute",w:"100%",h:"100%",...u.cursor};return r(ce,{className:E("ui-segmented-control__cursor",C),layoutDependency:!1,layoutId:"cursor",transition:{type:"spring",bounce:.15,duration:.4,...y},__css:m,...d})};export{De as S,w as a};
