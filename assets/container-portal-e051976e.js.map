{"version":3,"file":"container-portal-e051976e.js","sources":["../../packages/components/portal/src/portal.tsx","../../packages/components/portal/src/portal-provider.tsx","../../packages/components/portal/src/default-portal.tsx","../../packages/components/portal/src/container-portal.tsx"],"sourcesContent":["import { ReactNode, RefObject } from 'react'\nimport { ContainerPortal, DefaultPortal } from './'\n\nexport type PortalProps = {\n  /**\n   * The `ref` to the component where the portal will be attached to.\n   */\n  containerRef?: RefObject<HTMLElement | null>\n  children: ReactNode\n  /**\n   * If `true`, the portal will check if it is within a parent portal\n   * and append itself to the parent's portal node.\n   * This provides nesting for portals.\n   *\n   * If `false`, the portal will always append to `document.body`\n   * regardless of nesting. It is used to opt out of portal nesting.\n   *\n   * @default true\n   */\n  appendToParentPortal?: boolean\n  /**\n   * If `true`, the forwarding will be disabled.\n   */\n  isDisabled?: boolean\n}\n\nexport const Portal = ({\n  containerRef,\n  appendToParentPortal = true,\n  isDisabled,\n  children,\n}: PortalProps) => {\n  if (isDisabled) return children\n\n  return containerRef ? (\n    <ContainerPortal containerRef={containerRef} {...{ children }} />\n  ) : (\n    <DefaultPortal\n      appendToParentPortal={appendToParentPortal}\n      {...{ children }}\n    />\n  )\n}\n\nPortal.className = 'ui-portal'\nPortal.selector = '.ui-portal'\n","import { createContext } from '@yamada-ui/utils'\n\ntype PortalContext = HTMLDivElement | null\n\nexport const [PortalProvider, usePortal] = createContext<PortalContext>({\n  strict: false,\n  name: 'PortalContext',\n})\n","import { useSafeLayoutEffect } from '@yamada-ui/utils'\nimport { FC, PropsWithChildren, useEffect, useRef, useState } from 'react'\nimport { createPortal } from 'react-dom'\nimport { PortalProvider, usePortal } from './portal-provider'\n\nexport const DefaultPortal: FC<\n  PropsWithChildren<{ appendToParentPortal: boolean }>\n> = ({ appendToParentPortal, children }) => {\n  const [node, setNode] = useState<HTMLElement | null>(null)\n  const el = useRef<HTMLDivElement | null>(null)\n\n  const [, forceUpdate] = useState({})\n\n  useEffect(() => forceUpdate({}), [])\n\n  const parent = usePortal()\n\n  useSafeLayoutEffect(() => {\n    if (!node) return\n\n    const { ownerDocument } = node\n    const host = appendToParentPortal\n      ? parent ?? ownerDocument.body\n      : ownerDocument.body\n\n    if (!host) return\n\n    el.current = ownerDocument.createElement('div')\n    el.current.className = 'ui-portal'\n\n    host.appendChild(el.current)\n    forceUpdate({})\n\n    const portalNode = el.current\n\n    return () => {\n      if (host.contains(portalNode)) host.removeChild(portalNode)\n    }\n  }, [node])\n\n  return el.current ? (\n    createPortal(\n      <PortalProvider value={el.current}>{children}</PortalProvider>,\n      el.current,\n    )\n  ) : (\n    <span ref={(el) => (el ? setNode(el) : undefined)} />\n  )\n}\n","import { useSafeLayoutEffect } from '@yamada-ui/utils'\nimport { FC, useMemo, useState, PropsWithChildren, RefObject } from 'react'\nimport { createPortal } from 'react-dom'\nimport { PortalProvider } from './portal-provider'\n\ntype ContainerPortalProps = PropsWithChildren & {\n  containerRef: RefObject<HTMLElement | null>\n  appendToParentPortal?: boolean\n}\n\nexport const ContainerPortal: FC<ContainerPortalProps> = ({\n  children,\n  containerRef,\n  appendToParentPortal,\n}) => {\n  const parent = containerRef.current\n  const host =\n    parent ?? (typeof window !== 'undefined' ? document.body : undefined)\n\n  const portal = useMemo(() => {\n    if (!parent) return\n\n    const { ownerDocument } = parent\n\n    const node = ownerDocument.createElement('div')\n\n    if (node) node.className = 'ui-portal'\n\n    return node\n  }, [parent])\n\n  const [, forceUpdate] = useState({})\n\n  useSafeLayoutEffect(() => forceUpdate({}), [])\n\n  useSafeLayoutEffect(() => {\n    if (!portal || !host) return\n\n    host.appendChild(portal)\n\n    return () => {\n      host.removeChild(portal)\n    }\n  }, [portal, host])\n\n  return host && portal\n    ? createPortal(\n        <PortalProvider value={appendToParentPortal ? portal : null}>\n          {children}\n        </PortalProvider>,\n        portal,\n      )\n    : null\n}\n"],"names":["Portal","containerRef","appendToParentPortal","isDisabled","children","ContainerPortal","jsx","DefaultPortal","PortalProvider","usePortal","createContext","node","setNode","useState","el","useRef","forceUpdate","useEffect","parent","useSafeLayoutEffect","ownerDocument","host","portalNode","createPortal","portal","useMemo"],"mappings":"0KA0BO,MAAMA,EAAS,CAAC,CACrB,aAAAC,EACA,qBAAAC,EAAuB,GACvB,WAAAC,EACA,SAAAC,CACF,IACMD,EAAmBC,EAEhBH,IACJI,EAAgB,CAAA,aAAAJ,EAAkC,SAAAG,CAAY,CAAA,EAE/DE,EAACC,EAAA,CACC,qBAAAL,EACM,SAAAE,CAAS,CAAA,EAKrBJ,EAAO,UAAY,YACnBA,EAAO,SAAW,aCzCX,KAAM,CAACQ,EAAgBC,CAAS,EAAIC,EAA6B,CACtE,OAAQ,GACR,KAAM,eACR,CAAC,ECFYH,EAET,CAAC,CAAE,qBAAAL,EAAsB,SAAAE,KAAe,CAC1C,KAAM,CAACO,EAAMC,CAAO,EAAIC,WAA6B,IAAI,EACnDC,EAAKC,SAA8B,IAAI,EAEvC,EAAGC,CAAW,EAAIH,EAAA,SAAS,CAAE,CAAA,EAEnCI,EAAAA,UAAU,IAAMD,EAAY,EAAE,EAAG,CAAE,CAAA,EAEnC,MAAME,EAAST,IAEf,OAAAU,EAAoB,IAAM,CACxB,GAAI,CAACR,EAAM,OAEL,KAAA,CAAE,cAAAS,CAAkB,EAAAT,EACpBU,EAAOnB,EACTgB,GAAUE,EAAc,KACxBA,EAAc,KAElB,GAAI,CAACC,EAAM,OAERP,EAAA,QAAUM,EAAc,cAAc,KAAK,EAC9CN,EAAG,QAAQ,UAAY,YAElBO,EAAA,YAAYP,EAAG,OAAO,EAC3BE,EAAY,CAAE,CAAA,EAEd,MAAMM,EAAaR,EAAG,QAEtB,MAAO,IAAM,CACPO,EAAK,SAASC,CAAU,GAAGD,EAAK,YAAYC,CAAU,CAAA,CAC5D,EACC,CAACX,CAAI,CAAC,EAEFG,EAAG,QACRS,EAAA,aACGjB,EAAAE,EAAA,CAAe,MAAOM,EAAG,QAAU,SAAAV,EAAS,EAC7CU,EAAG,OACL,EAECR,EAAA,OAAA,CAAK,IAAMQ,GAAQA,EAAKF,EAAQE,CAAE,EAAI,MAAY,CAAA,CAEvD,ECtCaT,EAA4C,CAAC,CACxD,SAAAD,EACA,aAAAH,EACA,qBAAAC,CACF,IAAM,CACJ,MAAMgB,EAASjB,EAAa,QACtBoB,EACJH,IAAW,OAAO,OAAW,IAAc,SAAS,KAAO,QAEvDM,EAASC,EAAAA,QAAQ,IAAM,CAC3B,GAAI,CAACP,EAAQ,OAEP,KAAA,CAAE,cAAAE,CAAkB,EAAAF,EAEpBP,EAAOS,EAAc,cAAc,KAAK,EAE1C,OAAAT,IAAMA,EAAK,UAAY,aAEpBA,CAAA,EACN,CAACO,CAAM,CAAC,EAEL,EAAGF,CAAW,EAAIH,EAAA,SAAS,CAAE,CAAA,EAEnC,OAAAM,EAAoB,IAAMH,EAAY,EAAE,EAAG,CAAE,CAAA,EAE7CG,EAAoB,IAAM,CACpB,GAAA,GAACK,GAAU,CAACH,GAEhB,OAAAA,EAAK,YAAYG,CAAM,EAEhB,IAAM,CACXH,EAAK,YAAYG,CAAM,CAAA,CACzB,EACC,CAACA,EAAQH,CAAI,CAAC,EAEVA,GAAQG,EACXD,EAAA,eACGf,EAAe,CAAA,MAAON,EAAuBsB,EAAS,KACpD,SAAApB,EACH,EACAoB,CAEF,EAAA,IACN"}