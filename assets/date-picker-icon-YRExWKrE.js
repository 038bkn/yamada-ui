import{j as p}from"./jsx-runtime-5BUNAZ9W.js";import{p as He,a as Ke}from"./popover-content-t9f274BP.js";import{f as Re}from"./forward-ref-A-8Arhkk.js";import{c as Te,Q as Ie,Z as Me,_ as Ue,o as Be,a2 as Je,P as Qe,e as Ze,a3 as qe,z as ye,h as x,J as Ee,u as K,a as Y,v as Fe,f as Ge}from"./factory-Ei-jEUJK.js";import{u as Le}from"./index-_PFzgIKM.js";import{r as o}from"./index-4g5l5LRQ.js";import{u as Xe}from"./index-Q3A_zbLW.js";import{u as $e}from"./index-OJcKBfAk.js";import{d as H,i as Ve,a as xe,b as We}from"./ja-K5i-PI1B.js";import{u as De,f as we}from"./form-control-l7lnk72n.js";import{u as en}from"./theme-provider-PZSzWP7q.js";import{b as nn,a as sn}from"./icon-UdJ0z_jp.js";const[mn,T]=Te({strict:!1,name:"DatePickerContext"}),Pn=({parseDate:r,defaultIsOpen:a,closeOnBlur:l=!0,closeOnEsc:g=!0,placement:m="bottom-start",duration:v=.2,defaultValue:u,type:R,defaultType:j,onChangeType:S,month:I,defaultMonth:M,onChangeMonth:U,firstDayOfWeek:B,amountOfMonths:J,paginateBy:Q,withWeekdays:Z,disableOutsideDays:q,minDate:f,maxDate:d,locale:_,inputFormat:N="YYYY/MM/DD",yearFormat:F,monthFormat:G,weekdayFormat:L,dateFormat:X,weekendDays:$,today:W,excludeDate:D,calendarVariant:w,calendarSize:ee,calendarColorScheme:ne,holidays:se,withHeader:oe,withControls:te,withLabel:ce,calendarProps:re,placeholder:ie,closeOnSelect:ae=!0,allowInput:C=!0,allowInputBeyond:O=!1,pattern:le=/[^0-9\-\/]/g,...s})=>{var he;const{theme:je}=en();s=De(s),_??(_=((he=je.__config.date)==null?void 0:he.locale)??"en");const{id:ue}=s,t=Ie(s,we),[fe,z]=Me(Be(s,[...He,"id","value","onChange"]),Ue),de=o.useCallback(e=>{let n=r?r(e):H(e,N,_).toDate();if(n!=null)return O||(d&&Ve(n,d)&&(n=d),f&&xe(n,f)&&(n=f)),n},[O,N,_,d,f,r]),E=o.useCallback(e=>{if(e!=null)return O||(d&&Ve(e,d)&&(e=d),f&&xe(e,f)&&(e=f)),H(e).locale(_??"en").format(N)},[O,N,_,d,f]),[c,Ce]=o.useState(a??!1),[P,h]=Xe({value:s.value,defaultValue:u,onChange:s.onChange,onUpdate:(e,n)=>!We(e,n),isShow:!0}),[ke,V]=o.useState(E(P)),A=o.useRef(null),y=o.useRef(null),k=o.useCallback(()=>{var e;t.disabled||t.readOnly||(Ce(!0),C&&y.current&&y.current.focus(),(e=s.onOpen)==null||e.call(s))},[C,t,s]),i=o.useCallback(()=>{var e;Ce(!1),(e=s.onClose)==null||e.call(s)},[s]),be=o.useCallback(e=>{e.stopPropagation(),h(void 0),V(void 0)},[h]),pe=o.useCallback(()=>{c?C&&y.current&&y.current.focus():k()},[C,c,k]),ge=o.useCallback(()=>{c||k()},[c,k]),me=o.useCallback(e=>{const n=Je(e);if(Qe(A.current,n)||!l)return;const b=E(P);V(b),c&&i()},[l,E,c,i,P]),Pe=o.useCallback(e=>{if(e.key===" "&&(e.key=e.code),t.disabled||t.readOnly)return;const b={Space:c?k:i,Enter:c?k:i,Escape:g?i:void 0}[e.key];b&&(e.preventDefault(),e.stopPropagation(),b(e))},[g,t,c,i,k]),ve=o.useCallback(e=>{const n=E(e);h(e),V(n),ae&&e&&i()},[ae,E,i,h]),_e=o.useCallback(e=>{let n=e.target.value;n=n.replace(le,"");const b=de(n);V(n),H(b).isValid()?h(b):h(void 0)},[le,de,V,h]);Ze(()=>{if(y.current&&qe(y.current))return;const e=E(P);V(e)},[P]),$e({ref:A,handler:i,enabled:l});const Se=o.useCallback((e={},n=null)=>({ref:ye(A,n),...fe,...e,...t,onClick:x(e.onClick,s.onClick,pe),onBlur:x(e.onBlur,s.onBlur,me)}),[fe,t,me,pe,s]),Ne=o.useCallback(e=>({...s,...e,isOpen:c,onOpen:k,onClose:i,placement:m,duration:v,trigger:"never",closeOnButton:!1}),[v,c,i,k,m,s]),Oe=o.useCallback((e={},n=null)=>{const b={...e.style,...C?{}:{cursor:"pointer"}};return{ref:ye(n,y),tabIndex:C?-1:0,...e,...t,style:b,"data-active":Ee(c),"aria-expanded":Ee(c),onFocus:x(e.onFocus,s.onFocus,ge),onKeyDown:x(e.onKeyDown,s.onKeyDown,Pe)}},[C,t,c,s,ge,Pe]),Ye=o.useCallback((e={})=>{const n={...e.style,...z.style,...C?{}:{pointerEvents:"none"}};return{placeholder:ie,...t,...z,...e,style:n,id:ue,tabIndex:C?0:-1,value:ke??"",cursor:t.readOnly?"default":"text",pointerEvents:t.disabled?"none":"auto",onChange:x(e.onChange,_e)}},[z,C,ie,t,ue,ke,_e]),ze=o.useCallback(e=>({...e,type:R,defaultType:j,onChangeType:S,month:I,defaultMonth:M,onChangeMonth:U,firstDayOfWeek:B,amountOfMonths:J,paginateBy:Q,withWeekdays:Z,disableOutsideDays:q,yearFormat:F,monthFormat:G,weekdayFormat:L,dateFormat:X,weekendDays:$,today:W,holidays:se,withHeader:oe,withControls:te,withLabel:ce,variant:w,size:ee,colorScheme:ne,...re,value:P,defaultValue:u,onChange:ve,minDate:f,maxDate:d,excludeDate:D,locale:_}),[J,ne,re,ee,w,X,M,j,u,q,D,B,se,_,d,f,I,G,ve,U,S,Q,W,R,P,L,$,te,oe,ce,Z,F]),Ae=o.useCallback(({clear:e,...n}={})=>({...n,...t,onClick:x(n.onClick,e?be:void 0)}),[t,be]);return{value:P,getContainerProps:Se,getPopoverProps:Ne,getFieldProps:Oe,getInputProps:Ye,getIconProps:Ae,getCalendarProps:ze}},vn=Re(({className:r,h:a,minH:l,inputProps:g,...m},v)=>{const u=T(),R={paddingEnd:"2rem",h:a,minH:l,display:"flex",alignItems:"center",...u.field,cursor:"text",...u.feild};return p(Ke,{children:p(K.div,{className:Y("ui-date-picker__field",r),__css:R,...m,children:p(K.input,{ref:v,className:"ui-date-picker__field__input",display:"inline-block",w:"full",...g})})})}),on=Re(({className:r,children:a,__css:l,...g},m)=>{const u={position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",cursor:"pointer",...T().icon,...l},j=Fe(a).map(S=>o.cloneElement(S,{focusable:!1,"aria-hidden":!0,style:{maxWidth:"1em",maxHeight:"1em",color:"currentColor"}}));return p(K.div,{ref:m,className:Y("ui-date-picker__icon",r),__css:u,...g,children:Ge(a)?j:p(tn,{})})}),tn=({className:r,...a})=>p(nn,{className:Y("ui-date-picker__icon__calendar",r),viewBox:"0 0 24 24",...a,children:p("path",{fill:"currentColor",d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),_n=({className:r,children:a,...l})=>{const g=o.useRef(null),m=T(),v=l.disabled,u=Le({ref:g,isDisabled:v,...l});return p(on,{"aria-label":"Clear value",className:Y("ui-date-picker__icon--clear",r),__css:m.clearIcon,...u,children:a??p(sn,{w:"0.5em",h:"0.5em"})})};export{mn as D,vn as a,_n as b,on as c,Pn as u};
