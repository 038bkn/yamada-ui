{"version":3,"file":"indicator.stories-f577ae91.js","sources":["../../packages/components/indicator/src/indicator.tsx"],"sourcesContent":["import {\n  ui,\n  forwardRef,\n  omitThemeProps,\n  CSSUIObject,\n  HTMLUIProps,\n  ThemeProps,\n  useComponentStyle,\n  Token,\n} from \"@yamada-ui/core\"\nimport { useValue } from \"@yamada-ui/use-value\"\nimport { cx } from \"@yamada-ui/utils\"\nimport { ReactNode, useMemo } from \"react\"\n\ntype IndicatorOptions = {\n  children: ReactNode\n  /**\n   * If `true`, set the indicator as an inline element.\n   *\n   * @default false\n   * */\n  inline?: Token<boolean>\n  /**\n   * The placement of the indicator.\n   *\n   * @default 'top-right'\n   */\n  placement?: Token<\n    | \"top\"\n    | \"top-left\"\n    | \"top-right\"\n    | \"left\"\n    | \"right\"\n    | \"bottom\"\n    | \"bottom-left\"\n    | \"bottom-right\"\n  >\n  /**\n   * Changes position offset, usually used when element has border-radius.\n   *\n   * @default 0\n   */\n  offset?: Token<number>\n  /**\n   * The indicator label to use.\n   */\n  label?: ReactNode\n  /**\n   * If `label` is of type number, the maximum number displayed.\n   *\n   * @default 99\n   */\n  overflowCount?: number\n  /**\n   * If `true`, display 0.\n   *\n   * @default true\n   */\n  showZero?: boolean\n  /**\n   * If `true`, the indicator will be disabled.\n   *\n   * @default false\n   */\n  isDisabled?: boolean\n  /**\n   * If `true`, display the border of the indicator.\n   *\n   * @default false\n   */\n  withBorder?: boolean\n}\n\nexport type IndicatorProps = Omit<HTMLUIProps<\"div\">, \"children\"> &\n  ThemeProps<\"Indicator\"> &\n  IndicatorOptions\n\nconst getPlacementStyle = (\n  placement:\n    | \"top\"\n    | \"top-left\"\n    | \"top-right\"\n    | \"left\"\n    | \"right\"\n    | \"bottom\"\n    | \"bottom-left\"\n    | \"bottom-right\",\n  offset: number,\n): CSSUIObject => {\n  const styles: CSSUIObject = {}\n  let translateX = \"\"\n  let translateY = \"\"\n\n  if (placement.includes(\"top\")) {\n    styles.top = offset\n    translateY = \"-50%\"\n  } else if (placement.includes(\"bottom\")) {\n    styles.bottom = offset\n    translateY = \"50%\"\n  } else {\n    styles.top = \"50%\"\n    translateY = \"-50%\"\n  }\n\n  if (placement.includes(\"left\")) {\n    styles.left = offset\n    translateX = \"-50%\"\n  } else if (placement.includes(\"right\")) {\n    styles.right = offset\n    translateX = \"50%\"\n  } else {\n    styles.left = \"50%\"\n    translateX = \"-50%\"\n  }\n\n  styles.transform = `translate(${translateX}, ${translateY})`\n\n  return styles\n}\n\nexport const Indicator = forwardRef<IndicatorProps, \"div\">((props, ref) => {\n  const [styles, mergedProps] = useComponentStyle(\"Indicator\", props)\n  let {\n    className,\n    inline = false,\n    placement = \"top-right\",\n    offset = 0,\n    label,\n    overflowCount = 99,\n    showZero = true,\n    children,\n    isDisabled,\n    ...rest\n  } = omitThemeProps(mergedProps)\n\n  const isNumeric = typeof label === \"number\"\n\n  if (isNumeric && !showZero && (label as number) <= 0) isDisabled ??= true\n\n  const computedInline = useValue(inline)\n  const computedPlacement = useValue(placement)\n  const computedOffset = useValue(offset)\n\n  const renderLabel = useMemo(() => {\n    if (isNumeric) {\n      if ((label as number) > overflowCount) {\n        return (\n          <>\n            {overflowCount}\n            <ui.span lineHeight={1}>+</ui.span>\n          </>\n        )\n      } else {\n        return label\n      }\n    } else {\n      return label\n    }\n  }, [isNumeric, label, overflowCount])\n\n  const css: CSSUIObject = {\n    position: \"absolute\",\n    ...getPlacementStyle(computedPlacement, computedOffset),\n    ...(isNumeric ? { fontWeight: \"medium\" } : {}),\n    ...styles,\n  }\n\n  return (\n    <ui.div\n      ref={ref}\n      className={cx(\"ui-indicator\", className)}\n      __css={{\n        position: \"relative\",\n        display: computedInline ? \"inline-block\" : \"block\",\n      }}\n    >\n      {!isDisabled ? (\n        <ui.div\n          ref={ref}\n          className={cx(\"ui-indicator__inner\", className)}\n          __css={css}\n          {...rest}\n        >\n          {renderLabel}\n        </ui.div>\n      ) : null}\n\n      {children}\n    </ui.div>\n  )\n})\n"],"names":["getPlacementStyle","placement","offset","styles","translateX","translateY","Indicator","forwardRef","props","ref","mergedProps","useComponentStyle","className","inline","label","overflowCount","showZero","children","isDisabled","rest","omitThemeProps","isNumeric","computedInline","useValue","computedPlacement","computedOffset","renderLabel","useMemo","jsxs","Fragment","ui","css","cx","jsx"],"mappings":"8tBA6EA,MAAMA,GAAoB,CACxBC,EASAC,IACgB,CAChB,MAAMC,EAAsB,CAAA,EAC5B,IAAIC,EAAa,GACbC,EAAa,GAEb,OAAAJ,EAAU,SAAS,KAAK,GAC1BE,EAAO,IAAMD,EACAG,EAAA,QACJJ,EAAU,SAAS,QAAQ,GACpCE,EAAO,OAASD,EACHG,EAAA,QAEbF,EAAO,IAAM,MACAE,EAAA,QAGXJ,EAAU,SAAS,MAAM,GAC3BE,EAAO,KAAOD,EACDE,EAAA,QACJH,EAAU,SAAS,OAAO,GACnCE,EAAO,MAAQD,EACFE,EAAA,QAEbD,EAAO,KAAO,MACDC,EAAA,QAGfD,EAAO,UAAY,aAAaC,CAAU,KAAKC,CAAU,IAElDF,CACT,EAEaG,EAAYC,GAAkC,CAACC,EAAOC,IAAQ,CACzE,KAAM,CAACN,EAAQO,CAAW,EAAIC,GAAkB,YAAaH,CAAK,EAC9D,GAAA,CACF,UAAAI,EACA,OAAAC,GAAS,GACT,UAAAZ,GAAY,YACZ,OAAAC,GAAS,EACT,MAAAY,EACA,cAAAC,EAAgB,GAChB,SAAAC,GAAW,GACX,SAAAC,GACA,WAAAC,EACA,GAAGC,EAAA,EACDC,GAAeV,CAAW,EAExB,MAAAW,EAAY,OAAOP,GAAU,SAE/BO,GAAa,CAACL,IAAaF,GAAoB,IAAkBI,MAAA,KAE/D,MAAAI,GAAiBC,EAASV,EAAM,EAChCW,GAAoBD,EAAStB,EAAS,EACtCwB,GAAiBF,EAASrB,EAAM,EAEhCwB,GAAcC,GAAAA,QAAQ,IACtBN,GACGP,EAAmBC,EAGjBa,EAAAC,GAAA,CAAA,SAAA,CAAAd,IACAe,EAAG,KAAH,CAAQ,WAAY,EAAG,SAAC,IAAA,CAC3B,CAAA,CAAA,EAMGhB,EAER,CAACO,EAAWP,EAAOC,CAAa,CAAC,EAE9BgB,GAAmB,CACvB,SAAU,WACV,GAAG/B,GAAkBwB,GAAmBC,EAAc,EACtD,GAAIJ,EAAY,CAAE,WAAY,UAAa,CAAC,EAC5C,GAAGlB,CAAA,EAIH,OAAAyB,EAACE,EAAG,IAAH,CACC,IAAArB,EACA,UAAWuB,EAAG,eAAgBpB,CAAS,EACvC,MAAO,CACL,SAAU,WACV,QAASU,GAAiB,eAAiB,OAC7C,EAEC,SAAA,CAACJ,EASE,KARFe,EAACH,EAAG,IAAH,CACC,IAAArB,EACA,UAAWuB,EAAG,sBAAuBpB,CAAS,EAC9C,MAAOmB,GACN,GAAGZ,GAEH,SAAAO,EAAA,CAAA,EAIJT,EAAA,CAAA,CAAA,CAGP,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}