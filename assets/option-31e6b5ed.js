import{a as O,j as me}from"./jsx-runtime-03b4ddbf.js";import{u as De}from"./index-78c604bb.js";import{r as s}from"./index-76fb7be0.js";import{c as we,a as Fe}from"./icon-e1655999.js";import{f as J}from"./forward-ref-8b7d2a6f.js";import{k as Oe,D as Ee,Y as be,Z as he,h as H,a1 as Te,C as Re,i as _e,B as Ae,a5 as Ne,x as se,t as $,A as ve,v as q,s as Ce,a6 as Le,U as te,p as je,d as U,e as V,M as Be}from"./factory-c9bc4a28.js";import{b as Me}from"./popover-content-4385bd9b.js";import{u as He}from"./index-b4589c7a.js";import{c as Ue}from"./index-d495c42f.js";import{u as Ve}from"./index-690e5404.js";import{u as Ge,f as Ke}from"./form-control-eb3b7686.js";const We=l=>{var c;return Le(l)&&!!((c=l==null?void 0:l.getAttribute("role"))!=null&&c.startsWith("select-item"))},{DescendantsContextProvider:ft,useDescendantsContext:ge,useDescendants:Ye,useDescendant:ze}=Ue(),[pt,j]=Oe({strict:!1,name:"SelectContext"}),xt=({defaultIsOpen:l,placeholder:c,closeOnBlur:a=!0,closeOnEsc:u=!0,closeOnSelect:r=!0,placeholderInOptions:x=!0,omitSelectedValues:n=!1,maxSelectedValues:d,isEmpty:v,placement:g="bottom-start",duration:S=.2,optionProps:y,...o})=>{o=Ge(o);const f=Ee(o,Ke),m=be(o,he),i=Ye(),[C,b]=s.useState(-1),[W,Q]=s.useState(!1),k=s.useRef(null),X=s.useRef(null),ne=s.useRef(null),D=s.useRef(new Set([])),[P,G]=He({value:o.value,defaultValue:o.defaultValue,onChange:o.onChange}),[M,Y]=s.useState(void 0),N=C>-1,h=H(P),L=(h?!P.length:!P)&&!(c&&x),E=i.values(({node:e})=>h&&P.includes(e.dataset.value??"")).map(({index:e})=>e),T=i.enabledValues(({index:e})=>!E.includes(e)),w=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledfirstValue();if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const I=T[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,T,h,n,E]),K=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledlastValue();if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const I=T.reverse()[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,T,h,n,E]),oe=s.useCallback(()=>{const e=setTimeout(()=>{const I=i.enabledValues().find(({node:A})=>h?P.includes(A.dataset.value??""):A.dataset.value===P);I&&b(I.index)});D.current.add(e)},[i,h,P]),z=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledNextValue(C);if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const I=T.find(({index:A})=>t.index<A)??T[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,T,C,h,n,E,b]),le=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledPrevValue(C);if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const I=T.reverse().find(({index:A})=>A<t.index)??T[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,T,C,h,n,E,b]),B=L||n?w:oe,re=L||n?K:oe,ce=s.useCallback((e,t=!0)=>{const A=i.values().filter(({node:F})=>F.dataset.value===e).map(({node:F,index:Z})=>!(c&&x)||Z!==0?F.textContent??"":void 0);Y(F=>h?(A.forEach(Z=>{H(F)&&F.includes(Z??"")?t&&(F=H(F)?F.filter(Ie=>Ie!==Z):void 0):F=[...H(F)?F:[],Z]}),F):A[0])},[i,h,c,x]),ae=s.useCallback(e=>{G(t=>H(t)?t.includes(e)?t.filter(A=>A!==e):[...t,e]:e),ce(e)},[ce,G]),ke=s.useCallback(e=>{e.stopPropagation(),G([]),Y(void 0)},[Y,G]),[p,ue]=s.useState(l??!1),R=s.useCallback(()=>{var e;f.disabled||f.readOnly||v||W||(ue(!0),(e=o.onOpen)==null||e.call(o))},[f,v,W,o]),_=s.useCallback(()=>{var e;ue(!1),(e=o.onClose)==null||e.call(o)},[o]),ie=s.useCallback(()=>{let e=i.value(C);if("disabled"in((e==null?void 0:e.node.dataset)??{})&&(e=void 0),!e)return;const t=e.node.dataset.value??"";ae(t),r&&_(),n&&z()},[r,i,C,n,ae,_,z]),de=s.useCallback(()=>{p||(R(),B())},[p,B,R]),fe=s.useCallback(()=>{p||(R(),B())},[p,B,R]),pe=s.useCallback(e=>{const t=Te(e);Re(k.current,t)||a&&p&&_()},[a,p,_]),xe=s.useCallback(e=>{if(e.key===" "&&(e.key=e.code),f.disabled||f.readOnly)return;const I={ArrowDown:N?()=>z():p?void 0:te(R,B),ArrowUp:N?()=>le():p?void 0:te(R,re),Space:N?ie:p?void 0:te(R,B),Enter:N?ie:p?void 0:te(R,B),Home:p?w:void 0,End:p?K:void 0,Escape:u?_:void 0}[e.key];I&&(e.preventDefault(),e.stopPropagation(),I())},[f.disabled,f.readOnly,N,p,R,B,re,ie,w,K,u,_,z,le]);Ve({ref:k,handler:_,enabled:a}),s.useEffect(()=>{if(!h||!n&&_e(d))return;const e=P.length>0&&P.length===i.count(),t=P.length===d;e||t?(_(),Q(!0)):Q(!1)},[n,P,i,h,_,d]),Ae(()=>{p||b(-1)},[p]),Ne(()=>{D.current.forEach(e=>clearTimeout(e)),D.current.clear()});const ye=s.useCallback(e=>({...o,...e,isOpen:p,onOpen:R,onClose:_,placement:g,duration:S,trigger:"never",closeOnButton:!1}),[S,_,R,g,o,p]),Se=s.useCallback((e={},t=null)=>({ref:se(k,t),...m[0],...e,...f,onClick:$(e.onClick,o.onClick,de),onFocus:$(e.onFocus,o.onFocus,fe),onBlur:$(e.onBlur,o.onBlur,pe)}),[m,f,pe,de,fe,o]),Pe=s.useCallback((e={},t=null)=>({ref:se(X,t),tabIndex:0,...ve(m[1],["value","defaultValue","onChange"]),...e,"data-active":q(p),"data-placeholder":q(h?!(M!=null&&M.length):M===void 0),"aria-expanded":q(p),onKeyDown:$(e.onKeyDown,o.onKeyDown,xe)}),[m,p,h,M,o,xe]);return{descendants:i,value:P,displayValue:M,focusedIndex:C,placeholder:c,placeholderInOptions:x,omitSelectedValues:n,closeOnSelect:r,isOpen:p,containerRef:k,fieldRef:X,listRef:ne,optionProps:y,formControlProps:f,onChangeDisplayValue:ce,onChange:ae,onClear:ke,onOpen:R,onClose:_,onFocusFirst:w,onFocusLast:K,onFocusSelected:oe,onFocusNext:z,onFocusPrev:le,setFocusedIndex:b,getPopoverProps:ye,getContainerProps:Se,getFieldProps:Pe}},Ze=()=>{const{listRef:l,focusedIndex:c}=j(),a=ge(),u=s.useRef(-1),r=a.value(c);return s.useEffect(()=>{if(!l.current||!r||u.current===r.index)return;const n=l.current,d=r.node,v=n.clientHeight,g=n.scrollTop,S=g+v,y=d.clientHeight,o=d.offsetTop,f=o+y,m=g<=o&&f<=S,i=u.current<r.index;m||(f<=v?l.current.scrollTo({top:0}):i?l.current.scrollTo({top:f-v}):l.current.scrollTo({top:o+1})),u.current=r.index},[l,r]),{getListProps:s.useCallback((n={},d=null)=>({as:"ul",ref:se(l,d),role:"select",tabIndex:-1,...n}),[l])}},$e=({label:l,...c})=>{const{value:a,omitSelectedValues:u}=j(),r=H(a),x=ge(),n=x.values(),v=(r&&u?x.values(({node:m})=>a.includes(m.dataset.value??"")):[]).map(({index:m})=>m),S=!n.filter(({node:m,index:i})=>{var C;return((C=m.parentElement)==null?void 0:C.dataset.label)===l&&!v.includes(i)}).length,y=be(c,he),o=s.useCallback((m={},i=null)=>{const C={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};return{ref:i,...m,...y[0],style:S?C:void 0}},[y,S]),f=s.useCallback((m={},i=null)=>({ref:i,...m,...y[1],"data-label":l}),[y,l]);return{label:l,getContainerProps:o,getGroupProps:f}},qe=(l,c)=>{const{fieldRef:a,value:u,placeholder:r,placeholderInOptions:x,omitSelectedValues:n,closeOnSelect:d,focusedIndex:v,optionProps:g,onChange:S,onChangeDisplayValue:y,onFocusNext:o,onClose:f,setFocusedIndex:m}=j();let{icon:i,isDisabled:C,isFocusable:b,closeOnSelect:W,children:Q,...k}={...g,...c};const X=!!C&&!b,ne=s.useRef(null),{index:D,register:P,descendants:G}=ze({disabled:X}),Y=G.values().slice(0,D),N=H(u),L=!(N?!1:Y.some(({node:w})=>w.dataset.value===(k.value??"")))&&(N?u.includes(k.value??""):(k.value??"")===u),ee=D===v;r&&D>0&&x&&!k.value&&console.warn(`${N?"MultiSelect":"Select"}: If placeholders are present, All options must be set value. If want to set an empty value, either don't set the placeholder or set 'placeholderInOptions' to false.`);const E=s.useCallback(w=>{if(w.preventDefault(),w.stopPropagation(),C){a.current&&a.current.focus();return}if(!We(w.currentTarget)){a.current&&a.current.focus();return}m(D),S(k.value??""),a.current&&a.current.focus(),(W??d)&&f(),n&&o()},[C,m,D,S,k.value,a,W,d,f,n,o]);s.useEffect(()=>{L&&y(k.value??"",!1)},[k,L,y]);const T=s.useCallback((w={})=>{const K={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};return{ref:se(ne,l,P),...ve(k,["value"]),...w,role:"select-item",tabIndex:-1,style:n&&L?K:void 0,"data-value":k.value??"","data-focus":q(ee),"data-disabled":q(C),"aria-checked":Ce(L),"aria-disabled":Ce(C),onClick:$(k.onClick,w.onClick,E)}},[k,C,ee,L,n,E,l,P]);return{isSelected:L,isFocused:ee,customIcon:i,children:Q,getOptionProps:T}},Je=J(({className:l,children:c,__css:a,...u},r)=>{const{styles:x}=j(),n={position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",cursor:"pointer",...x.icon,...a},v=je(c).map(g=>s.cloneElement(g,{focusable:!1,"aria-hidden":!0,style:{maxWidth:"1em",maxHeight:"1em",color:"currentColor"}}));return O(U.div,{ref:r,className:V("ui-select-icon",l),__css:n,...u,children:Be(c)?v:O(we,{})})}),Ct=({className:l,children:c,...a})=>{const u=s.useRef(null),{styles:r}=j(),x=a.disabled,n=De({ref:u,isDisabled:x,...a});return O(Je,{className:V("ui-select-clear-icon",l),__css:r.clearIcon,...n,children:c??O(Fe,{w:"0.5em",h:"0.5em"})})},mt=J(({className:l,w:c,width:a,minW:u,minWidth:r,...x},n)=>{var S,y,o,f;const{styles:d}=j(),{getListProps:v}=Ze();c=c??a??((S=d.list)==null?void 0:S.w)??((y=d.list)==null?void 0:y.width),u=u??r??((o=d.list)==null?void 0:o.minW)??((f=d.list)==null?void 0:f.minWidth);const g={...d.list};return O(Me,{className:V("ui-select-list",l),w:c,minW:u,__css:g,...v(x,n)})}),bt=J(({className:l,color:c,h:a,height:u,minH:r,minHeight:x,children:n,...d},v)=>{const{styles:g}=j(),{label:S,getContainerProps:y,getGroupProps:o}=$e(d);return a=a??u,r=r??x,me(U.li,{className:"ui-select-group-container",__css:{w:"100%",h:"fit-content",color:c},...y(),children:[O(U.span,{className:V("ui-select-group-label"),__css:g.groupLabel,noOfLines:1,children:S}),O(U.ul,{...o({},v),className:V("ui-select-group",l),__css:{h:a,minH:r,...g.group},children:n})]})}),ht=J(({className:l,icon:c,...a},u)=>{const{styles:r}=j(),{isSelected:x,customIcon:n,children:d,getOptionProps:v}=qe(u,a);c=c??n;const g={textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,gap:"0.75rem",...r.item};return me(U.li,{className:V("ui-select-item",l),__css:g,...v(),children:[c!==null?O(Qe,{opacity:x?1:0,children:c||O(Xe,{})}):null,c?O(U.span,{style:{pointerEvents:"none",flex:1},noOfLines:1,children:d}):d]})}),Qe=J(({className:l,...c},a)=>{const{styles:u}=j(),r={flexShrink:0,display:"inline-flex",justifyContent:"center",alignItems:"center",fontSize:"0.85em",...u.itemIcon};return O(U.span,{ref:a,className:V("ui-select-item-icon",l),__css:r,...c})}),Xe=()=>O("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",children:O("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})});export{ht as O,ft as S,bt as a,pt as b,Je as c,mt as d,j as e,Ct as f,xt as u};
//# sourceMappingURL=option-31e6b5ed.js.map
