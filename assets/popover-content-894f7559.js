import{r as n}from"./index-1cdf6ce0.js";import{j as M,a as re}from"./jsx-runtime-276775ef.js";import{b as ie}from"./index-f9b9ec21.js";import{u as ce,a as ue}from"./index-019577cf.js";import{u as ae,a as le,b as fe}from"./index-afc7c4b2.js";import{u as me}from"./index-15858c24.js";import{o as de,m as q,i as S}from"./theme-ead977c1.js";import{o as pe,w as V,v as c,x as ve,e as Q,s as ge,t as Pe,y as he,d as G,I as Ce}from"./factory-54465b8b.js";import{a as ye}from"./use-component-style-645da9e2.js";import{m as be}from"./motion-1ef152f4.js";import{C as Re}from"./close-button-cb99a846.js";import{f as W}from"./forward-ref-86842115.js";import{s as D}from"./slide-fade-aae6178f.js";import{s as Te}from"./scale-fade-cb55d8f5.js";const[xe,X]=pe({strict:!1,name:"PopoverContext"}),Xe=u=>{const[r,t]=ye("Popover",u),{children:m,initialFocusRef:d,restoreFocus:p=!0,autoFocus:h=!0,closeOnBlur:f=!0,closeOnEsc:x=!0,closeOnButton:B=!0,trigger:a="click",openDelay:C=200,closeDelay:g=200,isLazy:A,lazyBehavior:L="unmount",animation:I="scale",duration:w,...j}=de(t),{isOpen:e,onOpen:y,onClose:s,onToggle:O}=ce(t),b=n.useRef(null),k=n.useRef(null),P=n.useRef(null),{present:Z,onAnimationComplete:$}=ie({isOpen:e,ref:P}),v=n.useRef(void 0),z=n.useRef(void 0),R=n.useRef(!1),Y=n.useRef(!1);e&&(Y.current=!0);const{referenceRef:E,getPopperProps:ee,forceUpdate:_,transformOrigin:N}=me({...j,enabled:e});n.useEffect(()=>()=>{v.current&&clearTimeout(v.current),z.current&&clearTimeout(z.current)},[]),ae({enabled:e,ref:k}),le(P,{focusRef:k,visible:e,shouldFocus:p&&a==="click"}),fe(P,{focusRef:d,visible:e,shouldFocus:h&&a==="click"});const H=ue({wasSelected:Y.current,enabled:A,mode:L,isSelected:Z}),oe=n.useCallback((o={},T=null)=>{const i={...o,style:{...o.style,transformOrigin:N},ref:V(P,T),children:H?o.children:null,tabIndex:-1,onKeyDown:c(o.onKeyDown,l=>{x&&l.key==="Escape"&&s()}),onBlur:c(o.onBlur,l=>{const F=q(l),K=S(P.current,F),se=S(k.current,F);e&&f&&(!K&&!se)&&s()})};return a==="hover"&&(i.onMouseEnter=c(o.onMouseEnter,()=>{R.current=!0}),i.onMouseLeave=c(o.onMouseLeave,l=>{l.nativeEvent.relatedTarget!==null&&(R.current=!1,setTimeout(s,g))})),i},[g,f,x,e,s,H,N,a]),U=n.useCallback(o=>{b.current==null&&E(o)},[E]),te=n.useCallback((o={},T=null)=>{const i={...o,ref:V(k,T,U)};return a==="click"&&(i.onClick=c(o.onClick,O)),a==="hover"&&(i.onFocus=c(o.onFocus,()=>{v.current===void 0&&y()}),i.onBlur=c(o.onBlur,l=>{const F=q(l),K=!S(P.current,F);e&&f&&K&&s()}),i.onKeyDown=c(o.onKeyDown,l=>{l.key==="Escape"&&s()}),i.onMouseEnter=c(o.onMouseEnter,()=>{R.current=!0,v.current=window.setTimeout(y,C)}),i.onMouseLeave=c(o.onMouseLeave,()=>{R.current=!1,v.current&&(clearTimeout(v.current),v.current=void 0),z.current=window.setTimeout(()=>{R.current===!1&&s()},g)})),i},[g,f,e,U,s,y,O,C,a]),ne=n.useCallback((o={},T=null)=>({...o,ref:V(T,b,E)}),[b,E]);return M(xe,{value:{isOpen:e,onClose:s,closeOnButton:B,onAnimationComplete:$,forceUpdate:_,getTriggerProps:te,getAnchorProps:ne,getPopperProps:ee,getPopoverProps:oe,animation:I,duration:w,styles:r},children:ve(m,{isOpen:e,onClose:s,forceUpdate:_})})},Ye=({children:u})=>{const r=n.Children.only(u),{getTriggerProps:t}=X();return n.cloneElement(r,t(r.props,r.ref))},J=W(({onClick:u,...r},t)=>{const{styles:m,onClose:d}=X(),p={position:"absolute",...m.closeButton};return M(Re,{ref:t,className:Q("ui-popover-close-button"),__css:p,onClick:c(u,h=>{h.stopPropagation(),d==null||d()}),size:"sm",...r})}),Be=(u="scale",r)=>{const t={reverse:!0,duration:r,enter:{visibility:"visible"},transitionEnd:{exit:{visibility:"hidden"}}};switch(u){case"scale":return{...Te,custom:{...t,scale:.95}};case"top":return{...D,custom:{...t,offsetX:0,offsetY:-16}};case"right":return{...D,custom:{...t,offsetX:16,offsetY:0}};case"left":return{...D,custom:{...t,offsetX:-16,offsetY:0}};case"bottom":return{...D,custom:{...t,offsetX:0,offsetY:16}}}},_e=W(({as:u="section",className:r,children:t,w:m,width:d,minW:p,minWidth:h,zIndex:f,__css:x,...B},a)=>{const{isOpen:C,closeOnButton:g,getPopperProps:A,getPopoverProps:L,onAnimationComplete:I,animation:w,duration:j,styles:e}=X(),y=ge(t),[s,...O]=Pe(y,J),b={position:"relative",w:"100%",display:"flex",flexDirection:"column",outline:0,...he(x??e.container,["zIndex"])};return m=m??d??e.container.w??e.container.width,p=p??h??e.container.minW??e.container.minWidth,f=f??e.container.zIndex,M(G.div,{...A({style:{visibility:C?"visible":"hidden"}}),className:"ui-popover",w:m,minW:p,zIndex:f,children:re(G.section,{as:be[u],className:Q("ui-popover-content",r),...w!=="none"?Be(w,j):{},...L(B,a),initial:"exit",animate:C?"enter":"exit",exit:"exit",onAnimationComplete:Ce(I,B.onAnimationComplete),__css:b,children:[s??(g?M(J,{}):null),O]})})});export{Xe as P,Ye as a,_e as b,J as c,X as u};
//# sourceMappingURL=popover-content-894f7559.js.map
