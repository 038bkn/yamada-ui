{"version":3,"file":"index-bd8d7283.js","sources":["../../packages/hooks/use-breakpoint/src/index.ts"],"sourcesContent":["import type { Theme, ResponsiveObject } from \"@yamada-ui/core\"\nimport { useTheme } from \"@yamada-ui/core\"\nimport { createdDom } from \"@yamada-ui/utils\"\nimport { useState, useMemo, useEffect } from \"react\"\n\nexport const useBreakpoint = () => {\n  const { theme } = useTheme()\n\n  if (!theme)\n    throw Error(\n      \"useBreakpoint: `theme` is undefined. Seems you forgot to wrap your app in `<UIProvider />`\",\n    )\n\n  const breakpoints = theme.__breakpoints\n\n  if (!breakpoints)\n    throw Error(\n      \"useBreakpoint: `breakpoints` is undefined. Seems you forgot to put theme in `breakpoints`\",\n    )\n\n  const queries = useMemo(\n    () =>\n      breakpoints.queries.map(({ breakpoint, minMaxQuery }) => ({\n        breakpoint,\n        query: minMaxQuery?.replace(\"@media screen and \", \"\") ?? \"\",\n      })),\n    [breakpoints],\n  )\n\n  const [breakpoint, setBreakpoint] = useState(() => {\n    const isBrowser = createdDom()\n\n    if (!isBrowser) return \"base\"\n\n    for (const { breakpoint, query } of queries) {\n      const mql = window.matchMedia(query)\n\n      if (mql.matches) return breakpoint\n    }\n  })\n\n  useEffect(() => {\n    const observer = queries.map(({ breakpoint, query }): (() => void) => {\n      const mql = window.matchMedia(query)\n\n      const onChange = (e: MediaQueryListEvent) => {\n        if (e.matches) setBreakpoint(breakpoint)\n      }\n\n      if (typeof mql.addEventListener === \"function\")\n        mql.addEventListener(\"change\", onChange)\n\n      return () => {\n        if (typeof mql.removeEventListener === \"function\")\n          mql.removeEventListener(\"change\", onChange)\n      }\n    })\n\n    return () => {\n      observer.forEach((unobserve) => unobserve())\n    }\n  }, [queries])\n\n  return breakpoint as Theme[\"breakpoints\"]\n}\n\nexport const useBreakpointValue = <T extends any>(\n  values: ResponsiveObject<T>,\n): T => {\n  const { theme } = useTheme()\n\n  if (!theme)\n    throw Error(\n      \"useBreakpoint: `theme` is undefined. Seems you forgot to wrap your app in `<UIProvider />`\",\n    )\n\n  const breakpoints = theme.__breakpoints?.keys\n\n  if (!breakpoints)\n    throw Error(\n      \"useBreakpoint: `breakpoints` is undefined. Seems you forgot to put theme in `breakpoints`\",\n    )\n\n  const breakpoint = useBreakpoint()\n\n  const computedBreakpoint = breakpoints.reduce((prev, current) => {\n    if (prev === breakpoint || current === breakpoint) {\n      if (\n        prev === \"base\" ||\n        (!values.hasOwnProperty(prev) && values.hasOwnProperty(current))\n      ) {\n        return current\n      } else {\n        return prev\n      }\n    } else {\n      return prev\n    }\n  }, \"base\")\n\n  return values[computedBreakpoint] as T\n}\n"],"names":["useBreakpoint","theme","useTheme","breakpoints","queries","useMemo","breakpoint","minMaxQuery","setBreakpoint","useState","createdDom","query","useEffect","observer","mql","onChange","e","unobserve","useBreakpointValue","values","_a","computedBreakpoint","prev","current"],"mappings":"mIAKO,MAAMA,EAAgB,IAAM,CAC3B,KAAA,CAAE,MAAAC,GAAUC,IAElB,GAAI,CAACD,EACG,MAAA,MACJ,4FAAA,EAGJ,MAAME,EAAcF,EAAM,cAE1B,GAAI,CAACE,EACG,MAAA,MACJ,2FAAA,EAGJ,MAAMC,EAAUC,EAAA,QACd,IACEF,EAAY,QAAQ,IAAI,CAAC,CAAE,WAAAG,EAAY,YAAAC,MAAmB,CACxD,WAAAD,EACA,OAAOC,GAAA,YAAAA,EAAa,QAAQ,qBAAsB,MAAO,EAAA,EACzD,EACJ,CAACJ,CAAW,CAAA,EAGR,CAACG,EAAYE,CAAa,EAAIC,WAAS,IAAM,CAGjD,GAAI,CAFcC,IAEK,MAAA,OAEvB,SAAW,CAAE,WAAAJ,EAAY,MAAAK,CAAA,IAAWP,EAGlC,GAFY,OAAO,WAAWO,CAAK,EAE3B,QAAgBL,OAAAA,CAC1B,CACD,EAEDM,OAAAA,EAAAA,UAAU,IAAM,CACR,MAAAC,EAAWT,EAAQ,IAAI,CAAC,CAAE,WAAAE,EAAY,MAAAK,KAA0B,CAC9D,MAAAG,EAAM,OAAO,WAAWH,CAAK,EAE7BI,EAAYC,GAA2B,CACvCA,EAAE,SAASR,EAAcF,CAAU,CAAA,EAGrC,OAAA,OAAOQ,EAAI,kBAAqB,YAC9BA,EAAA,iBAAiB,SAAUC,CAAQ,EAElC,IAAM,CACP,OAAOD,EAAI,qBAAwB,YACjCA,EAAA,oBAAoB,SAAUC,CAAQ,CAAA,CAC9C,CACD,EAED,MAAO,IAAM,CACXF,EAAS,QAASI,GAAcA,EAAW,CAAA,CAAA,CAC7C,EACC,CAACb,CAAO,CAAC,EAELE,CACT,EAEaY,EACXC,GACM,OACA,KAAA,CAAE,MAAAlB,GAAUC,IAElB,GAAI,CAACD,EACG,MAAA,MACJ,4FAAA,EAGE,MAAAE,GAAciB,EAAAnB,EAAM,gBAAN,YAAAmB,EAAqB,KAEzC,GAAI,CAACjB,EACG,MAAA,MACJ,2FAAA,EAGJ,MAAMG,EAAaN,IAEbqB,EAAqBlB,EAAY,OAAO,CAACmB,EAAMC,KAC/CD,IAAShB,GAAciB,IAAYjB,KAEnCgB,IAAS,QACR,CAACH,EAAO,eAAeG,CAAI,GAAKH,EAAO,eAAeI,CAAO,GAEvDA,EAKFD,EAER,MAAM,EAET,OAAOH,EAAOE,CAAkB,CAClC"}