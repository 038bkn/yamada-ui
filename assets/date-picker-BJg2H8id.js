import{j as a}from"./jsx-runtime-X2b_N9AH.js";import{u as Le}from"./index-Bjd5vJC-.js";import{r as n}from"./index-uCp2LrAq.js";import{d as ee,i as Ie,a as we,b as Ue,C as Qe}from"./ja-lK6QMALp.js";import{u as $e}from"./index-Bom1pCxl.js";import{u as qe}from"./index-CFNUJ1Et.js";import{u as Ge}from"./index-D-IUPrlH.js";import{u as Je,f as Xe}from"./form-control-CSf3cMiq.js";import{p as Ze,P as et,b as tt,a as ot}from"./popover-content-BM7mCRUg.js";import{u as nt,o as at}from"./theme-provider-DuMcMORV.js";import{S as st,$ as rt,a0 as lt,Q as it,aa as ct,T as ut,a as te,h as A,d as Ve,l as pt,f as dt,ab as ft,b as W,c as L,t as mt,j as Ct}from"./factory-C0k1XOS4.js";import{P as Pt}from"./container-portal-BTcKXCIS.js";import{b as ht,a as gt}from"./icon-DcmOu1fx.js";import{f as oe}from"./forward-ref-Dr5Hqd9a.js";import{a as kt}from"./use-component-style-BxdeC6kK.js";const bt=m=>{var Oe;const{theme:i}=nt();let{id:c,closeOnBlur:p=!0,closeOnEsc:C=!0,placement:d="bottom-start",duration:r=.2,enableMultiple:f,enableRange:g,value:P,defaultValue:j,onChange:R,type:O,defaultType:x,onChangeType:T,month:D,defaultMonth:S,onChangeMonth:B,firstDayOfWeek:N,amountOfMonths:M,paginateBy:H,withWeekdays:z,disableOutsideDays:I,hiddenOutsideDays:k,minDate:u,maxDate:h,locale:t,yearFormat:l,monthFormat:w,weekdayFormat:ae,dateFormat:se,weekendDays:re,today:le,excludeDate:b,calendarVariant:ie,calendarSize:ce,calendarColorScheme:ue,holidays:pe,withHeader:de,withControls:fe,withLabel:me,maxSelectValues:Ce,__selectType:Pe,calendarProps:he,allowInput:y=!0,allowInputBeyond:U=!1,parseDate:Q,pattern:Ee=/[^0-9\-\/]/g,inputFormat:$="YYYY/MM/DD",autoFocus:Y=!0,isOpen:Re,defaultIsOpen:Se,onOpen:Te,onClose:Be,onClear:q,onEnter:ge,onDelete:ke,...v}=Je(m);t??(t=((Oe=i.__config.date)==null?void 0:Oe.locale)??"en");const{"aria-readonly":jt,...V}=st(v,Xe),[be,Ne]=rt(it(v,Ze),lt),{disabled:G,readOnly:J}=V,{isOpen:s,onOpen:ye,onClose:F}=qe({isOpen:Re,defaultIsOpen:Se,onOpen:Te,onClose:Be}),X=n.useRef(null),K=n.useRef(null),Me=n.useCallback(e=>{let o=(Q==null?void 0:Q(e))??ee(e,$,t).toDate();if(o!=null&&!(b!=null&&b(o)))return U||(h&&Ie(o,h)&&(o=h),u&&we(o,u)&&(o=u)),o},[U,b,$,t,h,u,Q]),He=n.useCallback(e=>{if(e!=null&&!(b!=null&&b(e)))return U||(h&&Ie(e,h)&&(e=h),u&&we(e,u)&&(e=u)),ee(e).locale(t??"en").format($)},[U,b,$,t,h,u]),_=n.useCallback(()=>{var e;G||J||(ye(),Y&&y&&((e=K.current)==null||e.focus()))},[Y,y,G,J,ye]),ve=n.useCallback(()=>{var e;s?Y&&y&&((e=K.current)==null||e.focus()):_()},[Y,y,s,_]),_e=n.useCallback(()=>{s||_()},[s,_]),xe=n.useCallback(e=>{const o=ct(e);ut(X.current,o)||p&&s&&F()},[p,s,F]),De=n.useCallback(e=>{if(e.key===" "&&(e.key=e.code),G||J)return;const Z={Space:s?void 0:E=>{E.preventDefault(),E.stopPropagation(),_()},Enter:s?ge:E=>{E.preventDefault(),E.stopPropagation(),_()},Escape:C?E=>{E.preventDefault(),E.stopPropagation(),F()}:void 0,Backspace:ke}[e.key];Z&&Z(e)},[C,G,J,s,F,ge,ke,_]),je=n.useCallback(e=>{var o;e.stopPropagation(),q==null||q(),Y&&y&&s&&((o=K.current)==null||o.focus())},[Y,y,s,q]);Ge({ref:X,handler:F,enabled:s&&p});const ze=n.useCallback((e={},o=null)=>({ref:te(X,o),...be,...e,...V,onClick:A(e.onClick,v.onClick,ve),onBlur:A(e.onBlur,v.onBlur,xe)}),[be,V,xe,ve,v]),Ye=n.useCallback(e=>({...v,...e,isOpen:s,onOpen:_,onClose:F,placement:d,duration:r,trigger:"never",closeOnButton:!1,closeOnBlur:!1}),[r,s,F,_,d,v]),Ae=n.useCallback((e={},o=null)=>{const Z={...e.style,...y?{}:{cursor:"pointer"}};return{ref:te(K,o),tabIndex:y?-1:0,...e,...V,style:Z,"data-active":Ve(s),"aria-expanded":Ve(s),onFocus:A(e.onFocus,v.onFocus,_e),onKeyDown:A(e.onKeyDown,v.onKeyDown,De)}},[y,V,s,v,_e,De]),Ke=n.useCallback(e=>({...e,type:O,defaultType:x,onChangeType:T,month:D,defaultMonth:S,onChangeMonth:B,firstDayOfWeek:N,amountOfMonths:M,paginateBy:H,withWeekdays:z,disableOutsideDays:I,hiddenOutsideDays:k,yearFormat:l,monthFormat:w,weekdayFormat:ae,dateFormat:se,weekendDays:re,today:le,holidays:pe,withHeader:de,withControls:fe,withLabel:me,maxSelectValues:Ce,variant:ie,size:ce,colorScheme:ue,...he,value:P,defaultValue:j,onChange:R,minDate:u,maxDate:h,excludeDate:b,locale:t,__selectType:Pe,enableMultiple:f,enableRange:g}),[k,Ce,f,g,M,ue,he,ce,ie,se,S,x,j,I,b,N,pe,t,h,u,D,w,R,B,T,H,le,O,P,ae,re,fe,de,me,z,l,Pe]),We=n.useCallback(({clear:e,...o})=>({...o,...V,onClick:A(o.onClick,e?je:void 0)}),[V,je]);return{id:c,allowInput:y,pattern:Ee,inputProps:Ne,formControlProps:V,containerRef:X,inputRef:K,isOpen:s,onOpen:_,onClose:F,dateToString:He,stringToDate:Me,getContainerProps:ze,getPopoverProps:Ye,getFieldProps:Ae,getCalendarProps:Ke,getIconProps:We}},[yt,ne]=pt({strict:!1,name:"DatePickerContext"}),vt=({value:m,defaultValue:i,onChange:c,placeholder:p,closeOnSelect:C=!0,...d})=>{const[r,f]=$e({value:m,defaultValue:i,onChange:c,onUpdate:(t,l)=>!Ue(t,l)}),{inputRef:g,id:P,allowInput:j,pattern:R,inputProps:O,formControlProps:x,onClose:T,dateToString:D,stringToDate:S,getContainerProps:B,getPopoverProps:N,getFieldProps:M,getCalendarProps:H,getIconProps:z}=bt({...d,value:r,defaultValue:i,onChange:t=>{const l=D(t);f(t),k(l),C&&t&&T()},onClear:()=>{f(void 0),k(void 0)},onClose:()=>{var l;const t=D(r);k(t),(l=d.onClose)==null||l.call(d)}}),[I,k]=n.useState(D(r)),u=n.useCallback(t=>{let l=t.target.value;l=l.replace(R,"");const w=S(l);k(l),w&&ee(w).isValid()?f(w):f(void 0)},[R,S,k,f]);dt(()=>{if(g.current&&ft(g.current))return;const t=D(r);k(t)},[r]);const h=n.useCallback((t={},l=null)=>{const w={...t.style,...O.style,...j?{}:{pointerEvents:"none"}};return{placeholder:p,...x,autoComplete:"off",...O,...t,ref:l,style:w,id:P,tabIndex:j?0:-1,value:I??"",cursor:x.readOnly?"default":"text",pointerEvents:x.disabled?"none":"auto",onChange:A(t.onChange,u)}},[O,j,p,x,P,I,u]);return{value:r,getContainerProps:B,getPopoverProps:N,getFieldProps:M,getInputProps:h,getIconProps:z,getCalendarProps:H}},At=oe((m,i)=>{const[c,p]=kt("DatePicker",m);let{className:C,isClearable:d=!0,color:r,h:f,height:g,minH:P,minHeight:j,containerProps:R,inputProps:O,iconProps:x,clearIconProps:T,portalProps:D={isDisabled:!0},...S}=at(p);const{getPopoverProps:B,getContainerProps:N,getCalendarProps:M,getFieldProps:H,getInputProps:z,getIconProps:I,value:k}=vt(S);f??(f=g),P??(P=j);const u={w:"100%",h:"fit-content",color:r,...c.container};return a.jsx(yt,{value:c,children:a.jsx(et,{...B(),children:a.jsxs(W.div,{className:L("ui-date-picker",C),__css:u,...N(R),children:[a.jsxs(W.div,{className:"ui-date-picker__inner",__css:{position:"relative",...c.inner},children:[a.jsx(_t,{...H({h:f,minH:P},i),inputProps:z(O)}),d&&k?a.jsx(Dt,{...I({clear:!0,...T})}):a.jsx(Fe,{...I({clear:!1,...x})})]}),a.jsx(Pt,{...D,children:a.jsx(tt,{className:"ui-date-picker__popover",__css:{...c.list},children:a.jsx(Qe,{className:"ui-date-picker__calendar",...M()})})})]})})})}),_t=oe(({className:m,h:i,minH:c,inputProps:p,...C},d)=>{const r=ne(),{ref:f,...g}=p,P={pe:"2rem",h:i,minH:c,display:"flex",alignItems:"center",...r.field};return a.jsx(ot,{children:a.jsx(W.div,{className:L("ui-date-picker__field",m),__css:P,...C,children:a.jsx(W.input,{"aria-label":"Input date value",ref:te(d,f),className:"ui-date-picker__field__input",display:"inline-block",w:"100%",...g})})})}),Fe=oe(({className:m,children:i,__css:c,...p},C)=>{const r={position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",cursor:"pointer",...ne().icon,...c},g=mt(i).map(P=>n.cloneElement(P,{focusable:!1,"aria-hidden":!0,style:{maxWidth:"1em",maxHeight:"1em",color:"currentColor"}}));return a.jsx(W.div,{ref:C,className:L("ui-date-picker__icon",m),__css:r,...p,children:Ct(i)?g:a.jsx(xt,{})})}),xt=({className:m,...i})=>a.jsx(ht,{className:L("ui-date-picker__icon__calendar",m),viewBox:"0 0 24 24",...i,children:a.jsx("path",{fill:"currentColor",d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),Dt=({className:m,children:i,...c})=>{const p=n.useRef(null),C=ne(),d=c.disabled,r=Le({ref:p,isDisabled:d,...c});return a.jsx(Fe,{"aria-label":"Clear value",className:L("ui-date-picker__icon--clear",m),__css:C.clearIcon,...r,children:i??a.jsx(gt,{w:"0.5em",h:"0.5em"})})};export{At as D,yt as a,_t as b,Dt as c,Fe as d,ne as e,bt as u};
