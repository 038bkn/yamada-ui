import{j as m}from"./jsx-runtime-Nms4Y4qS.js";import{r as v}from"./index-BwDkhjyp.js";import{A as D,a as S,b as C,c as I}from"./alert-B63btnMF.js";import{C as R}from"./close-button-ERbTtWXY.js";import{u as E}from"./theme-provider-woLZZCt0.js";import{m as h,c as k,b as w}from"./factory-CEsHZeW8.js";const B=(c,n)=>c.find(l=>l.id===n),g=(c,n)=>{const l=N(c,n),s=l?c[l].findIndex(e=>e.id===n):-1;return{placement:l,index:s}},N=(c,n)=>{for(const[l,s]of Object.entries(c))if(B(s,n))return l};let b=0;const O=(c,{id:n,placement:l="top",duration:s,onCloseComplete:e,status:o,style:t})=>(b+=1,n??(n=b),{id:n,placement:l,status:o,duration:s,message:c,onDelete:()=>d.remove(String(n),l),isDelete:!1,onCloseComplete:e,style:t}),A=c=>{const{component:n}=c;return s=>typeof n=="function"?n({...s,...c}):m.jsx(F,{...s,...c})},T=(c,n)=>{var o;const l=((o=n.__config.notice)==null?void 0:o.options)??{},s=t=>h(l,h(c,t)),e=(t={})=>{t=s(t);const r=A(t);return d.create(r,t)};return e.update=(t,r)=>{r=s(r),d.update(t,r)},e.closeAll=d.closeAll,e.close=d.close,e.isActive=d.isActive,e},L=c=>{const{theme:n}=E();return v.useMemo(()=>T(c??{},n),[c,n])},y={top:[],"top-left":[],"top-right":[],bottom:[],"bottom-left":[],"bottom-right":[]},z=c=>{let n=c;const l=new Set,s=e=>{n=e(n),l.forEach(o=>o())};return{getSnapshot:()=>n,subscribe:e=>(l.add(e),()=>{s(()=>c),l.delete(e)}),remove:(e,o)=>{s(t=>({...t,[o]:t[o].filter(r=>r.id!=e)}))},create:(e,o)=>{const t=o.limit,r=O(e,o),{placement:i,id:u}=r;return s(f=>{let a=f[i]??[];if(t!==void 0&&t>0&&a.length>t-1){const x=a.length-(t-1),_=(i.includes("top")?a.slice(x*-1):a.slice(0,x)).map(({id:p})=>p);a=a.map(p=>_.includes(p.id)?{...p,isDelete:!0}:p)}const j=i.includes("top")?[r,...a]:[...a,r];return{...f,[i]:j}}),u},update:(e,o)=>{s(t=>{const r={...t},{placement:i,index:u}=g(r,e);return i&&u!==-1&&(r[i][u]={...r[i][u],...o,message:A(o)}),r})},closeAll:({placement:e}={})=>{s(o=>{let t=["bottom","bottom-right","bottom-left","top","top-left","top-right"];return e&&(t=e),t.reduce((r,i)=>(r[i]=o[i].map(u=>({...u,isDelete:!0})),r),{...o})})},close:e=>{s(o=>{const t=N(o,e);return t?{...o,[t]:o[t].map(r=>r.id==e?{...r,isDelete:!0}:r)}:o})},isActive:e=>!!g(d.getSnapshot(),e).placement}},d=z(y),F=({variant:c="basic",colorScheme:n,status:l,icon:s,title:e,description:o,isClosable:t,className:r,onClose:i})=>m.jsxs(D,{status:l,variant:c,colorScheme:n,alignItems:"start",boxShadow:"fallback(lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05))",className:k("ui-notice",r),pe:t?8:void 0,children:[m.jsx(S,{variant:s==null?void 0:s.variant,className:"ui-notice__icon",...s!=null&&s.color?{color:s.color}:{},children:s==null?void 0:s.children}),m.jsxs(w.div,{flex:"1",children:[e?m.jsx(C,{className:"ui-notice__title",lineClamp:1,children:e}):null,o?m.jsx(I,{className:"ui-notice__desc",lineClamp:3,children:o}):null]}),t?m.jsx(R,{className:"ui-notice__close-button",size:"sm",onClick:i,position:"absolute",top:2,right:2}):null]});export{d as n,L as u};
