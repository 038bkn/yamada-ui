{"version":3,"file":"use-media-query.stories-0d26a6dc.js","sources":["../../packages/hooks/use-media-query/src/index.ts"],"sourcesContent":["import { useEnvironment } from '@yamada-ui/providers'\nimport { isArray, isFunction } from '@yamada-ui/utils'\nimport { useEffect, useState } from 'react'\n\nexport type UseMediaQueryOptions = {\n  fallback?: boolean | boolean[]\n  ssr?: boolean\n}\n\nexport const useMediaQuery = (\n  query: string | string[],\n  { ssr = true, fallback }: UseMediaQueryOptions = {},\n): boolean[] => {\n  const { getWindow } = useEnvironment()\n\n  const queries = isArray(query) ? query : [query]\n\n  let fallbackValues = isArray(fallback) ? fallback : [fallback]\n\n  fallbackValues = fallbackValues.filter((value) => value != null) as boolean[]\n\n  const [value, setValue] = useState(() => {\n    return queries.map((media, index) => ({\n      media,\n      matches: ssr\n        ? !!fallbackValues[index]\n        : getWindow().matchMedia(media).matches,\n    }))\n  })\n\n  useEffect(() => {\n    const win = getWindow()\n\n    setValue(\n      queries.map((media) => ({\n        media,\n        matches: win.matchMedia(media).matches,\n      })),\n    )\n\n    const mql = queries.map((query) => win.matchMedia(query))\n\n    const handler = (evt: MediaQueryListEvent) => {\n      setValue((prev) =>\n        prev.slice().map((item) => {\n          if (item.media === evt.media) return { ...item, matches: evt.matches }\n\n          return item\n        }),\n      )\n    }\n\n    mql.forEach((mql) => {\n      if (isFunction(mql.addListener)) {\n        mql.addListener(handler)\n      } else {\n        mql.addEventListener('change', handler)\n      }\n    })\n\n    return () => {\n      mql.forEach((mql) => {\n        if (isFunction(mql.removeListener)) {\n          mql.removeListener(handler)\n        } else {\n          mql.removeEventListener('change', handler)\n        }\n      })\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getWindow])\n\n  return value.map((item) => item.matches)\n}\n"],"names":["useMediaQuery","query","ssr","fallback","getWindow","useEnvironment","queries","isArray","fallbackValues","value","setValue","useState","media","index","useEffect","win","mql","handler","evt","prev","item","isFunction"],"mappings":"yaASa,MAAAA,EAAgB,CAC3BC,EACA,CAAE,IAAAC,EAAM,GAAM,SAAAC,CAAmC,EAAA,KACnC,CACR,KAAA,CAAE,UAAAC,GAAcC,IAEhBC,EAAUC,EAAQN,CAAK,EAAIA,EAAQ,CAACA,CAAK,EAE/C,IAAIO,EAAiBD,EAAQJ,CAAQ,EAAIA,EAAW,CAACA,CAAQ,EAE7DK,EAAiBA,EAAe,OAAQC,GAAUA,GAAS,IAAI,EAE/D,KAAM,CAACA,EAAOC,CAAQ,EAAIC,WAAS,IAC1BL,EAAQ,IAAI,CAACM,EAAOC,KAAW,CACpC,MAAAD,EACA,QAASV,EACL,CAAC,CAACM,EAAeK,CAAK,EACtBT,IAAY,WAAWQ,CAAK,EAAE,OAClC,EAAA,CACH,EAEDE,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAMX,IAEZM,EACEJ,EAAQ,IAAKM,IAAW,CACtB,MAAAA,EACA,QAASG,EAAI,WAAWH,CAAK,EAAE,OAAA,EAC/B,CAAA,EAGE,MAAAI,EAAMV,EAAQ,IAAKL,GAAUc,EAAI,WAAWd,CAAK,CAAC,EAElDgB,EAAWC,GAA6B,CAC5CR,EAAUS,GACRA,EAAK,MAAQ,EAAA,IAAKC,GACZA,EAAK,QAAUF,EAAI,MAAc,CAAE,GAAGE,EAAM,QAASF,EAAI,OAAQ,EAE9DE,CACR,CAAA,CACH,EAGE,OAAAJ,EAAA,QAASA,GAAQ,CACfK,EAAWL,EAAI,WAAW,EAC5BA,EAAI,YAAYC,CAAO,EAEvBD,EAAI,iBAAiB,SAAUC,CAAO,CACxC,CACD,EAEM,IAAM,CACPD,EAAA,QAASA,GAAQ,CACfK,EAAWL,EAAI,cAAc,EAC/BA,EAAI,eAAeC,CAAO,EAE1BD,EAAI,oBAAoB,SAAUC,CAAO,CAC3C,CACD,CAAA,CACH,EAEC,CAACb,CAAS,CAAC,EAEPK,EAAM,IAAKW,GAASA,EAAK,OAAO,CACzC;;;;;;;;;"}