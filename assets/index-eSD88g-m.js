import{r as O}from"./index-BwDkhjyp.js";import{l as _,D as b,u as g,a as S,E as M}from"./factory-CEsHZeW8.js";const v=t=>t.sort((d,c)=>{const r=d.compareDocumentPosition(c);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0}),V=(t,d,c)=>{let r=t+1;return c&&r>=d&&(r=0),r},m=(t,d,c)=>{let r=t-1;return c&&r<0&&(r=d),r},y=()=>{const t=new Map,d=e=>{t.forEach(n=>{const s=e.indexOf(n.node);n.index=s,n.node.dataset.index=n.index.toString()})},c=(e,n)=>{if(!e||t.has(e))return;const s=Array.from(t.keys()).concat(e),a=v(s);n!=null&&n.disabled&&(n.disabled=!!n.disabled);const N={node:e,index:-1,...n};t.set(e,N),d(a)},r=e=>{if(e!=null)return M(e)?c(e):n=>c(n,e)},u=e=>{t.delete(e);const n=v(Array.from(t.keys()));d(n)},D=()=>t.clear(),o=e=>f(e).length,I=e=>x(e).length,T=e=>{var n;return e?((n=t.get(e))==null?void 0:n.index)??-1:-1},C=(e,n)=>e==null?-1:x(n).findIndex(s=>s.node.isSameNode(e)),f=e=>{const n=Array.from(t.values());return e?n.filter(e).sort((s,a)=>s.index-a.index):n.sort((s,a)=>s.index-a.index)},x=e=>f(e).filter(({disabled:n})=>!n),l=(e,n)=>{if(o(n)!==0)return f(n)[e]},i=(e,n)=>{if(I(n)!==0)return x(n)[e]};return{register:r,unregister:u,destroy:D,count:o,values:f,value:l,indexOf:T,firstValue:e=>l(0,e),lastValue:e=>l(t.size-1,e),prevValue:(e,n,s=!0)=>{const a=m(e,o(n)-1,s);return l(a,n)},nextValue:(e,n,s=!0)=>{const a=V(e,o(n),s);return l(a,n)},enabledCount:I,enabledValues:x,enabledValue:i,enabledIndexOf:C,enabledFirstValue:e=>i(0,e),enabledLastValue:e=>i(x(e).length-1,e),enabledPrevValue:(e,n,s=!0)=>{const a=l(e);if(!a)return;const N=C(a.node,n),E=m(N,I(n)-1,s);return i(E,n)},enabledNextValue:(e,n,s=!0)=>{const a=l(e);if(!a)return;const N=C(a.node,n),E=V(N,I(n),s);return i(E,n)}}},h=()=>{const t=O.useRef(y());return g(()=>()=>t.current.destroy()),t.current},[A,P]=_({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsContextProvider"}),L=t=>{const d=P(),[c,r]=O.useState(-1),u=O.useRef(null);g(()=>()=>{u.current&&d.unregister(u.current)},[]),g(()=>{if(!u.current)return;const o=Number(u.current.dataset.index);c!=o&&!Number.isNaN(o)&&r(o)});const D=t?b(d.register(t)):b(d.register);return{descendants:d,index:c,enabledIndex:d.enabledIndexOf(u.current,t==null?void 0:t.filter),register:S(D,u)}},j=()=>({DescendantsContextProvider:b(A),useDescendantsContext:()=>b(P()),useDescendants:()=>h(),useDescendant:t=>L(t)});export{j as c};
