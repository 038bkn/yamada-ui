import{u as F}from"./index-690d7341.js";import{r as m}from"./index-de62f0e0.js";import{e as f,z as d,b as p}from"./factory-07cc9cf0.js";import{b as E,i as b,d as h,e as A}from"./theme-326cd56d.js";const g=r=>{const e=r.current;if(!e)return!1;const s=h(e);return!s||e.contains(s)?!1:!!A(s)},x=(r,{shouldFocus:e,visible:s,focusRef:u})=>{const t=e&&!s;f(()=>{if(!t||g(r))return;const n=(u==null?void 0:u.current)||r.current;n&&requestAnimationFrame(()=>{n.focus()})},[t,r,u])},L=(r,{focusRef:e,preventScroll:s,shouldFocus:u,visible:t}={preventScroll:!0,shouldFocus:!1})=>{const n=d(r)?r.current:r,l=u&&t,c=m.useRef(l),a=m.useRef(t);p(()=>{!a.current&&t&&(c.current=l),a.current=t},[t,l]);const o=m.useCallback(()=>{if(!(!t||!n||!c.current)&&(c.current=!1,!n.contains(document.activeElement)))if(e!=null&&e.current)requestAnimationFrame(()=>{var i;(i=e.current)==null||i.focus({preventScroll:s})});else{const i=E(n);i.length>0&&requestAnimationFrame(()=>{i[0].focus({preventScroll:s})})}},[t,s,n,e]);f(()=>{o()},[o]),F(n,"transitionend",o)},O=({ref:r,elements:e,enabled:s})=>{const u=()=>{var t;return((t=r.current)==null?void 0:t.ownerDocument)??document};F(u,"pointerdown",t=>{if(!b()||!s)return;const n=t.target,c=(e??[r]).some(a=>{const o=d(a)?a.current:a;return(o==null?void 0:o.contains(n))||o===n});u().activeElement!==n&&c&&(t.preventDefault(),n.focus())})};export{x as a,L as b,O as u};
//# sourceMappingURL=index-55e62adc.js.map
