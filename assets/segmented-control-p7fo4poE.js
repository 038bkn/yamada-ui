import{j as r,a as Y}from"./jsx-runtime-5BUNAZ9W.js";import{u as Z}from"./index-Q3A_zbLW.js";import{c as ee}from"./index-O8niFaRO.js";import{t as te}from"./index-rg5YQ7Iz.js";import{r as s}from"./index-4g5l5LRQ.js";import{L as se}from"./index-xbMthMY4.js";import{c as ne,g as ae,o as A,z as $,I as h,h as L,J as S,v as oe,u as N,a as z,K as le}from"./factory-Ei-jEUJK.js";import{M as re}from"./motion-NHjSOXL1.js";import{f as T}from"./forward-ref-A-8Arhkk.js";import{u as ce}from"./use-component-style-eekTqtz5.js";import{o as ie}from"./theme-provider-PZSzWP7q.js";const{DescendantsContextProvider:de,useDescendants:ue,useDescendant:me}=ee(),[fe,q]=ne({strict:!1,name:"SegmentedControlContext"}),Re=T((p,C)=>{const[u,m]=ce("SegmentedControl",p);let{className:f,id:o,name:y,isReadOnly:a,isDisabled:n,children:w,items:_=[],value:F,defaultValue:k,...d}=ie(m);o??(o=s.useId()),y??(y=`segmented-control-${s.useId()}`),d.onChange=ae(d.onChange);const x=ue(),[g,v]=s.useState(-1),[I,R]=s.useState(!1),M=s.useRef(null),j=s.useRef(new Map),[b,B]=Z({value:F,defaultValue:k,onChange:d.onChange}),E=s.useCallback(t=>{if(n||a){t.preventDefault();return}B(t.target.value)},[n,a,B]),G=s.useCallback((t,e)=>{if(!n)if(e){const c=x.enabledNextValue(t);c&&v(c.index)}else v(t)},[x,n]),J=s.useCallback(()=>v(-1),[]),H=s.useCallback((t={},e=null)=>({...A(d,["onChange"]),...t,ref:$(M,e),id:o,"aria-disabled":h(n),"aria-readonly":h(a),onBlur:L(t.onBlur,J)}),[o,n,a,J,d]),Q=s.useCallback(({index:t,...e}={},c=null)=>{const l=e.disabled??e.isDisabled??n,i=e.readOnly??e.isReadOnly??a,D=e.value===b;return{...A(e,["isDisabled","isReadOnly"]),ref:c,id:`${o}-${t}`,type:"radio",name:y,disabled:l||i,readOnly:i,checked:D,"aria-disabled":h(l),"aria-readonly":h(i),"data-checked":S(D),"data-focus":S(t===g),style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},onChange:L(e.onChange,P=>!l&&!i?E(P):{})}},[n,a,b,o,y,g,E]),U=s.useCallback(({index:t,...e}={},c=null)=>{const l=e.disabled??e.isDisabled??n,i=e.readOnly??e.isReadOnly??a,D=e.value===b,P=t===g;return{props:e,ref:$(X=>j.current.set(e.value,X),c),"aria-disabled":h(l),"aria-readonly":h(i),"data-checked":S(D),"data-focus":S(P),"data-focus-visible":S(P&&I),onFocus:L(e.onFocus,()=>G(t,l||i)),...l||i?{_hover:{},_active:{},_focus:{},_invalid:{},_focusVisible:{}}:{}}},[g,n,I,a,G,b]);s.useEffect(()=>te(R),[]);const W={display:"inline-flex",alignItems:"center",...u.container},K=oe(w);let V=[];if(!K.length&&_.length?V=_.map(({label:t,value:e,...c},l)=>r(O,{value:e,...c,children:t},l)):V=K,b==null&&k==null)for(const t of V){if(t.type!==O&&t.type.displayName!==O.displayName)continue;const e=t.props.value;B(e);break}return r(de,{value:x,children:r(fe,{value:{getInputProps:Q,getLabelProps:U,styles:u,selectedValue:b},children:r(se,{id:o,children:r(N.div,{...H({},C),className:z("ui-segmented-control",f),__css:W,children:V})})})})}),O=T(({className:p,disabled:C,readOnly:u,isDisabled:m,isReadOnly:f,value:o,onChange:y,children:a,motionProps:n,...w},_)=>{const[,F]=le({rerender:!0}),{selectedValue:k,getInputProps:d,getLabelProps:x,styles:g}=q(),{index:v,register:I}=me({disabled:m||f}),R={index:v,value:o,onChange:y,disabled:C,readOnly:u,isDisabled:m,isReadOnly:f},M={position:"relative",cursor:"pointer",flex:"1 1 0%",display:"inline-flex",justifyContent:"center",alignItems:"center",...g.button},j=k===o;return Y(N.label,{...x(A(R,["onChange"])),className:z("ui-segmented-control__button",p),__css:M,...w,children:[r(N.input,{...d(R,$(I,_))}),j&&F?r(ge,{...n}):null,r(N.span,{zIndex:"1",children:a})]})});O.displayName="SegmentedControlButton";const ge=({className:p,transition:C,...u})=>{const{styles:m}=q(),f={position:"absolute",w:"full",h:"full",...m.cursor};return r(re,{className:z("ui-segmented-control__cursor",p),layoutDependency:!1,layoutId:"cursor",transition:{type:"spring",bounce:.15,duration:.4,...C},__css:f,...u})};export{Re as S,O as a};
