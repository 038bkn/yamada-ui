import{r as s}from"./index-CBqU2yxZ.js";import{a as h}from"./factory-D1MzC1Q2.js";const x=(u,e)=>u!=="loaded"&&e==="beforeLoadOrError"||u==="failed"&&e==="onError",R=({loading:u,src:e,srcSet:l,onLoad:n,onError:r,crossOrigin:i,sizes:d,ignoreFallback:o})=>{const[c,m]=s.useState("pending");s.useEffect(()=>{m(e?"loading":"pending")},[e]);const f=s.useRef(),g=s.useCallback(()=>{if(!e)return;a();const t=new Image;t.src=e,i&&(t.crossOrigin=i),l&&(t.srcset=l),d&&(t.sizes=d),u&&(t.loading=u),t.onload=p=>{a(),m("loaded"),n==null||n(p)},t.onerror=p=>{a(),m("failed"),r==null||r(p)},f.current=t},[e,i,l,d,n,r,u]),a=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return h(()=>{if(!o)return c==="loading"&&g(),()=>{a()}},[c,g,o]),o?"loaded":c};export{x as s,R as u};
