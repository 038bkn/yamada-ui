import{j as b,a as X}from"./jsx-runtime-TtYKBvr-.js";import{u as ne}from"./index-yP8_fdVn.js";import{c as ae}from"./index-_RLnS977.js";import{t as oe}from"./index-5DX-dFPX.js";import{u as le}from"./index-WbphDl_j.js";import{r as s}from"./index-IybTgENJ.js";import{c as re,G as ie,d as ce,o as $,v as L,H as h,h as N,I as x,p as ue,u as y,a as Y}from"./factory-yYnGGCem.js";import{f as q}from"./forward-ref-6T0UNPU-.js";import{u as de}from"./use-component-style-5-ma296Y.js";import{o as fe}from"./theme-provider-Wsw433nP.js";const{DescendantsContextProvider:ge,useDescendants:me,useDescendant:he}=ae(),[be,pe]=re({strict:!1,name:"SegmentedControlContext"}),Ve=q((V,w)=>{const[p,k]=de("SegmentedControl",V);let{className:R,id:f,name:C,isReadOnly:r,isDisabled:a,children:F,items:_=[],...i}=fe(k);const O=ie();f??(f=s.useId()),C??(C=`segmented-control-${s.useId()}`),i.onChange=ce(i.onChange);const v=me(),[g,m]=s.useState(-1),[S,J]=s.useState(!1),[I,K]=le(),D=s.useRef(null),M=s.useRef(new Map),[c,A]=ne({value:i.value,defaultValue:i.defaultValue,onChange:i.onChange}),j=s.useCallback(()=>{const t={width:0,height:0,x:0,y:0},e=M.current.get(c);if(!e||!D.current||!I.current)return t;const{paddingLeft:o,paddingTop:n}=getComputedStyle(D.current),l=parseFloat(o)||0,u=parseFloat(n)||0;let{width:d,height:B}=e.getBoundingClientRect();return t.x=e.offsetLeft-l,t.y=e.offsetTop-u,t.width=d*(e.offsetWidth/d)||0,t.height=B*(e.offsetWidth/d)||0,t},[I,c]),[z,Q]=s.useState(j),E=s.useCallback(t=>{if(a||r){t.preventDefault();return}A(t.target.value)},[a,r,A]),T=s.useCallback((t,e)=>{if(!a)if(e){const o=v.enabledNextValue(t);o&&m(o.index)}else m(t)},[v,a]),W=s.useCallback(()=>m(-1),[]),U=s.useCallback((t={},e=null)=>({...$(i,["value","defaultValue","onChange"]),...t,ref:L(D,I,e),id:f,"aria-disabled":h(a),"aria-readonly":h(r),onBlur:N(t.onBlur,W)}),[f,a,r,I,W,i]),Z=s.useCallback((t={},e=null)=>{const{width:o,height:n,x:l,y:u}=z;return{...t,ref:e,style:{position:"absolute",zIndex:1,width:o,height:n,transform:`translate(${l}px, ${u}px)`}}},[z]),ee=s.useCallback(({index:t,...e}={},o=null)=>{const n=e.disabled??e.isDisabled??a,l=e.readOnly??e.isReadOnly??r,u=e.value===c;return{...$(e,["isDisabled","isReadOnly"]),ref:o,id:`${f}-${t}`,type:"radio",name:C,disabled:n||l,readOnly:l,checked:u,"aria-disabled":h(n),"aria-readonly":h(l),"data-checked":x(u),"data-focus":x(t===g),style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},onChange:N(e.onChange,d=>!n&&!l?E(d):{})}},[a,r,c,f,C,g,E]),te=s.useCallback(({index:t,...e}={},o=null)=>{const n=e.disabled??e.isDisabled??a,l=e.readOnly??e.isReadOnly??r,u=e.value===c,d=t===g;return{props:e,ref:L(B=>M.current.set(e.value,B),o),"aria-disabled":h(n),"aria-readonly":h(l),"data-checked":x(u),"data-focus":x(d),"data-focus-visible":x(d&&S),onFocus:N(e.onFocus,()=>T(t,n||l)),...n||l?{_hover:{},_active:{},_focus:{},_invalid:{},_focusVisible:{}}:{},style:{position:"relative",zIndex:2}}},[g,a,S,r,T,c]);s.useEffect(()=>oe(J),[]),s.useEffect(()=>{Q(j())},[g,K,c,j]);const se={position:"relative",display:"inline-flex",alignItems:"center",...p.container},G=ue(F);let P=[];if(!G.length&&_.length?P=_.map(({label:t,value:e,...o},n)=>b(H,{value:e,...o,children:t},n)):P=G,c==null&&i.defaultValue==null)for(const t of P){if(t.type!==H)continue;const e=t.props.value;A(e);break}return b(ge,{value:v,children:b(be,{value:{getInputProps:ee,getLabelProps:te,styles:p},children:X(y.div,{...U({},w),className:Y("ui-segmented-control",R),__css:se,children:[O.current?b(y.span,{className:"ui-segmented-control__active",...Z(),__css:p.active}):null,P]})})})}),H=q(({className:V,disabled:w,readOnly:p,isDisabled:k,isReadOnly:R,value:f,onChange:C,children:r,...a},F)=>{const{getInputProps:_,getLabelProps:i,styles:O}=pe(),{index:v,register:g}=he({disabled:k||R}),m={index:v,value:f,onChange:C,disabled:w,readOnly:p,isDisabled:k,isReadOnly:R},S={cursor:"pointer",flex:"1 1 0%",display:"inline-flex",justifyContent:"center",alignItems:"center",...O.button};return X(y.label,{...i($(m,["onChange"])),className:Y("ui-segmented-control__button",V),__css:S,...a,children:[b(y.input,{..._(m,L(g,F))}),b(y.span,{children:r})]})});export{Ve as S,H as a};
