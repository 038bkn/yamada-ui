import{j as O,a as Ce}from"./jsx-runtime-29545a09.js";import{u as De}from"./index-3b07572f.js";import{r as s}from"./index-76fb7be0.js";import{c as we,a as Fe}from"./icon-1cfd45cb.js";import{f as J}from"./forward-ref-8b7d2a6f.js";import{o as Oe,z as Ee,P as be,Q as he,l as H,B as Te,h as Re,U as _e,w as se,v as $,y as ve,L as te,s as Ae,d as U,e as V,j as Le}from"./factory-0893e977.js";import{b as Ne}from"./popover-content-a66da4e5.js";import{u as je}from"./index-7847f267.js";import{c as Be}from"./index-ba282c84.js";import{u as Me}from"./index-f1297105.js";import{u as He,f as Ue}from"./form-control-8de414a9.js";import{m as Ve,i as Ge,d as q,a as me,p as Ke}from"./theme-53967a8a.js";const ze=l=>{var c;return Ke(l)&&!!((c=l==null?void 0:l.getAttribute("role"))!=null&&c.startsWith("select-item"))},{DescendantsContextProvider:pt,useDescendantsContext:ge,useDescendants:We,useDescendant:Qe}=Be(),[xt,j]=Oe({strict:!1,name:"SelectContext"}),mt=({defaultIsOpen:l,placeholder:c,closeOnBlur:a=!0,closeOnEsc:u=!0,closeOnSelect:r=!0,placeholderInOptions:x=!0,omitSelectedValues:n=!1,maxSelectedValues:d,isEmpty:v,placement:g="bottom-start",duration:P=.2,optionProps:y,...o})=>{o=He(o);const f=Ee(o,Ue),C=be(o,he),i=We(),[m,b]=s.useState(-1),[z,X]=s.useState(!1),k=s.useRef(null),Z=s.useRef(null),ne=s.useRef(null),D=s.useRef(new Set([])),[S,G]=je({value:o.value,defaultValue:o.defaultValue,onChange:o.onChange}),[M,W]=s.useState(void 0),L=m>-1,h=H(S),N=(h?!S.length:!S)&&!(c&&x),E=i.values(({node:e})=>h&&S.includes(e.dataset.value??"")).map(({index:e})=>e),T=i.enabledValues(({index:e})=>!E.includes(e)),w=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledfirstValue();if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const I=T[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,T,h,n,E]),K=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledlastValue();if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const I=T.reverse()[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,T,h,n,E]),oe=s.useCallback(()=>{const e=setTimeout(()=>{const I=i.enabledValues().find(({node:A})=>h?S.includes(A.dataset.value??""):A.dataset.value===S);I&&b(I.index)});D.current.add(e)},[i,h,S]),Q=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledNextValue(m);if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const I=T.find(({index:A})=>t.index<A)??T[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,T,m,h,n,E,b]),le=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledPrevValue(m);if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const I=T.reverse().find(({index:A})=>A<t.index)??T[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,T,m,h,n,E,b]),B=N||n?w:oe,re=N||n?K:oe,ce=s.useCallback((e,t=!0)=>{const A=i.values().filter(({node:F})=>F.dataset.value===e).map(({node:F,index:Y})=>!(c&&x)||Y!==0?F.textContent??"":void 0);W(F=>h?(A.forEach(Y=>{H(F)&&F.includes(Y??"")?t&&(F=H(F)?F.filter(Ie=>Ie!==Y):void 0):F=[...H(F)?F:[],Y]}),F):A[0])},[i,h,c,x]),ae=s.useCallback(e=>{G(t=>H(t)?t.includes(e)?t.filter(A=>A!==e):[...t,e]:e),ce(e)},[ce,G]),ke=s.useCallback(e=>{e.stopPropagation(),G([]),W(void 0)},[W,G]),[p,ue]=s.useState(l??!1),R=s.useCallback(()=>{var e;f.disabled||f.readOnly||v||z||(ue(!0),(e=o.onOpen)==null||e.call(o))},[f,v,z,o]),_=s.useCallback(()=>{var e;ue(!1),(e=o.onClose)==null||e.call(o)},[o]),ie=s.useCallback(()=>{let e=i.value(m);if("disabled"in((e==null?void 0:e.node.dataset)??{})&&(e=void 0),!e)return;const t=e.node.dataset.value??"";ae(t),r&&_(),n&&Q()},[r,i,m,n,ae,_,Q]),de=s.useCallback(()=>{p||(R(),B())},[p,B,R]),fe=s.useCallback(()=>{p||(R(),B())},[p,B,R]),pe=s.useCallback(e=>{const t=Ve(e);Ge(k.current,t)||a&&p&&_()},[a,p,_]),xe=s.useCallback(e=>{if(e.key===" "&&(e.key=e.code),f.disabled||f.readOnly)return;const I={ArrowDown:L?()=>Q():p?void 0:te(R,B),ArrowUp:L?()=>le():p?void 0:te(R,re),Space:L?ie:p?void 0:te(R,B),Enter:L?ie:p?void 0:te(R,B),Home:p?w:void 0,End:p?K:void 0,Escape:u?_:void 0}[e.key];I&&(e.preventDefault(),e.stopPropagation(),I())},[f.disabled,f.readOnly,L,p,R,B,re,ie,w,K,u,_,Q,le]);Me({ref:k,handler:_,enabled:a}),s.useEffect(()=>{if(!h||!n&&Te(d))return;const e=S.length>0&&S.length===i.count(),t=S.length===d;e||t?(_(),X(!0)):X(!1)},[n,S,i,h,_,d]),Re(()=>{p||b(-1)},[p]),_e(()=>{D.current.forEach(e=>clearTimeout(e)),D.current.clear()});const ye=s.useCallback(e=>({...o,...e,isOpen:p,onOpen:R,onClose:_,placement:g,duration:P,trigger:"never",closeOnButton:!1}),[P,_,R,g,o,p]),Pe=s.useCallback((e={},t=null)=>({ref:se(k,t),...C[0],...e,...f,onClick:$(e.onClick,o.onClick,de),onFocus:$(e.onFocus,o.onFocus,fe),onBlur:$(e.onBlur,o.onBlur,pe)}),[C,f,pe,de,fe,o]),Se=s.useCallback((e={},t=null)=>({ref:se(Z,t),tabIndex:0,...ve(C[1],["value","defaultValue","onChange"]),...e,"data-active":q(p),"data-placeholder":q(h?!(M!=null&&M.length):M===void 0),"aria-expanded":q(p),onKeyDown:$(e.onKeyDown,o.onKeyDown,xe)}),[C,p,h,M,o,xe]);return{descendants:i,value:S,displayValue:M,focusedIndex:m,placeholder:c,placeholderInOptions:x,omitSelectedValues:n,closeOnSelect:r,isOpen:p,containerRef:k,fieldRef:Z,listRef:ne,optionProps:y,formControlProps:f,onChangeDisplayValue:ce,onChange:ae,onClear:ke,onOpen:R,onClose:_,onFocusFirst:w,onFocusLast:K,onFocusSelected:oe,onFocusNext:Q,onFocusPrev:le,setFocusedIndex:b,getPopoverProps:ye,getContainerProps:Pe,getFieldProps:Se}},Ye=()=>{const{listRef:l,focusedIndex:c}=j(),a=ge(),u=s.useRef(-1),r=a.value(c);return s.useEffect(()=>{if(!l.current||!r||u.current===r.index)return;const n=l.current,d=r.node,v=n.clientHeight,g=n.scrollTop,P=g+v,y=d.clientHeight,o=d.offsetTop,f=o+y,C=g<=o&&f<=P,i=u.current<r.index;C||(f<=v?l.current.scrollTo({top:0}):i?l.current.scrollTo({top:f-v}):l.current.scrollTo({top:o+1})),u.current=r.index},[l,r]),{getListProps:s.useCallback((n={},d=null)=>({as:"ul",ref:se(l,d),role:"select",tabIndex:-1,...n}),[l])}},$e=({label:l,...c})=>{const{value:a,omitSelectedValues:u}=j(),r=H(a),x=ge(),n=x.values(),v=(r&&u?x.values(({node:C})=>a.includes(C.dataset.value??"")):[]).map(({index:C})=>C),P=!n.filter(({node:C,index:i})=>{var m;return((m=C.parentElement)==null?void 0:m.dataset.label)===l&&!v.includes(i)}).length,y=be(c,he),o=s.useCallback((C={},i=null)=>{const m={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};return{ref:i,...C,...y[0],style:P?m:void 0}},[y,P]),f=s.useCallback((C={},i=null)=>({ref:i,...C,...y[1],"data-label":l}),[y,l]);return{label:l,getContainerProps:o,getGroupProps:f}},qe=(l,c)=>{const{fieldRef:a,value:u,placeholder:r,placeholderInOptions:x,omitSelectedValues:n,closeOnSelect:d,focusedIndex:v,optionProps:g,onChange:P,onChangeDisplayValue:y,onFocusNext:o,onClose:f,setFocusedIndex:C}=j();let{icon:i,isDisabled:m,isFocusable:b,closeOnSelect:z,children:X,...k}={...g,...c};const Z=!!m&&!b,ne=s.useRef(null),{index:D,register:S,descendants:G}=Qe({disabled:Z}),W=G.values().slice(0,D),L=H(u),N=!(L?!1:W.some(({node:w})=>w.dataset.value===(k.value??"")))&&(L?u.includes(k.value??""):(k.value??"")===u),ee=D===v;r&&D>0&&x&&!k.value&&console.warn(`${L?"MultiSelect":"Select"}: If placeholders are present, All options must be set value. If want to set an empty value, either don't set the placeholder or set 'placeholderInOptions' to false.`);const E=s.useCallback(w=>{if(w.preventDefault(),w.stopPropagation(),m){a.current&&a.current.focus();return}if(!ze(w.currentTarget)){a.current&&a.current.focus();return}C(D),P(k.value??""),a.current&&a.current.focus(),(z??d)&&f(),n&&o()},[m,C,D,P,k.value,a,z,d,f,n,o]);s.useEffect(()=>{N&&y(k.value??"",!1)},[k,N,y]);const T=s.useCallback((w={})=>{const K={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};return{ref:se(ne,l,S),...ve(k,["value"]),...w,role:"select-item",tabIndex:-1,style:n&&N?K:void 0,"data-value":k.value??"","data-focus":q(ee),"data-disabled":q(m),"aria-checked":me(N),"aria-disabled":me(m),onClick:$(k.onClick,w.onClick,E)}},[k,m,ee,N,n,E,l,S]);return{isSelected:N,isFocused:ee,customIcon:i,children:X,getOptionProps:T}},Je=J(({className:l,children:c,__css:a,...u},r)=>{const{styles:x}=j(),n={position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",cursor:"pointer",...x.icon,...a},v=Ae(c).map(g=>s.cloneElement(g,{focusable:!1,"aria-hidden":!0,style:{maxWidth:"1em",maxHeight:"1em",color:"currentColor"}}));return O(U.div,{ref:r,className:V("ui-select-icon",l),__css:n,...u,children:Le(c)?v:O(we,{})})}),Ct=({className:l,children:c,...a})=>{const u=s.useRef(null),{styles:r}=j(),x=a.disabled,n=De({ref:u,isDisabled:x,...a});return O(Je,{className:V("ui-select-clear-icon",l),__css:r.clearIcon,...n,children:c??O(Fe,{w:"0.5em",h:"0.5em"})})},bt=J(({className:l,w:c,width:a,minW:u,minWidth:r,...x},n)=>{var P,y,o,f;const{styles:d}=j(),{getListProps:v}=Ye();c=c??a??((P=d.list)==null?void 0:P.w)??((y=d.list)==null?void 0:y.width),u=u??r??((o=d.list)==null?void 0:o.minW)??((f=d.list)==null?void 0:f.minWidth);const g={...d.list};return O(Ne,{className:V("ui-select-list",l),w:c,minW:u,__css:g,...v(x,n)})}),ht=J(({className:l,color:c,h:a,height:u,minH:r,minHeight:x,children:n,...d},v)=>{const{styles:g}=j(),{label:P,getContainerProps:y,getGroupProps:o}=$e(d);return a=a??u,r=r??x,Ce(U.li,{className:"ui-select-group-container",__css:{w:"100%",h:"fit-content",color:c},...y(),children:[O(U.span,{className:V("ui-select-group-label"),__css:g.groupLabel,noOfLines:1,children:P}),O(U.ul,{...o({},v),className:V("ui-select-group",l),__css:{h:a,minH:r,...g.group},children:n})]})}),vt=J(({className:l,icon:c,...a},u)=>{const{styles:r}=j(),{isSelected:x,customIcon:n,children:d,getOptionProps:v}=qe(u,a);c=c??n;const g={textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,gap:"0.75rem",...r.item};return Ce(U.li,{className:V("ui-select-item",l),__css:g,...v(),children:[c!==null?O(Xe,{opacity:x?1:0,children:c||O(Ze,{})}):null,c?O(U.span,{style:{pointerEvents:"none",flex:1},noOfLines:1,children:d}):d]})}),Xe=J(({className:l,...c},a)=>{const{styles:u}=j(),r={flexShrink:0,display:"inline-flex",justifyContent:"center",alignItems:"center",fontSize:"0.85em",...u.itemIcon};return O(U.span,{ref:a,className:V("ui-select-item-icon",l),__css:r,...c})}),Ze=()=>O("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",children:O("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})});export{vt as O,pt as S,ht as a,xt as b,Je as c,bt as d,j as e,Ct as f,mt as u};
//# sourceMappingURL=option-cdf9adf4.js.map
