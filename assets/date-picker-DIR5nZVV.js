import{j as a}from"./jsx-runtime-Nms4Y4qS.js";import{u as Le}from"./index-mMbOwMyI.js";import{r as o}from"./index-BwDkhjyp.js";import{d as ee,i as we,a as Fe,b as qe,C as Ge}from"./ja-DWn_lVqH.js";import{u as Je}from"./index-AEOZ2ZJT.js";import{u as Qe}from"./index-B0VytHna.js";import{u as Xe}from"./index-BC2fJpjq.js";import{u as Ze,f as $e}from"./form-control-C8wk9nRT.js";import{p as et,P as tt,b as ot,a as nt}from"./popover-content-CYV3XEV7.js";import{u as at,o as st}from"./theme-provider-woLZZCt0.js";import{T as rt,a1 as lt,a2 as it,R as ct,a9 as ut,U as pt,a as te,h as A,d as dt,l as ft,f as Ve,aa as mt,b as U,c as W,B as Ct,t as Pt,j as ht}from"./factory-CEsHZeW8.js";import{P as gt}from"./container-portal-Df4525l3.js";import{b as kt,a as bt}from"./icon-SoeERY4p.js";import{f as oe}from"./forward-ref-BmTAT9U5.js";import{a as yt}from"./use-component-style-BVTnHHBW.js";const _t=u=>{var Ie,Oe;const{theme:p}=at();let{id:s,closeOnBlur:d=!0,closeOnEsc:P=!0,placement:f="bottom-start",duration:i=.2,enableMultiple:m,enableRange:h,value:g,defaultValue:D,onChange:E,type:O,defaultType:j,onChangeType:R,month:I,defaultMonth:B,onChangeMonth:S,firstDayOfWeek:N,amountOfMonths:M,paginateBy:H,withWeekdays:z,disableOutsideDays:T,hiddenOutsideDays:k,minDate:c,maxDate:C,locale:t,yearFormat:r,monthFormat:b,weekdayFormat:ae,dateFormat:se,weekendDays:re,today:le,excludeDate:y,calendarVariant:ie,calendarSize:ce,calendarColorScheme:ue,holidays:pe,withHeader:de,withControls:fe,withLabel:me,maxSelectValues:Ce,__selectType:Pe,calendarProps:he,allowInput:_=!0,allowInputBeyond:L=!1,parseDate:q,pattern:Re=/[^0-9\-\/]/g,inputFormat:G="YYYY/MM/DD",autoFocus:Y=!0,isOpen:Be,defaultIsOpen:Te,onOpen:Se,onClose:Ne,onClear:J,onEnter:ge,onDelete:ke,...v}=Ze(u);s??(s=o.useId()),t??(t=((Oe=(Ie=p.__config)==null?void 0:Ie.date)==null?void 0:Oe.locale)??"en");const{"aria-readonly":Ot,...w}=rt(v,$e),[be,Me]=lt(ct(v,et),it),{disabled:Q,readOnly:X}=w,{isOpen:l,onOpen:ye,onClose:F}=Qe({isOpen:Be,defaultIsOpen:Te,onOpen:Se,onClose:Ne}),Z=o.useRef(null),K=o.useRef(null),He=o.useCallback(e=>{let n=(q==null?void 0:q(e))??ee(e,G,t).toDate();if(n!=null&&!(y!=null&&y(n)))return L||(C&&we(n,C)&&(n=C),c&&Fe(n,c)&&(n=c)),n},[L,y,G,t,C,c,q]),ze=o.useCallback(e=>{if(e!=null&&!(y!=null&&y(e)))return L||(C&&we(e,C)&&(e=C),c&&Fe(e,c)&&(e=c)),ee(e).locale(t??"en").format(G)},[L,y,G,t,C,c]),x=o.useCallback(()=>{var e;Q||X||(ye(),Y&&_&&((e=K.current)==null||e.focus()))},[Y,_,Q,X,ye]),_e=o.useCallback(()=>{var e;l?Y&&_&&((e=K.current)==null||e.focus()):x()},[Y,_,l,x]),ve=o.useCallback(()=>{l||x()},[l,x]),xe=o.useCallback(e=>{const n=ut(e);pt(Z.current,n)||d&&l&&F()},[d,l,F]),De=o.useCallback(e=>{if(e.key===" "&&(e.key=e.code),Q||X)return;const $={Space:l?void 0:V=>{V.preventDefault(),V.stopPropagation(),x()},Enter:l?ge:V=>{V.preventDefault(),V.stopPropagation(),x()},Escape:P?V=>{V.preventDefault(),V.stopPropagation(),F()}:void 0,Backspace:ke}[e.key];$&&$(e)},[P,Q,X,l,F,ge,ke,x]),je=o.useCallback(e=>{var n;e.stopPropagation(),J==null||J(),Y&&_&&l&&((n=K.current)==null||n.focus())},[Y,_,l,J]);Xe({ref:Z,handler:F,enabled:l&&d});const Ye=o.useCallback((e={},n=null)=>({ref:te(Z,n),...be,...e,...w,onClick:A(e.onClick,v.onClick,_e),onBlur:A(e.onBlur,v.onBlur,xe)}),[be,w,xe,_e,v]),Ae=o.useCallback(e=>({...v,...e,isOpen:l,onOpen:x,onClose:F,placement:f,duration:i,trigger:"never",closeOnButton:!1,closeOnBlur:!1}),[i,l,F,x,f,v]),Ke=o.useCallback((e={},n=null)=>{const $={...e.style,..._?{}:{cursor:"pointer"}};return{ref:te(K,n),tabIndex:_?-1:0,role:"combobox","aria-haspopup":"dialog","aria-controls":s,...e,...w,style:$,"data-active":dt(l),"aria-expanded":l,onFocus:A(e.onFocus,v.onFocus,ve),onKeyDown:A(e.onKeyDown,v.onKeyDown,De)}},[s,_,w,l,v,ve,De]),Ue=o.useCallback(e=>({...e,type:O,defaultType:j,onChangeType:R,month:I,defaultMonth:B,onChangeMonth:S,firstDayOfWeek:N,amountOfMonths:M,paginateBy:H,withWeekdays:z,disableOutsideDays:T,hiddenOutsideDays:k,yearFormat:r,monthFormat:b,weekdayFormat:ae,dateFormat:se,weekendDays:re,today:le,holidays:pe,withHeader:de,withControls:fe,withLabel:me,maxSelectValues:Ce,variant:ie,size:ce,colorScheme:ue,...he,value:g,defaultValue:D,onChange:E,minDate:c,maxDate:C,excludeDate:y,locale:t,__selectType:Pe,enableMultiple:m,enableRange:h}),[k,Ce,m,h,M,ue,he,ce,ie,se,B,j,D,T,y,N,pe,t,C,c,I,b,E,S,R,H,le,O,g,ae,re,fe,de,me,z,r,Pe]),We=o.useCallback(({clear:e,...n})=>({...n,...w,onClick:A(n.onClick,e?je:void 0)}),[w,je]);return{id:s,allowInput:_,pattern:Re,inputProps:Me,formControlProps:w,containerRef:Z,inputRef:K,isOpen:l,onOpen:x,onClose:F,dateToString:ze,stringToDate:He,getContainerProps:Ye,getPopoverProps:Ae,getFieldProps:Ke,getCalendarProps:Ue,getIconProps:We}},[vt,ne]=ft({strict:!1,name:"DatePickerContext"}),xt=({value:u,defaultValue:p,onChange:s,placeholder:d,closeOnSelect:P=!0,...f})=>{const[i,m]=Je({value:u,defaultValue:p,onChange:s,onUpdate:(t,r)=>!qe(t,r)}),{inputRef:h,id:g,allowInput:D,pattern:E,inputProps:O,formControlProps:j,onClose:R,dateToString:I,stringToDate:B,getContainerProps:S,getPopoverProps:N,getFieldProps:M,getCalendarProps:H,getIconProps:z}=_t({...f,value:i,defaultValue:p,onChange:t=>{const r=I(t);m(t),k(r),P&&t&&R()},onClear:()=>{m(void 0),k(void 0)},onClose:()=>{var r;const t=I(i);k(t),(r=f.onClose)==null||r.call(f)}}),[T,k]=o.useState(I(i)),c=o.useCallback(t=>{let r=t.target.value;r=r.replace(E,"");const b=B(r);k(r),b&&ee(b).isValid()?m(b):m(void 0)},[E,B,k,m]);Ve(()=>{m(u)},[u]),Ve(()=>{if(h.current&&mt(h.current))return;const t=I(i);k(t)},[i]);const C=o.useCallback((t={},r=null)=>{const b={...t.style,...O.style,...D?{}:{pointerEvents:"none"}};return{placeholder:d,...j,autoComplete:"off",...O,...t,ref:r,style:b,id:g,tabIndex:D?0:-1,value:T??"",cursor:j.readOnly?"default":"text",pointerEvents:j.disabled?"none":"auto",onChange:A(t.onChange,c)}},[O,D,d,j,g,T,c]);return{id:g,value:i,onClose:R,getContainerProps:S,getPopoverProps:N,getFieldProps:M,getInputProps:C,getIconProps:z,getCalendarProps:H}},Ut=oe((u,p)=>{const[s,d]=yt("DatePicker",u);let{className:P,children:f,isClearable:i=!0,color:m,h,height:g,minH:D,minHeight:E,containerProps:O,fieldProps:j,inputProps:R,iconProps:I,clearIconProps:B,portalProps:S={isDisabled:!0},...N}=st(d);const{getPopoverProps:M,getContainerProps:H,getCalendarProps:z,getFieldProps:T,getInputProps:k,getIconProps:c,onClose:C,value:t,id:r}=xt(N);h??(h=g),D??(D=E);const b={w:"100%",h:"fit-content",color:m,...s.container};return a.jsx(vt,{value:s,children:a.jsx(tt,{...M(),children:a.jsxs(U.div,{className:W("ui-date-picker",P),__css:b,...H(O),children:[a.jsxs(U.div,{className:"ui-date-picker__inner",__css:{position:"relative",...s.inner},children:[a.jsx(Dt,{...T({h,minH:D,...j},p),inputProps:k(R)}),i&&t?a.jsx(It,{...c({clear:!0,...B})}):a.jsx(Ee,{...c({clear:!1,...I})})]}),a.jsx(gt,{...S,children:a.jsxs(ot,{id:r,role:"dialog","aria-modal":"true",className:"ui-date-picker__popover",__css:{...s.list},children:[a.jsx(Ge,{className:"ui-date-picker__calendar",...z()}),Ct(f,{value:t,onClose:C})]})})]})})})}),Dt=oe(({className:u,h:p,minH:s,inputProps:d,...P},f)=>{const i=ne(),{ref:m,...h}=d,g={pe:"2rem",h:p,minH:s,display:"flex",alignItems:"center",...i.field};return a.jsx(nt,{children:a.jsx(U.div,{className:W("ui-date-picker__field",u),__css:g,...P,children:a.jsx(U.input,{"aria-label":"Input date value",ref:te(f,m),className:"ui-date-picker__field__input",display:"inline-block",w:"100%",...h})})})}),Ee=oe(({className:u,children:p,__css:s,...d},P)=>{const i={position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",cursor:"pointer",...ne().icon,...s},h=Pt(p).map(g=>o.cloneElement(g,{focusable:!1,"aria-hidden":!0,style:{maxWidth:"1em",maxHeight:"1em",color:"currentColor"}}));return a.jsx(U.div,{ref:P,className:W("ui-date-picker__icon",u),__css:i,...d,children:ht(p)?h:a.jsx(jt,{})})}),jt=({className:u,...p})=>a.jsx(kt,{className:W("ui-date-picker__icon__calendar",u),viewBox:"0 0 24 24",...p,children:a.jsx("path",{fill:"currentColor",d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),It=({className:u,children:p,...s})=>{const d=o.useRef(null),P=ne(),f=s.disabled,i=Le({ref:d,isDisabled:f,...s});return a.jsx(Ee,{"aria-label":"Clear value",className:W("ui-date-picker__icon--clear",u),__css:P.clearIcon,...i,children:p??a.jsx(bt,{w:"0.5em",h:"0.5em"})})};export{Ut as D,vt as a,Dt as b,It as c,Ee as d,ne as e,_t as u};
