import{j as s,a as R,F as U}from"./jsx-runtime-2xDJh5tt.js";import{u as M}from"./index-CP6JVgmG.js";import{r}from"./index-CBqU2yxZ.js";import{R as q}from"./Combination-DlzjZhkT.js";import{L as N}from"./loading-B8AyfAAt.js";import{M as S}from"./motion-Ca3VN97B.js";import{m as G}from"./motion-JgkBPv6g.js";import{u as j,d as p,e as H,i as J,f as K}from"./factory-kXR3An-G.js";import{A as Q}from"./index-_tcQm2Fk.js";import{P as X}from"./container-portal-H66RvNRR.js";const w=r.createContext({}),g=()=>({isLoading:r.createRef(),start:r.createRef(),finish:r.createRef(),update:r.createRef(),force:r.createRef()}),C=e=>({isLoading:()=>{var t,n;return((n=(t=e.current.isLoading).current)==null?void 0:n.call(t))??!1},start:t=>{var n,o;return(o=(n=e.current.start).current)==null?void 0:o.call(n,t)},finish:()=>{var t,n;return(n=(t=e.current.finish).current)==null?void 0:n.call(t)},update:t=>{var n,o;return(o=(n=e.current.update).current)==null?void 0:o.call(n,t)},force:t=>{var n,o;return(o=(n=e.current.force).current)==null?void 0:o.call(n,t)}}),Y=e=>e+1,Z=e=>e===0?e:e-1,me=({screen:e,page:t,background:n,custom:o,children:l})=>{const i=r.useRef(g()),a=r.useRef(g()),f=r.useRef(g()),x=r.useRef(g()),L=C(i),d=C(a),v=C(f),y=C(x),F={screen:L,page:d,background:v,custom:y};return R(w.Provider,{value:F,children:[l,s(h,{controlRefs:i,...e,component:(e==null?void 0:e.component)??(c=>s(E,{...c}))}),s(h,{controlRefs:a,...t,component:(t==null?void 0:t.component)??(c=>s(W,{...c}))}),s(h,{controlRefs:f,...n,blockScrollOnMount:(n==null?void 0:n.blockScrollOnMount)??!1,component:(n==null?void 0:n.component)??(c=>s(A,{...c}))}),s(h,{controlRefs:x,blockScrollOnMount:(n==null?void 0:n.blockScrollOnMount)??!1,...o,component:o==null?void 0:o.component})]})},h=({controlRefs:e,appendToParentPortal:t,containerRef:n,allowPinchZoom:o=!1,blockScrollOnMount:l=!0,initialState:i,duration:a=null,icon:f,text:x,component:L})=>{const d=r.useRef(!1),[{loadingCount:v,message:y,duration:F},c]=r.useState({loadingCount:i?1:0,message:void 0,duration:a}),{isLoading:B,start:D,finish:I,update:P,force:V}=r.useMemo(()=>({isLoading:()=>d.current,start:({message:m,duration:u=a}={})=>{d.current=!0,c(({loadingCount:_})=>({loadingCount:Y(_),message:m,duration:u}))},update:m=>c(u=>({...u,...m})),finish:()=>{d.current=!1,c(({loadingCount:m})=>({loadingCount:Z(m),message:void 0,duration:a}))},force:({loadingCount:m=0,message:u,duration:_=a})=>{d.current=!!m,c({loadingCount:m,message:u,duration:_})}}),[a]);p(e.current.isLoading,B),p(e.current.start,D),p(e.current.finish,I),p(e.current.update,P),p(e.current.force,V);const T={initialState:i,icon:f,text:x,message:y,duration:F,onFinish:I};return H(()=>{(i||J(a))&&c({loadingCount:i?1:0,message:void 0,duration:a})},[i,a]),s(Q,{initial:!1,children:v?s(X,{appendToParentPortal:t,containerRef:n,children:s(q,{allowPinchZoom:o,enabled:l,forwardProps:!0,children:s(r.Fragment,{children:s($,{component:L,...T})})})}):null})},$=({component:e,...t})=>typeof e=="function"?e(t):s(U,{}),z=({message:e,...t})=>e?K(e)?e:s(j.p,{...t,children:e}):null,k=(e="fade")=>({initial:{opacity:0,scale:e==="scaleFade"?.95:void 0},animate:{opacity:1,scale:e==="scaleFade"?1:void 0,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:e==="scaleFade"?.95:void 0,transition:{duration:.4,ease:[.4,0,1,1]}}}),O=(e="fill")=>({position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:9999,bg:e==="fill"?["#fbfbfb","#141414"]:"rgba(0, 0, 0, 0.48)",w:"100vw",h:"100dvh",p:"1rem",display:"flex",justifyContent:"center",alignItems:"center"}),b=(e,t="fade")=>({initial:e?!1:"initial",animate:"animate",exit:"exit",variants:k(t)}),E=r.memo(({initialState:e,icon:t,text:n,message:o,duration:l,onFinish:i})=>{const a={maxW:"24rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5rem"};return M(i,l),s(S,{className:"ui-loading-screen",...b(e),__css:O(),children:R(j.div,{__css:a,children:[s(N,{size:"6xl",...t}),s(z,{message:o,lineClamp:3,...n})]})})});E.displayName="ScreenComponent";const W=r.memo(({initialState:e,icon:t,text:n,message:o,duration:l,onFinish:i})=>{const a={bg:["#fbfbfb","#141414"],maxW:"24rem",p:"1rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5rem",rounded:"0.375rem",boxShadow:["0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)","0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4)"]};return M(i,l),s(S,{className:"ui-loading-page",...b(e),__css:O("transparent"),children:R(j.div,{as:G.div,className:"ui-loading-page__inner",...b(e,"scaleFade"),__css:a,children:[s(N,{size:"6xl",...t}),s(z,{message:o,lineClamp:3,...n})]})})});W.displayName="PageComponent";const A=r.memo(({initialState:e,icon:t,text:n,message:o,duration:l,onFinish:i})=>{const a={position:"fixed",right:"1rem",bottom:"1rem",zIndex:9999,bg:["#fbfbfb","#141414"],maxW:"20rem",p:"0.5rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem",rounded:"0.375rem",boxShadow:["0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 -25px 50px -12px rgba(0, 0, 0, 0.25)","0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4)"]};return M(i,l),R(S,{className:"ui-loading-background",...b(e,"scaleFade"),__css:a,children:[s(N,{size:"xl",...t}),s(z,{message:o,fontSize:"sm",lineClamp:1,...n})]})});A.displayName="BackgroundComponent";const de=()=>{const{screen:e,page:t,background:n,custom:o}=r.useContext(w);return{screen:e,page:t,background:n,custom:o}};export{me as L,de as u};
