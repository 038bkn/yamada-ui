{"version":3,"file":"collapse-f48c81e5.js","sources":["../../packages/components/transitions/src/collapse.tsx"],"sourcesContent":["import { ui, HTMLUIProps, forwardRef, CSSUIObject } from '@yamada-ui/core'\nimport {\n  motion,\n  HTMLMotionProps,\n  AnimatePresence,\n  transitionEnter,\n  transitionExit,\n  WithTransitionProps,\n  MotionTransitionVariants,\n  MOTION_TRANSITION_EASINGS,\n} from '@yamada-ui/motion'\nimport { createdDom, cx } from '@yamada-ui/utils'\nimport { useEffect, useState } from 'react'\n\nconst isNumeric = (value?: string | number) =>\n  value != null && parseFloat(value.toString()) > 0\n\ntype CollapseOptions = {\n  /**\n   * If `true`, the opacity of the content will be animated.\n   *\n   * @default true\n   */\n  animationOpacity?: boolean\n  /**\n   * The height you want the content in its collapsed state.\n   *\n   * @default 0\n   */\n  startingHeight?: number | string\n  /**\n   * The height you want the content in its expanded state.\n   *\n   * @default \"auto\"\n   */\n  endingHeight?: number | string\n}\n\nexport type CollapseProps = WithTransitionProps<\n  HTMLUIProps<'div'> & HTMLMotionProps<'div'>\n> &\n  CollapseOptions\n\nconst variants: MotionTransitionVariants = {\n  enter: ({\n    animationOpacity,\n    endingHeight: height,\n    transition,\n    transitionEnd,\n    delay,\n    duration,\n    enter,\n  } = {}) => ({\n    ...(animationOpacity ? { opacity: 1 } : {}),\n    height,\n    transition: transitionEnter(transition?.enter)(delay, duration),\n    transitionEnd: transitionEnd?.enter,\n    ...enter,\n  }),\n  exit: ({\n    animationOpacity,\n    startingHeight: height,\n    transition,\n    transitionEnd,\n    delay,\n    duration,\n    exit,\n  } = {}) => ({\n    ...(animationOpacity ? { opacity: isNumeric(height) ? 1 : 0 } : {}),\n    height,\n    transition: transitionExit(transition?.exit)(delay, duration),\n    transitionEnd: transitionEnd?.exit,\n    ...exit,\n  }),\n}\n\nexport const collapseProps = {\n  initial: 'exit',\n  animate: 'enter',\n  exit: 'exit',\n  variants,\n}\n\nexport const Collapse = forwardRef<CollapseProps, 'div'>(\n  (\n    {\n      unmountOnExit,\n      isOpen,\n      animationOpacity = true,\n      startingHeight = 0,\n      endingHeight = 'auto',\n      transition,\n      transitionEnd,\n      delay,\n      duration,\n      className,\n      style,\n      __css,\n      ...rest\n    },\n    ref,\n  ) => {\n    const [mounted, setMounted] = useState(false)\n\n    useEffect(() => {\n      const isBrowser = createdDom()\n\n      if (isBrowser) setMounted(true)\n    }, [])\n\n    const hasStartingHeight = parseFloat(startingHeight.toString()) > 0\n    const animate = isOpen || unmountOnExit ? 'enter' : 'exit'\n\n    isOpen = unmountOnExit ? isOpen : true\n    transition = !mounted\n      ? { enter: { duration: 0 } }\n      : transition ?? {\n          enter: {\n            height: {\n              duration: duration ?? 0.3,\n              ease: MOTION_TRANSITION_EASINGS.ease,\n            },\n            opacity: {\n              duration: duration ?? 0.4,\n              ease: MOTION_TRANSITION_EASINGS.ease,\n            },\n          },\n          exit: {\n            height: {\n              duration: duration ?? 0.2,\n              ease: MOTION_TRANSITION_EASINGS.ease,\n            },\n            opacity: {\n              duration: duration ?? 0.3,\n              ease: MOTION_TRANSITION_EASINGS.ease,\n            },\n          },\n        }\n    transitionEnd = unmountOnExit\n      ? transitionEnd\n      : {\n          ...transitionEnd,\n          exit: {\n            ...transitionEnd?.exit,\n            display: hasStartingHeight ? 'block' : 'none',\n          },\n        }\n\n    const custom = {\n      animationOpacity,\n      startingHeight,\n      endingHeight,\n      transition,\n      transitionEnd,\n      delay,\n      duration,\n    }\n\n    const css: CSSUIObject = {\n      w: '100%',\n      ...__css,\n    }\n\n    return (\n      <AnimatePresence initial={false} custom={custom}>\n        {isOpen ? (\n          <ui.div\n            as={motion.div}\n            ref={ref}\n            className={cx('ui-collapse', className)}\n            {...rest}\n            {...collapseProps}\n            custom={custom}\n            animate={animate}\n            initial={unmountOnExit ? 'exit' : false}\n            __css={css}\n            style={{\n              overflow: 'hidden',\n              display: 'block',\n              ...style,\n            }}\n          />\n        ) : null}\n      </AnimatePresence>\n    )\n  },\n)\n"],"names":["isNumeric","value","variants","animationOpacity","height","transition","transitionEnd","delay","duration","enter","transitionEnter","exit","transitionExit","collapseProps","Collapse","forwardRef","unmountOnExit","isOpen","startingHeight","endingHeight","className","style","__css","rest","ref","mounted","setMounted","useState","useEffect","createdDom","hasStartingHeight","animate","MOTION_TRANSITION_EASINGS","custom","css","jsx","AnimatePresence","ui","motion","cx"],"mappings":"6WAcA,MAAMA,EAAaC,GACjBA,GAAS,MAAQ,WAAWA,EAAM,UAAU,EAAI,EA4B5CC,EAAqC,CACzC,MAAO,CAAC,CACN,iBAAAC,EACA,aAAcC,EACd,WAAAC,EACA,cAAAC,EACA,MAAAC,EACA,SAAAC,EACA,MAAAC,CACF,EAAI,MAAQ,CACV,GAAIN,EAAmB,CAAE,QAAS,GAAM,CAAC,EACzC,OAAAC,EACA,WAAYM,EAAgBL,GAAA,YAAAA,EAAY,KAAK,EAAEE,EAAOC,CAAQ,EAC9D,cAAeF,GAAA,YAAAA,EAAe,MAC9B,GAAGG,CAAA,GAEL,KAAM,CAAC,CACL,iBAAAN,EACA,eAAgBC,EAChB,WAAAC,EACA,cAAAC,EACA,MAAAC,EACA,SAAAC,EACA,KAAAG,CACF,EAAI,MAAQ,CACV,GAAIR,EAAmB,CAAE,QAASH,EAAUI,CAAM,EAAI,EAAI,CAAE,EAAI,CAAC,EACjE,OAAAA,EACA,WAAYQ,EAAeP,GAAA,YAAAA,EAAY,IAAI,EAAEE,EAAOC,CAAQ,EAC5D,cAAeF,GAAA,YAAAA,EAAe,KAC9B,GAAGK,CAAA,EAEP,EAEaE,EAAgB,CAC3B,QAAS,OACT,QAAS,QACT,KAAM,OACN,SAAAX,CACF,EAEaY,EAAWC,EACtB,CACE,CACE,cAAAC,EACA,OAAAC,EACA,iBAAAd,EAAmB,GACnB,eAAAe,EAAiB,EACjB,aAAAC,EAAe,OACf,WAAAd,EACA,cAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAY,EACA,MAAAC,EACA,MAAAC,EACA,GAAGC,GAELC,IACG,CACH,KAAM,CAACC,EAASC,CAAU,EAAIC,WAAS,EAAK,EAE5CC,EAAAA,UAAU,IAAM,CACIC,KAEHH,EAAW,EAAI,CAChC,EAAG,CAAE,CAAA,EAEL,MAAMI,EAAoB,WAAWZ,EAAe,SAAU,CAAA,EAAI,EAC5Da,EAAUd,GAAUD,EAAgB,QAAU,OAEpDC,EAASD,EAAgBC,EAAS,GACrBZ,EAACoB,EAEVpB,GAAc,CACZ,MAAO,CACL,OAAQ,CACN,SAAUG,GAAY,GACtB,KAAMwB,EAA0B,IAClC,EACA,QAAS,CACP,SAAUxB,GAAY,GACtB,KAAMwB,EAA0B,IAClC,CACF,EACA,KAAM,CACJ,OAAQ,CACN,SAAUxB,GAAY,GACtB,KAAMwB,EAA0B,IAClC,EACA,QAAS,CACP,SAAUxB,GAAY,GACtB,KAAMwB,EAA0B,IAClC,CACF,CAAA,EArBF,CAAE,MAAO,CAAE,SAAU,CAAA,CAAI,EAuB7B1B,EAAgBU,EACZV,EACA,CACE,GAAGA,EACH,KAAM,CACJ,GAAGA,GAAA,YAAAA,EAAe,KAClB,QAASwB,EAAoB,QAAU,MACzC,CAAA,EAGN,MAAMG,EAAS,CACb,iBAAA9B,EACA,eAAAe,EACA,aAAAC,EACA,WAAAd,EACA,cAAAC,EACA,MAAAC,EACA,SAAAC,CAAA,EAGI0B,EAAmB,CACvB,EAAG,OACH,GAAGZ,CAAA,EAGL,OACGa,EAAAC,EAAA,CAAgB,QAAS,GAAO,OAAAH,EAC9B,SACChB,EAAAkB,EAACE,EAAG,IAAH,CACC,GAAIC,EAAO,IACX,IAAAd,EACA,UAAWe,EAAG,cAAenB,CAAS,EACrC,GAAGG,EACH,GAAGV,EACJ,OAAAoB,EACA,QAAAF,EACA,QAASf,EAAgB,OAAS,GAClC,MAAOkB,EACP,MAAO,CACL,SAAU,SACV,QAAS,QACT,GAAGb,CACL,CAAA,CAAA,EAEA,IACN,CAAA,CAEJ,CACF"}