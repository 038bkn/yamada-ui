import{u as h}from"./index-f1306a69.js";import{u as k}from"./index-690d7341.js";import{r as g}from"./index-de62f0e0.js";import{g as A,k as u,v as $,w,x as S,y as C,j as M}from"./factory-07cc9cf0.js";import{u as b,g as j}from"./theme-326cd56d.js";const y=(t,r)=>(o,s)=>{const n=M(o,`${t}.${r}`);if(u(n)){const[e,m]=n;return s==="light"?e:m}else return n},E=t=>(r,o)=>Object.entries(t).reduce((s,[n,e])=>(n==="duration"&&(e=y("transitions.duration",e)(r,o)??e),n==="timingFunction"&&(e=y("transitions.easing",e)(r,o)??e),s[n]=e,s),{}),p=(t,r)=>(o,s)=>{const n=S(t)(o),{duration:e="0s",timingFunction:m="ease",delay:f="0s",iterationCount:l="1",direction:c="normal",fillMode:a="none",playState:i="running"}=E(r)(o,s);return`${C(n)} ${e} ${m} ${f} ${l} ${c} ${a} ${i}`},R=t=>{const{theme:r}=b(),{colorMode:o}=A();if(u(t))return t.map(s=>{const{keyframes:n,...e}=s;return p(n,e)(r,o)}).join(", ");{const{keyframes:s,...n}=t;return p(s,n)(r,o)}},W=(t,r)=>{const{theme:o}=b(),{colorMode:s}=A(),n=g.useRef($(r)?void 0:u(r)?r.map(String):String(r)),e=g.useRef(new Map),[m,f]=g.useState(()=>{for(const[c,a]of Object.entries(t)){if(e.current.has(c))return;if(u(a))e.current.set(c,a.map(({keyframes:i,...d})=>p(i,d)(o,s)).join(", "));else{const{keyframes:i,...d}=a;e.current.set(c,p(i,d)(o,s))}}return u(n.current)?n.current.map(c=>e.current.get(c)).join(", "):e.current.get(n.current??"")}),l=g.useCallback(c=>{const a=(()=>!$(n.current)&&u(t)?u(n.current)?n.current.map(Number):Number(n.current):n.current)(),i=w(c,a);n.current=u(i)?i.map(String):String(i),u(n.current)?f(n.current.map(d=>e.current.get(d)).join(", ")):f(e.current.get(n.current??""))},[t]);return[m,l]},z=({isOpen:t,ref:r})=>{const[o,s]=g.useState(t),[n,{on:e}]=h();return g.useEffect(()=>{n||(s(t),e())},[t,n,e]),k(()=>r.current,"animationend",()=>s(t)),{present:!(t?!1:!o),onAnimationComplete(){var c;const f=j(r.current),l=new f.CustomEvent("animationend",{bubbles:!0});(c=r.current)==null||c.dispatchEvent(l)}}};export{W as a,z as b,R as u};
//# sourceMappingURL=index-ebf28f83.js.map
