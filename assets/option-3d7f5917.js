import{a as F,j as Ce}from"./jsx-runtime-03b4ddbf.js";import{u as De}from"./index-042574bb.js";import{r as s}from"./index-76fb7be0.js";import{c as we,a as Oe}from"./icon-583bdc7e.js";import{f as Q}from"./forward-ref-8b7d2a6f.js";import{p as Fe,A as Te,N as be,O as he,n as H,l as Ee,h as Re,T as _e,x as se,w as $,z as ve,J as te,t as Ae,d as V,e as G,j as Ne}from"./factory-0b90ba06.js";import{b as Le}from"./popover-content-abd8b60e.js";import{u as je}from"./index-6644b833.js";import{c as Be}from"./index-7be4063c.js";import{u as Me}from"./index-afacb5b2.js";import{u as He,f as Ve}from"./form-control-656e66ed.js";import{m as Ge,i as Ke,d as q,a as me,p as Ue}from"./theme-provider-89b34f8f.js";const ze=l=>{var c;return Ue(l)&&!!((c=l==null?void 0:l.getAttribute("role"))!=null&&c.startsWith("select-item"))},{DescendantsContextProvider:pt,useDescendantsContext:ge,useDescendants:We,useDescendant:Je}=Be(),[xt,j]=Fe({strict:!1,name:"SelectContext"}),mt=({defaultIsOpen:l,placeholder:c,closeOnBlur:a=!0,closeOnEsc:u=!0,closeOnSelect:r=!0,placeholderInOptions:x=!0,omitSelectedValues:n=!1,maxSelectedValues:d,isEmpty:v,placement:g="bottom-start",duration:S=.2,optionProps:y,...o})=>{o=He(o);const f=Te(o,Ve),C=be(o,he),i=We(),[m,b]=s.useState(-1),[z,X]=s.useState(!1),k=s.useRef(null),Z=s.useRef(null),ne=s.useRef(null),D=s.useRef(new Set([])),[P,K]=je({value:o.value,defaultValue:o.defaultValue,onChange:o.onChange}),[M,W]=s.useState(void 0),N=m>-1,h=H(P),L=(h?!P.length:!P)&&!(c&&x),T=i.values(({node:e})=>h&&P.includes(e.dataset.value??"")).map(({index:e})=>e),E=i.enabledValues(({index:e})=>!T.includes(e)),w=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledfirstValue();if(t)if(!h||!n)b(t.index);else if(T.includes(t.index)){const I=E[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,E,h,n,T]),U=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledlastValue();if(t)if(!h||!n)b(t.index);else if(T.includes(t.index)){const I=E.reverse()[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,E,h,n,T]),oe=s.useCallback(()=>{const e=setTimeout(()=>{const I=i.enabledValues().find(({node:A})=>h?P.includes(A.dataset.value??""):A.dataset.value===P);I&&b(I.index)});D.current.add(e)},[i,h,P]),J=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledNextValue(m);if(t)if(!h||!n)b(t.index);else if(T.includes(t.index)){const I=E.find(({index:A})=>t.index<A)??E[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,E,m,h,n,T,b]),le=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledPrevValue(m);if(t)if(!h||!n)b(t.index);else if(T.includes(t.index)){const I=E.reverse().find(({index:A})=>A<t.index)??E[0];b(I.index)}else b(t.index)});D.current.add(e)},[i,E,m,h,n,T,b]),B=L||n?w:oe,re=L||n?U:oe,ce=s.useCallback((e,t=!0)=>{const A=i.values().filter(({node:O})=>O.dataset.value===e).map(({node:O,index:Y})=>!(c&&x)||Y!==0?O.textContent??"":void 0);W(O=>h?(A.forEach(Y=>{H(O)&&O.includes(Y??"")?t&&(O=H(O)?O.filter(Ie=>Ie!==Y):void 0):O=[...H(O)?O:[],Y]}),O):A[0])},[i,h,c,x]),ae=s.useCallback(e=>{K(t=>H(t)?t.includes(e)?t.filter(A=>A!==e):[...t,e]:e),ce(e)},[ce,K]),ke=s.useCallback(e=>{e.stopPropagation(),K([]),W(void 0)},[W,K]),[p,ue]=s.useState(l??!1),R=s.useCallback(()=>{var e;f.disabled||f.readOnly||v||z||(ue(!0),(e=o.onOpen)==null||e.call(o))},[f,v,z,o]),_=s.useCallback(()=>{var e;ue(!1),(e=o.onClose)==null||e.call(o)},[o]),ie=s.useCallback(()=>{let e=i.value(m);if("disabled"in((e==null?void 0:e.node.dataset)??{})&&(e=void 0),!e)return;const t=e.node.dataset.value??"";ae(t),r&&_(),n&&J()},[r,i,m,n,ae,_,J]),de=s.useCallback(()=>{p||(R(),B())},[p,B,R]),fe=s.useCallback(()=>{p||(R(),B())},[p,B,R]),pe=s.useCallback(e=>{const t=Ge(e);Ke(k.current,t)||a&&p&&_()},[a,p,_]),xe=s.useCallback(e=>{if(e.key===" "&&(e.key=e.code),f.disabled||f.readOnly)return;const I={ArrowDown:N?()=>J():p?void 0:te(R,B),ArrowUp:N?()=>le():p?void 0:te(R,re),Space:N?ie:p?void 0:te(R,B),Enter:N?ie:p?void 0:te(R,B),Home:p?w:void 0,End:p?U:void 0,Escape:u?_:void 0}[e.key];I&&(e.preventDefault(),e.stopPropagation(),I())},[f.disabled,f.readOnly,N,p,R,B,re,ie,w,U,u,_,J,le]);Me({ref:k,handler:_,enabled:a}),s.useEffect(()=>{if(!h||!n&&Ee(d))return;const e=P.length>0&&P.length===i.count(),t=P.length===d;e||t?(_(),X(!0)):X(!1)},[n,P,i,h,_,d]),Re(()=>{p||b(-1)},[p]),_e(()=>{D.current.forEach(e=>clearTimeout(e)),D.current.clear()});const ye=s.useCallback(e=>({...o,...e,isOpen:p,onOpen:R,onClose:_,placement:g,duration:S,trigger:"never",closeOnButton:!1}),[S,_,R,g,o,p]),Se=s.useCallback((e={},t=null)=>({ref:se(k,t),...C[0],...e,...f,onClick:$(e.onClick,o.onClick,de),onFocus:$(e.onFocus,o.onFocus,fe),onBlur:$(e.onBlur,o.onBlur,pe)}),[C,f,pe,de,fe,o]),Pe=s.useCallback((e={},t=null)=>({ref:se(Z,t),tabIndex:0,...ve(C[1],["value","defaultValue","onChange"]),...e,"data-active":q(p),"data-placeholder":q(h?!(M!=null&&M.length):M===void 0),"aria-expanded":q(p),onKeyDown:$(e.onKeyDown,o.onKeyDown,xe)}),[C,p,h,M,o,xe]);return{descendants:i,value:P,displayValue:M,focusedIndex:m,placeholder:c,placeholderInOptions:x,omitSelectedValues:n,closeOnSelect:r,isOpen:p,containerRef:k,fieldRef:Z,listRef:ne,optionProps:y,formControlProps:f,onChangeDisplayValue:ce,onChange:ae,onClear:ke,onOpen:R,onClose:_,onFocusFirst:w,onFocusLast:U,onFocusSelected:oe,onFocusNext:J,onFocusPrev:le,setFocusedIndex:b,getPopoverProps:ye,getContainerProps:Se,getFieldProps:Pe}},Ye=()=>{const{listRef:l,focusedIndex:c}=j(),a=ge(),u=s.useRef(-1),r=a.value(c);return s.useEffect(()=>{if(!l.current||!r||u.current===r.index)return;const n=l.current,d=r.node,v=n.clientHeight,g=n.scrollTop,S=g+v,y=d.clientHeight,o=d.offsetTop,f=o+y,C=g<=o&&f<=S,i=u.current<r.index;C||(f<=v?l.current.scrollTo({top:0}):i?l.current.scrollTo({top:f-v}):l.current.scrollTo({top:o+1})),u.current=r.index},[l,r]),{getListProps:s.useCallback((n={},d=null)=>({as:"ul",ref:se(l,d),role:"select",tabIndex:-1,...n}),[l])}},$e=({label:l,...c})=>{const{value:a,omitSelectedValues:u}=j(),r=H(a),x=ge(),n=x.values(),v=(r&&u?x.values(({node:C})=>a.includes(C.dataset.value??"")):[]).map(({index:C})=>C),S=!n.filter(({node:C,index:i})=>{var m;return((m=C.parentElement)==null?void 0:m.dataset.label)===l&&!v.includes(i)}).length,y=be(c,he),o=s.useCallback((C={},i=null)=>{const m={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};return{ref:i,...C,...y[0],style:S?m:void 0}},[y,S]),f=s.useCallback((C={},i=null)=>({ref:i,...C,...y[1],"data-label":l}),[y,l]);return{label:l,getContainerProps:o,getGroupProps:f}},qe=(l,c)=>{const{fieldRef:a,value:u,placeholder:r,placeholderInOptions:x,omitSelectedValues:n,closeOnSelect:d,focusedIndex:v,optionProps:g,onChange:S,onChangeDisplayValue:y,onFocusNext:o,onClose:f,setFocusedIndex:C}=j();let{icon:i,isDisabled:m,isFocusable:b,closeOnSelect:z,children:X,...k}={...g,...c};const Z=!!m&&!b,ne=s.useRef(null),{index:D,register:P,descendants:K}=Je({disabled:Z}),W=K.values().slice(0,D),N=H(u),L=!(N?!1:W.some(({node:w})=>w.dataset.value===(k.value??"")))&&(N?u.includes(k.value??""):(k.value??"")===u),ee=D===v;r&&D>0&&x&&!k.value&&console.warn(`${N?"MultiSelect":"Select"}: If placeholders are present, All options must be set value. If want to set an empty value, either don't set the placeholder or set 'placeholderInOptions' to false.`);const T=s.useCallback(w=>{if(w.preventDefault(),w.stopPropagation(),m){a.current&&a.current.focus();return}if(!ze(w.currentTarget)){a.current&&a.current.focus();return}C(D),S(k.value??""),a.current&&a.current.focus(),(z??d)&&f(),n&&o()},[m,C,D,S,k.value,a,z,d,f,n,o]);s.useEffect(()=>{L&&y(k.value??"",!1)},[k,L,y]);const E=s.useCallback((w={})=>{const U={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};return{ref:se(ne,l,P),...ve(k,["value"]),...w,role:"select-item",tabIndex:-1,style:n&&L?U:void 0,"data-value":k.value??"","data-focus":q(ee),"data-disabled":q(m),"aria-checked":me(L),"aria-disabled":me(m),onClick:$(k.onClick,w.onClick,T)}},[k,m,ee,L,n,T,l,P]);return{isSelected:L,isFocused:ee,customIcon:i,children:X,getOptionProps:E}},Qe=Q(({className:l,children:c,__css:a,...u},r)=>{const{styles:x}=j(),n={position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",cursor:"pointer",...x.icon,...a},v=Ae(c).map(g=>s.cloneElement(g,{focusable:!1,"aria-hidden":!0,style:{maxWidth:"1em",maxHeight:"1em",color:"currentColor"}}));return F(V.div,{ref:r,className:G("ui-select-icon",l),__css:n,...u,children:Ne(c)?v:F(we,{})})}),Ct=({className:l,children:c,...a})=>{const u=s.useRef(null),{styles:r}=j(),x=a.disabled,n=De({ref:u,isDisabled:x,...a});return F(Qe,{className:G("ui-select-clear-icon",l),__css:r.clearIcon,...n,children:c??F(Oe,{w:"0.5em",h:"0.5em"})})},bt=Q(({className:l,w:c,width:a,minW:u,minWidth:r,...x},n)=>{var S,y,o,f;const{styles:d}=j(),{getListProps:v}=Ye();c=c??a??((S=d.list)==null?void 0:S.w)??((y=d.list)==null?void 0:y.width),u=u??r??((o=d.list)==null?void 0:o.minW)??((f=d.list)==null?void 0:f.minWidth);const g={...d.list};return F(Le,{className:G("ui-select-list",l),w:c,minW:u,__css:g,...v(x,n)})}),ht=Q(({className:l,color:c,h:a,height:u,minH:r,minHeight:x,children:n,...d},v)=>{const{styles:g}=j(),{label:S,getContainerProps:y,getGroupProps:o}=$e(d);return a=a??u,r=r??x,Ce(V.li,{className:"ui-select-group-container",__css:{w:"100%",h:"fit-content",color:c},...y(),children:[F(V.span,{className:G("ui-select-group-label"),__css:g.groupLabel,noOfLines:1,children:S}),F(V.ul,{...o({},v),className:G("ui-select-group",l),__css:{h:a,minH:r,...g.group},children:n})]})}),vt=Q(({className:l,icon:c,...a},u)=>{const{styles:r}=j(),{isSelected:x,customIcon:n,children:d,getOptionProps:v}=qe(u,a);c=c??n;const g={textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,gap:"0.75rem",...r.item};return Ce(V.li,{className:G("ui-select-item",l),__css:g,...v(),children:[c!==null?F(Xe,{opacity:x?1:0,children:c||F(Ze,{})}):null,c?F(V.span,{style:{pointerEvents:"none",flex:1},noOfLines:1,children:d}):d]})}),Xe=Q(({className:l,...c},a)=>{const{styles:u}=j(),r={flexShrink:0,display:"inline-flex",justifyContent:"center",alignItems:"center",fontSize:"0.85em",...u.itemIcon};return F(V.span,{ref:a,className:G("ui-select-item-icon",l),__css:r,...c})}),Ze=()=>F("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",children:F("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})});export{vt as O,pt as S,ht as a,xt as b,Qe as c,bt as d,j as e,Ct as f,mt as u};
//# sourceMappingURL=option-3d7f5917.js.map
