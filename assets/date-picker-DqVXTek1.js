import{j as s}from"./jsx-runtime-Nms4Y4qS.js";import{u as Le}from"./index-CdDwrvH_.js";import{r as o}from"./index-BwDkhjyp.js";import{d as te,i as we,a as Fe,b as qe,C as Ge}from"./ja-D6y_fMvh.js";import{u as Je}from"./index-u-fx22o1.js";import{u as Qe}from"./index-B23F1OXS.js";import{u as Xe}from"./index-CjsZkEUh.js";import{u as Ze,f as $e}from"./form-control-DW6UA4eT.js";import{p as et,P as tt,b as ot,a as nt}from"./popover-content-C1IOqW15.js";import{u as at,o as st}from"./theme-provider-Bovkq8wz.js";import{T as rt,a1 as lt,a2 as it,R as ct,a9 as ut,U as pt,a as oe,h as A,d as dt,l as ft,f as Ve,aa as mt,b as U,c as W,B as Ct,t as Pt,j as ht}from"./factory-DijdQyQR.js";import{P as gt}from"./container-portal-DTOv7Gs6.js";import{b as kt,a as bt}from"./icon-BK_bL1Yg.js";import{f as ne}from"./forward-ref-BmTAT9U5.js";import{a as yt}from"./use-component-style-Bw-pmo7H.js";const _t=c=>{var Ie,Oe;const{theme:u}=at();let{id:r,closeOnBlur:f=!0,closeOnEsc:P=!0,placement:m="bottom-start",duration:i=.2,enableMultiple:C,enableRange:h,value:g,defaultValue:D,onChange:E,type:O,defaultType:j,onChangeType:R,month:I,defaultMonth:B,onChangeMonth:S,firstDayOfWeek:N,amountOfMonths:M,paginateBy:H,withWeekdays:z,disableOutsideDays:T,hiddenOutsideDays:k,minDate:p,maxDate:d,locale:t,yearFormat:a,monthFormat:b,weekdayFormat:L,dateFormat:se,weekendDays:re,today:le,excludeDate:y,calendarVariant:ie,calendarSize:ce,calendarColorScheme:ue,holidays:pe,withHeader:de,withControls:fe,withLabel:me,maxSelectValues:Ce,__selectType:Pe,calendarProps:he,allowInput:_=!0,allowInputBeyond:q=!1,parseDate:G,pattern:Re=/[^0-9\-\/]/g,inputFormat:J="YYYY/MM/DD",autoFocus:Y=!0,isOpen:Be,defaultIsOpen:Te,onOpen:Se,onClose:Ne,onClear:Q,onEnter:ge,onDelete:ke,...v}=Ze(c);r??(r=o.useId()),t??(t=((Oe=(Ie=u.__config)==null?void 0:Ie.date)==null?void 0:Oe.locale)??"en");const{"aria-readonly":Ot,...w}=rt(v,$e),[be,Me]=lt(ct(v,et),it),{disabled:X,readOnly:Z}=w,{isOpen:l,onOpen:ye,onClose:F}=Qe({isOpen:Be,defaultIsOpen:Te,onOpen:Se,onClose:Ne}),$=o.useRef(null),K=o.useRef(null),He=o.useCallback(e=>{let n=(G==null?void 0:G(e))??te(e,J,t).toDate();if(n!=null&&!(y!=null&&y(n)))return q||(d&&we(n,d)&&(n=d),p&&Fe(n,p)&&(n=p)),n},[q,y,J,t,d,p,G]),ze=o.useCallback(e=>{if(e!=null&&!(y!=null&&y(e)))return q||(d&&we(e,d)&&(e=d),p&&Fe(e,p)&&(e=p)),te(e).locale(t??"en").format(J)},[q,y,J,t,d,p]),x=o.useCallback(()=>{var e;X||Z||(ye(),Y&&_&&((e=K.current)==null||e.focus()))},[Y,_,X,Z,ye]),_e=o.useCallback(()=>{var e;l?Y&&_&&((e=K.current)==null||e.focus()):x()},[Y,_,l,x]),ve=o.useCallback(()=>{l||x()},[l,x]),xe=o.useCallback(e=>{const n=ut(e);pt($.current,n)||f&&l&&F()},[f,l,F]),De=o.useCallback(e=>{if(e.key===" "&&(e.key=e.code),X||Z)return;const ee={Space:l?void 0:V=>{V.preventDefault(),V.stopPropagation(),x()},Enter:l?ge:V=>{V.preventDefault(),V.stopPropagation(),x()},Escape:P?V=>{V.preventDefault(),V.stopPropagation(),F()}:void 0,Backspace:ke}[e.key];ee&&ee(e)},[P,X,Z,l,F,ge,ke,x]),je=o.useCallback(e=>{var n;e.stopPropagation(),Q==null||Q(),Y&&_&&l&&((n=K.current)==null||n.focus())},[Y,_,l,Q]);Xe({ref:$,handler:F,enabled:l&&f});const Ye=o.useCallback((e={},n=null)=>({ref:oe($,n),...be,...e,...w,onClick:A(e.onClick,v.onClick,_e),onBlur:A(e.onBlur,v.onBlur,xe)}),[be,w,xe,_e,v]),Ae=o.useCallback(e=>({...v,...e,isOpen:l,onOpen:x,onClose:F,placement:m,duration:i,trigger:"never",closeOnButton:!1,closeOnBlur:!1}),[i,l,F,x,m,v]),Ke=o.useCallback((e={},n=null)=>{const ee={...e.style,..._?{}:{cursor:"pointer"}};return{ref:oe(K,n),tabIndex:_?-1:0,role:"combobox","aria-haspopup":"dialog","aria-controls":r,...e,...w,style:ee,"data-active":dt(l),"aria-expanded":l,onFocus:A(e.onFocus,v.onFocus,ve),onKeyDown:A(e.onKeyDown,v.onKeyDown,De)}},[r,_,w,l,v,ve,De]),Ue=o.useCallback(e=>({...e,type:O,defaultType:j,onChangeType:R,month:I,defaultMonth:B,onChangeMonth:S,firstDayOfWeek:N,amountOfMonths:M,paginateBy:H,withWeekdays:z,disableOutsideDays:T,hiddenOutsideDays:k,yearFormat:a,monthFormat:b,weekdayFormat:L,dateFormat:se,weekendDays:re,today:le,holidays:pe,withHeader:de,withControls:fe,withLabel:me,maxSelectValues:Ce,variant:ie,size:ce,colorScheme:ue,...he,value:g,defaultValue:D,onChange:E,minDate:p,maxDate:d,excludeDate:y,locale:t,__selectType:Pe,enableMultiple:C,enableRange:h}),[k,Ce,C,h,M,ue,he,ce,ie,se,B,j,D,T,y,N,pe,t,d,p,I,b,E,S,R,H,le,O,g,L,re,fe,de,me,z,a,Pe]),We=o.useCallback(({clear:e,...n})=>({...n,...w,onClick:A(n.onClick,e?je:void 0)}),[w,je]);return{id:r,allowInput:_,pattern:Re,inputProps:Me,formControlProps:w,containerRef:$,inputRef:K,isOpen:l,onOpen:x,onClose:F,dateToString:ze,stringToDate:He,getContainerProps:Ye,getPopoverProps:Ae,getFieldProps:Ke,getCalendarProps:Ue,getIconProps:We}},[vt,ae]=ft({strict:!1,name:"DatePickerContext"}),xt=({value:c,defaultValue:u,onChange:r,placeholder:f,closeOnSelect:P=!0,...m})=>{const[i,C]=Je({value:c,defaultValue:u,onChange:r,onUpdate:(t,a)=>!qe(t,a)}),{inputRef:h,id:g,allowInput:D,pattern:E,inputProps:O,formControlProps:j,onClose:R,dateToString:I,stringToDate:B,getContainerProps:S,getPopoverProps:N,getFieldProps:M,getCalendarProps:H,getIconProps:z}=_t({...m,value:i,defaultValue:u,onChange:t=>{const a=I(t);C(t),k(a),P&&t&&R()},onClear:()=>{C(void 0),k(void 0)},onClose:()=>{var a;const t=I(i);k(t),(a=m.onClose)==null||a.call(m)}}),[T,k]=o.useState(I(i)),p=o.useCallback(t=>{let a=t.target.value;a=a.replace(E,"");const b=B(a);k(a),b&&te(b).isValid()?C(b):C(void 0)},[E,B,k,C]);Ve(()=>{C(c)},[c]),Ve(()=>{if(h.current&&mt(h.current))return;const t=I(i);k(t)},[i]);const d=o.useCallback((t={},a=null)=>{const b={...t.style,...O.style,...D?{}:{pointerEvents:"none"}};return{placeholder:f,...j,autoComplete:"off",...O,...t,ref:a,style:b,id:g,tabIndex:D?0:-1,value:T??"",cursor:j.readOnly?"default":"text",pointerEvents:j.disabled?"none":"auto",onChange:A(t.onChange,p)}},[O,D,f,j,g,T,p]);return{id:g,value:i,onClose:R,getContainerProps:S,getPopoverProps:N,getFieldProps:M,getInputProps:d,getIconProps:z,getCalendarProps:H}},Ut=ne((c,u)=>{const[r,f]=yt("DatePicker",c);let{className:P,children:m,isClearable:i=!0,color:C,h,height:g,minH:D,minHeight:E,containerProps:O,contentProps:j,fieldProps:R,inputProps:I,iconProps:B,clearIconProps:S,portalProps:N={isDisabled:!0},...M}=st(f);const{getPopoverProps:H,getContainerProps:z,getCalendarProps:T,getFieldProps:k,getInputProps:p,getIconProps:d,onClose:t,value:a,id:b}=xt(M);h??(h=g),D??(D=E);const L={w:"100%",h:"fit-content",color:C,...r.container};return s.jsx(vt,{value:r,children:s.jsx(tt,{...H(),children:s.jsxs(U.div,{className:W("ui-date-picker",P),__css:L,...z(O),children:[s.jsxs(U.div,{className:"ui-date-picker__inner",__css:{position:"relative",...r.inner},children:[s.jsx(Dt,{...k({h,minH:D,...R},u),inputProps:p(I)}),i&&a?s.jsx(It,{...d({clear:!0,...S})}):s.jsx(Ee,{...d({clear:!1,...B})})]}),s.jsx(gt,{...N,children:s.jsxs(ot,{as:"div",id:b,role:"dialog","aria-modal":"true",className:"ui-date-picker__content",__css:{...r.content},...j,children:[s.jsx(Ge,{className:"ui-date-picker__calendar",...T()}),Ct(m,{value:a,onClose:t})]})})]})})})}),Dt=ne(({className:c,h:u,minH:r,inputProps:f,...P},m)=>{const i=ae(),{ref:C,...h}=f,g={pe:"2rem",h:u,minH:r,display:"flex",alignItems:"center",...i.field};return s.jsx(nt,{children:s.jsx(U.div,{className:W("ui-date-picker__field",c),__css:g,...P,children:s.jsx(U.input,{"aria-label":"Input date value",ref:oe(m,C),className:"ui-date-picker__field__input",display:"inline-block",w:"100%",...h})})})}),Ee=ne(({className:c,children:u,__css:r,...f},P)=>{const i={position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",cursor:"pointer",...ae().icon,...r},h=Pt(u).map(g=>o.cloneElement(g,{focusable:!1,"aria-hidden":!0,style:{maxWidth:"1em",maxHeight:"1em",color:"currentColor"}}));return s.jsx(U.div,{ref:P,className:W("ui-date-picker__icon",c),__css:i,...f,children:ht(u)?h:s.jsx(jt,{})})}),jt=({className:c,...u})=>s.jsx(kt,{className:W("ui-date-picker__icon__calendar",c),viewBox:"0 0 24 24",...u,children:s.jsx("path",{fill:"currentColor",d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),It=({className:c,children:u,...r})=>{const f=o.useRef(null),P=ae(),m=r.disabled,i=Le({ref:f,isDisabled:m,...r});return s.jsx(Ee,{"aria-label":"Clear value",className:W("ui-date-picker__icon--clear",c),__css:P.clearIcon,...i,children:u??s.jsx(bt,{w:"0.5em",h:"0.5em"})})};export{Ut as D,vt as a,Dt as b,It as c,Ee as d,ae as e,_t as u};
