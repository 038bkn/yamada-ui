import{u as k}from"./index-7733ff91.js";import{a as y}from"./index-2c974345.js";import{r as g}from"./index-1cdf6ce0.js";import{a as b,l as a,B as $,x as C,C as S,D as w,k as M}from"./factory-75cc801c.js";import{u as h,j}from"./theme-8f32df8a.js";const A=(t,r)=>(o,s)=>{const n=M(o,`${t}.${r}`);if(a(n)){const[e,m]=n;return s==="light"?e:m}else return n},E=t=>(r,o)=>Object.entries(t).reduce((s,[n,e])=>(n==="duration"&&(e=A("transitions.duration",e)(r,o)??e),n==="timingFunction"&&(e=A("transitions.easing",e)(r,o)??e),s[n]=e,s),{}),p=(t,r)=>(o,s)=>{const n=S(t)(o),{duration:e="0s",timingFunction:m="ease",delay:f="0s",iterationCount:l="1",direction:c="normal",fillMode:u="none",playState:i="running"}=E(r)(o,s);return`${w(n)} ${e} ${m} ${f} ${l} ${c} ${u} ${i}`},N=t=>{const{theme:r}=h(),{colorMode:o}=b();if(a(t))return t.map(s=>{const{keyframes:n,...e}=s;return p(n,e)(r,o)}).join(", ");{const{keyframes:s,...n}=t;return p(s,n)(r,o)}},R=(t,r)=>{const{theme:o}=h(),{colorMode:s}=b(),n=g.useRef($(r)?void 0:a(r)?r.map(String):String(r)),e=g.useRef(new Map),[m,f]=g.useState(()=>{for(const[c,u]of Object.entries(t)){if(e.current.has(c))return;if(a(u))e.current.set(c,u.map(({keyframes:i,...d})=>p(i,d)(o,s)).join(", "));else{const{keyframes:i,...d}=u;e.current.set(c,p(i,d)(o,s))}}return a(n.current)?n.current.map(c=>e.current.get(c)).join(", "):e.current.get(n.current??"")}),l=g.useCallback(c=>{const u=(()=>!$(n.current)&&a(t)?a(n.current)?n.current.map(Number):Number(n.current):n.current)(),i=C(c,u);n.current=a(i)?i.map(String):String(i),a(n.current)?f(n.current.map(d=>e.current.get(d)).join(", ")):f(e.current.get(n.current??""))},[t]);return[m,l]},W=({isOpen:t,ref:r})=>{const[o,s]=g.useState(t),[n,{on:e}]=k();return g.useEffect(()=>{n||(s(t),e())},[t,n,e]),y(()=>r.current,"animationend",()=>s(t)),{present:!(t?!1:!o),onAnimationComplete(){var c;const f=j(r.current),l=new f.CustomEvent("animationend",{bubbles:!0});(c=r.current)==null||c.dispatchEvent(l)}}};export{R as a,W as b,N as u};
//# sourceMappingURL=index-5f528f7c.js.map
