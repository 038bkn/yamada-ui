import{j as g}from"./jsx-runtime-Nms4Y4qS.js";import{r as n}from"./index-BwDkhjyp.js";import{f as y}from"./forward-ref-BmTAT9U5.js";import{r as x,t as z,b as L,c as H,a as $}from"./factory-BXeT7qA-.js";const V=y(({direction:s="column",justify:e,align:a,wrap:w,gap:o="fallback(md, 1rem)",divider:h,className:_,children:N,...R},j)=>{const u=t=>t==="column"||t==="column-reverse",W=n.useMemo(()=>({w:x(s,t=>u(t)?"100%":"fit-content"),h:x(s,t=>u(t)?"fit-content":"100%"),borderLeftWidth:x(s,t=>u(t)?0:"1px"),borderBottomWidth:x(s,t=>u(t)?"1px":0)}),[s]),S=z(N),E=h?S.map((t,k)=>{const c=typeof t.key<"u"?t.key:k,d=n.cloneElement(h,{__css:W});return g.jsxs(n.Fragment,{children:[k?d:null,t]},c)}):S,v=n.useMemo(()=>({display:"flex",flexDirection:s,justifyContent:e,alignItems:a,flexWrap:w,gap:o}),[a,s,w,o,e]);return g.jsx(L.div,{ref:j,className:H("ui-stack",_),__css:v,...R,children:E})}),O=y(({className:s,...e},a)=>g.jsx(V,{ref:a,className:H("ui-stack--horizontal",s),direction:"row",align:"center",...e})),P=y(({className:s,...e},a)=>g.jsx(V,{ref:a,className:H("ui-stack--vertical",s),direction:"column",align:"stretch",w:"100%",...e})),q=y(({className:s,direction:e="bottom",startIndex:a=0,gap:w="fallback(md, 1rem)",reverse:o=!1,fit:h=!0,children:_,...N},R)=>{const j=n.useRef(new Map),[u,W]=n.useState({width:0,height:0}),S={minWidth:`${u.width}px`,minHeight:`${u.height}px`},E={position:"relative",overflow:"hidden",var:[{__prefix:"ui",name:"space",token:"spaces",value:w}],...h?S:{}},v=n.useCallback(c=>e.includes("top")?{[o?"top":"bottom"]:c}:e.includes("bottom")?{[o?"bottom":"top"]:c}:{[o?"bottom":"top"]:0},[e,o]),t=n.useCallback(c=>e.includes("left")?{[o?"left":"right"]:c}:e.includes("right")?{[o?"right":"left"]:c}:{[o?"right":"left"]:0},[e,o]),k=n.useMemo(()=>z(_).map((i,f)=>{const b=n.createRef();j.current.set(f,b);const l=i.key??f,p=a+f,m=`calc(var(--ui-space) * ${f})`;let r={};r={...r,position:"absolute",zIndex:p},r={...r,...v(m)},r={...r,...t(m)};const C={...i.props,ref:$(i.ref,b),__css:r},M=n.cloneElement(i,C);return g.jsx(n.Fragment,{children:M},l)}),[_,a,v,t]);return n.useEffect(()=>{if(!h)return;let c=e.includes("left"),d=e.includes("top"),i=0,f=0;o&&(c=!c,d=!d);for(const b of j.current.values()){if(!b.current)continue;let{offsetParent:l,offsetWidth:p,offsetHeight:m,offsetTop:r,offsetLeft:C}=b.current;l&&(c&&(C=((l==null?void 0:l.offsetWidth)??0)-C-p),d&&(r=((l==null?void 0:l.offsetHeight)??0)-r-m),p+=C,m+=r,p>i&&(i=p),m>f&&(f=m))}W({width:i,height:f})},[k,e,o,h]),g.jsx(L.div,{ref:R,className:H("ui-stack--depth",s),__css:E,...N,children:k})});export{O as H,V as S,P as V,q as Z};
