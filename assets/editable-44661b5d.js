import{j as D}from"./jsx-runtime-29545a09.js";import{u as ne}from"./index-335d7bc6.js";import{u as oe}from"./index-cb315714.js";import{r as o}from"./index-76fb7be0.js";import{u as se,f as q}from"./form-control-e5cbff80.js";import{o as ae,i as H}from"./theme-d25050a9.js";import{o as ie,x as le,d as K,e as _,y as T,c as re,f as ue,h as ce,z as M,w as k,v as d}from"./factory-693455ee.js";import{f as A}from"./forward-ref-8b7d2a6f.js";import{a as de}from"./use-component-style-3d3df90d.js";const fe=f=>{const{id:r,placeholder:i,defaultValue:b,required:u,disabled:s,readOnly:c,startWithEditView:N,isPreviewFocusable:v=!0,submitOnBlur:y=!0,selectAllOnFocus:w=!0,...t}=se(f);t.onEdit=re(t.onEdit);const[a,x]=o.useState(!!N&&!s),[l,p]=ne({defaultValue:b||"",value:t.value,onChange:t.onChange}),h=!a&&!s,F=l.length===0,[S,V]=o.useState(l),m=o.useRef(null),J=o.useRef(null),U=o.useRef(null),j=o.useRef(null),z=o.useRef(null);oe({ref:m,enabled:a,elements:[j,z]}),ue(()=>{var e,n;a&&((e=m.current)==null||e.focus(),w&&((n=m.current)==null||n.select()))},[]),ce(()=>{var e,n,E,O;if(!a){(e=U.current)==null||e.focus();return}(n=m.current)==null||n.focus(),w&&((E=m.current)==null||E.select()),(O=t.onEdit)==null||O.call(t)},[a,t.onEdit,w]),o.useEffect(()=>{if(a)return;const e=m.current;(e==null?void 0:e.ownerDocument.activeElement)===e&&(e==null||e.blur())},[a]);const I=o.useCallback(e=>p(e.currentTarget.value),[p]),P=o.useCallback(()=>V(l),[l]),R=o.useCallback(()=>{h&&x(!0)},[h]),C=o.useCallback(()=>{var e;x(!1),p(S),(e=t.onCancel)==null||e.call(t,S)},[S,t,p]),g=o.useCallback(()=>{var e;x(!1),V(l),(e=t.onSubmit)==null||e.call(t,l)},[t,l]),L=o.useCallback(e=>{if(!(e.key!=="Escape"&&e.key!=="Enter"))if(e.preventDefault(),e.key==="Escape")C();else{const{shiftKey:n,metaKey:E}=e;!n&&!E&&g()}},[C,g]),G=o.useCallback(e=>{e.key==="Escape"&&(e.preventDefault(),C())},[C]),B=o.useCallback(e=>{if(!a)return;const n=e.currentTarget.ownerDocument,E=e.relatedTarget??n.activeElement,O=H(j.current,E),te=H(z.current,E);!O&&!te&&(y?g():C())},[a,y,g,C]),Q=o.useCallback((e={},n=null)=>({...M(t,q),...e,ref:k(n,J),hidden:a,tabIndex:h&&v?0:void 0,children:F?i:l,onFocus:d(e.onFocus,R,P)}),[a,h,v,F,R,P,i,t,l]),X=o.useCallback((e={},n=null)=>({...M(t,q),...e,ref:k(n,m),id:r,placeholder:i,hidden:!a,value:l,required:u,disabled:s,readOnly:c,onBlur:d(e.onBlur,B),onChange:d(e.onChange,I),onKeyDown:d(e.onKeyDown,L),onFocus:d(e.onFocus,P)}),[s,r,a,B,I,L,P,i,c,u,t,l]),Y=o.useCallback((e={},n=null)=>({...M(t,q),...e,ref:k(n,m),id:r,placeholder:i,hidden:!a,value:l,required:u,disabled:s,readOnly:c,onBlur:d(e.onBlur,B),onChange:d(e.onChange,I),onKeyDown:d(e.onKeyDown,G),onFocus:d(e.onFocus,P)}),[s,r,a,B,I,G,P,i,c,u,t,l]),Z=o.useCallback((e={},n=null)=>({...e,...T(t,["value","onChange","onCancel","onSubmit","onEdit"]),ref:k(n,U),type:"button",disabled:s,readOnly:c,onClick:d(e.onClick,R)}),[s,R,c,t]),$=o.useCallback((e={},n=null)=>({...e,...T(t,["value","onChange","onCancel","onSubmit","onEdit"]),ref:k(z,n),type:"button",disabled:s,readOnly:c,onClick:d(e.onClick,g)}),[s,g,c,t]),ee=o.useCallback((e={},n=null)=>({...e,...T(t,["value","onChange","onCancel","onSubmit","onEdit"]),ref:k(j,n),type:"button",disabled:s,readOnly:c,onClick:d(e.onClick,C)}),[s,C,c,t]);return{isEditing:a,value:l,onEdit:R,onCancel:C,onSubmit:g,getPreviewProps:Q,getInputProps:X,getTextareaProps:Y,getEditProps:Z,getSubmitProps:$,getCancelProps:ee}},we=()=>{const{isEditing:f,getEditProps:r,getCancelProps:i,getSubmitProps:b}=W();return{isEditing:f,getEditProps:r,getCancelProps:i,getSubmitProps:b}},[be,W]=ie({name:"EditableContext",errorMessage:"useEditableContext: context is undefined. Seems you forgot to wrap the editable components in `<Editable />`"}),xe=A(({focusBorderColor:f,errorBorderColor:r,...i},b)=>{const[u,s]=de("Editable",{focusBorderColor:f,errorBorderColor:r,...i}),{className:c,children:N,...v}=ae(s),{isEditing:y,getPreviewProps:w,getInputProps:t,getTextareaProps:a,getEditProps:x,getCancelProps:l,getSubmitProps:p,onSubmit:h,onCancel:F,onEdit:S}=fe(v),V=le(N,{isEditing:y,onSubmit:h,onCancel:F,onEdit:S}),m={...u.container};return D(be,{value:{isEditing:y,getPreviewProps:w,getInputProps:t,getTextareaProps:a,getEditProps:x,getCancelProps:l,getSubmitProps:p,styles:u},children:D(K.div,{ref:b,className:_("ui-editable",c),...T(v,["placeholder","value","defaultValue","isInvalid","isReadOnly","isRequired","isDisabled","startWithEditView","isPreviewFocusable","submitOnBlur","selectAllOnFocus","onChange","onCancel","onSubmit","onEdit"]),__css:m,children:V})})}),Se=A(({className:f,...r},i)=>{const{styles:b,getPreviewProps:u}=W(),s={cursor:"text",display:"inline-block",fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent",...b.preview};return D(K.span,{className:_("ui-editable-preview",f),...u(r,i),__css:s})}),Re=A(({className:f,...r},i)=>{const{styles:b,getInputProps:u}=W(),s={outline:0,fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent",...b.input};return D(K.input,{className:_("ui-editable-input",f),...u(r,i),__css:s})}),De=A(({className:f,...r},i)=>{const{styles:b,getTextareaProps:u}=W(),s={outline:0,fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent",...b.textarea};return D(K.textarea,{className:_("ui-editable-textarea",f),...u(r,i),__css:s})});export{xe as E,Se as a,Re as b,De as c,we as u};
//# sourceMappingURL=editable-44661b5d.js.map
