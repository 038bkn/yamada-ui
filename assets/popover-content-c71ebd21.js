import{r as n}from"./index-8ee6c85d.js";import{a as V,j as se}from"./jsx-runtime-b08f8875.js";import{b as ie}from"./index-ce22a570.js";import{u as ce,a as ue}from"./index-a6c6149e.js";import{u as ae,a as le,b as fe}from"./index-bd9d4d3b.js";import{u as me}from"./index-c8e9dbe6.js";import{k as de,x as Y,t as i,z as pe,a1 as _,C as L,e as Z,p as ve,q as ge,A as Pe,d as Q,U as he}from"./factory-ab7c3580.js";import{a as Ce}from"./use-component-style-07e84389.js";import{o as be}from"./theme-provider-1097130b.js";import{m as ye}from"./motion-5447b2d8.js";import{C as Re}from"./close-button-b4ee3b21.js";import{f as $}from"./forward-ref-cf7188bd.js";import{s as z}from"./slide-fade-3dfcdad7.js";import{s as Be}from"./scale-fade-748a8284.js";const[Te,N]=de({strict:!1,name:"PopoverContext"}),Xe=f=>{const[c,t]=Ce("Popover",f),{children:p,initialFocusRef:v,restoreFocus:g=!0,autoFocus:b=!0,closeOnBlur:m=!0,closeOnEsc:w=!0,closeOnButton:O=!0,trigger:d="click",openDelay:y=200,closeDelay:h=200,isLazy:j,lazyBehavior:I="unmount",animation:K="scale",duration:E,...S}=be(t),{isOpen:e,onOpen:R,onClose:r,onToggle:F}=ce(t),B=n.useRef(null),P=n.useRef(null),a=n.useRef(null),{present:D,onAnimationComplete:A}=ie({isOpen:e,ref:a}),l=n.useRef(void 0),X=n.useRef(void 0),T=n.useRef(!1),H=n.useRef(!1);e&&(H.current=!0);const{referenceRef:M,getPopperProps:ee,forceUpdate:U,transformOrigin:q}=me({...S,enabled:e});n.useEffect(()=>()=>{l.current&&clearTimeout(l.current),X.current&&clearTimeout(X.current)},[]),ae({enabled:e,ref:P}),le(a,{focusRef:P,visible:e,shouldFocus:g&&d==="click"}),fe(a,{focusRef:v,visible:e,shouldFocus:b&&d==="click"});const G=ue({wasSelected:H.current,enabled:j,mode:I,isSelected:D}),oe=n.useCallback((o={},x=null)=>{const s={...o,style:{...o.style,transformOrigin:q},ref:Y(a,x),children:G?o.children:null,tabIndex:-1,onKeyDown:i(o.onKeyDown,u=>{w&&u.key==="Escape"&&r()}),onBlur:i(o.onBlur,u=>{const C=_(u),k=L(a.current,C),re=L(P.current,C);e&&m&&(!k&&!re)&&r()})};return d==="hover"&&(s.onMouseEnter=i(o.onMouseEnter,()=>{T.current=!0}),s.onMouseLeave=i(o.onMouseLeave,u=>{u.nativeEvent.relatedTarget!==null&&(T.current=!1,setTimeout(r,h))})),s},[h,m,w,e,r,G,q,d]),J=n.useCallback(o=>{B.current==null&&M(o)},[M]),te=n.useCallback((o={},x=null)=>{const s={...o,ref:Y(P,x,J)};return d==="click"&&(s.onClick=i(o.onClick,F),s.onBlur=i(o.onBlur,u=>{const C=_(u),k=!L(a.current,C);e&&m&&k&&r()})),d==="hover"&&(s.onFocus=i(o.onFocus,()=>{l.current===void 0&&R()}),s.onBlur=i(o.onBlur,u=>{const C=_(u),k=!L(a.current,C);e&&m&&k&&r()}),s.onKeyDown=i(o.onKeyDown,u=>{u.key==="Escape"&&r()}),s.onMouseEnter=i(o.onMouseEnter,()=>{T.current=!0,l.current=window.setTimeout(R,y)}),s.onMouseLeave=i(o.onMouseLeave,()=>{T.current=!1,l.current&&(clearTimeout(l.current),l.current=void 0),X.current=window.setTimeout(()=>{T.current===!1&&r()},h)})),s},[h,m,e,J,r,R,F,y,d]),ne=n.useCallback((o={},x=null)=>({...o,ref:Y(x,B,M)}),[B,M]);return V(Te,{value:{isOpen:e,onClose:r,closeOnButton:O,onAnimationComplete:A,forceUpdate:U,getTriggerProps:te,getAnchorProps:ne,getPopperProps:ee,getPopoverProps:oe,animation:K,duration:E,styles:c},children:pe(p,{isOpen:e,onClose:r,forceUpdate:U})})},Ye=({children:f})=>{const c=n.Children.only(f),{getTriggerProps:t}=N();return n.cloneElement(c,t(c.props,c.ref))},W=$(({onClick:f,...c},t)=>{const{styles:p,onClose:v}=N(),g={position:"absolute",...p.closeButton};return V(Re,{ref:t,className:Z("ui-popover-close-button"),__css:g,onClick:i(f,b=>{b.stopPropagation(),v==null||v()}),size:"sm",...c})}),xe=(f="scale",c)=>{const t={reverse:!0,duration:c,enter:{visibility:"visible"},transitionEnd:{exit:{visibility:"hidden"}}};switch(f){case"scale":return{...Be,custom:{...t,scale:.95}};case"top":return{...z,custom:{...t,offsetX:0,offsetY:-16}};case"right":return{...z,custom:{...t,offsetX:16,offsetY:0}};case"left":return{...z,custom:{...t,offsetX:-16,offsetY:0}};case"bottom":return{...z,custom:{...t,offsetX:0,offsetY:16}}}},_e=$(({as:f="section",className:c,children:t,w:p,width:v,minW:g,minWidth:b,zIndex:m,__css:w,...O},d)=>{var P,a,D,A,l;const{isOpen:y,closeOnButton:h,getPopperProps:j,getPopoverProps:I,onAnimationComplete:K,animation:E,duration:S,styles:e}=N(),R=ve(t),[r,...F]=ge(R,W),B={position:"relative",w:"100%",display:"flex",flexDirection:"column",outline:0,...Pe(w??e.container,["zIndex"])};return p=p??v??((P=e.container)==null?void 0:P.w)??((a=e.container)==null?void 0:a.width),g=g??b??((D=e.container)==null?void 0:D.minW)??((A=e.container)==null?void 0:A.minWidth),m=m??((l=e.container)==null?void 0:l.zIndex),V(Q.div,{...j({style:{visibility:y?"visible":"hidden"}}),className:"ui-popover",w:p,minW:g,zIndex:m,children:se(Q.section,{as:ye[f],className:Z("ui-popover-content",c),...E!=="none"?xe(E,S):{},...I(O,d),initial:"exit",animate:y?"enter":"exit",exit:"exit",onAnimationComplete:he(K,O.onAnimationComplete),__css:B,children:[r??(h?V(W,{}):null),F]})})});export{Xe as P,Ye as a,_e as b,W as c,N as u};
//# sourceMappingURL=popover-content-c71ebd21.js.map
