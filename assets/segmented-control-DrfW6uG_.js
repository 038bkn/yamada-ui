import{j as l}from"./jsx-runtime-CKrituN3.js";import{u as ee}from"./index-C44IEXoh.js";import{c as se}from"./index-CTNnc4qP.js";import{t as te}from"./index-D9LddFt1.js";import{r as t}from"./index-CBqU2yxZ.js";import{L as ne}from"./index-CpvBRLJe.js";import{c as ae,g as oe,o as A,w as E,J as h,h as L,K as j,v as le,u as P,a as $,L as re}from"./factory-jQ8alorc.js";import{M as ie}from"./motion-BMD8dy6a.js";import{f as q}from"./forward-ref-DuAegr0M.js";import{u as ce}from"./use-component-style-DOSk5UmJ.js";import{o as de}from"./theme-provider-C1GLE5Ir.js";const{DescendantsContextProvider:ue,useDescendants:me,useDescendant:fe}=se(),[ge,H]=ae({strict:!1,name:"SegmentedControlContext"}),Re=q((C,x)=>{const[d,u]=ce("SegmentedControl",C);let{className:m,id:r,name:y,isReadOnly:o,isDisabled:n,children:N,items:k=[],value:O,defaultValue:I,...c}=de(u);r??(r=t.useId()),y??(y=`segmented-control-${t.useId()}`),c.onChange=oe(c.onChange);const v=me(),[f,S]=t.useState(-1),[R,V]=t.useState(!1),F=t.useRef(null),M=t.useRef(new Map),[g,B]=ee({value:O,defaultValue:I,onChange:c.onChange}),z=t.useCallback(e=>{if(n||o){e.preventDefault();return}B(e.target.value)},[n,o,B]),G=t.useCallback((e,s)=>{if(!n)if(s){const i=v.enabledNextValue(e);i&&S(i.index)}else S(e)},[v,n]),J=t.useCallback(()=>S(-1),[]),Q=t.useCallback((e={},s=null)=>({...A(c,["onChange","aria-readonly"]),...e,ref:E(F,s),id:r,"aria-disabled":h(n),"aria-readonly":h(o),onBlur:L(e.onBlur,J)}),[r,n,o,J,c]),U=t.useCallback(({index:e,...s},i=null)=>{const a=s.disabled??s.isDisabled??n,p=s.readOnly??s.isReadOnly??o,b=s.value===g;return{...A(s,["isDisabled","isReadOnly","aria-readonly"]),ref:i,id:`${r}-${e}`,type:"radio",name:y,disabled:a||p,readOnly:p,checked:b,"aria-disabled":h(a),"aria-readonly":h(p),"data-checked":j(b),"data-focus":j(e===f),style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},onChange:L(s.onChange,_=>!a&&!p?z(_):{})}},[n,o,g,r,y,f,z]),W=t.useCallback(({index:e,isDisabled:s,isReadOnly:i,...a},p=null)=>{const b=a.disabled??s??n,_=a.readOnly??i??o,Y=a.value===g,T=e===f;return{...a,ref:E(Z=>M.current.set(a.value,Z),p),"aria-disabled":h(b),"aria-readonly":h(_),"data-checked":j(Y),"data-focus":j(T),"data-focus-visible":j(T&&R),onFocus:L(a.onFocus,()=>G(e,b||_||!1)),...b||_?{_hover:{},_active:{},_focus:{},_invalid:{},_focusVisible:{}}:{}}},[f,n,R,o,G,g]);t.useEffect(()=>te(V),[]);const X={display:"inline-flex",alignItems:"center",...d.container},K=le(N);let D=[];if(!K.length&&k.length?D=k.map(({label:e,value:s,...i},a)=>l.jsx(w,{value:s,...i,children:e},a)):D=K,g==null&&I==null)for(const e of D){if(e.type!==w&&e.type.displayName!==w.displayName)continue;const s=e.props.value;B(s);break}return l.jsx(ue,{value:v,children:l.jsx(ge,{value:{getInputProps:U,getLabelProps:W,styles:d,selectedValue:g},children:l.jsx(ne,{id:r,children:l.jsx(P.div,{...Q({},x),className:$("ui-segmented-control",m),__css:X,children:D})})})})}),w=q(({className:C,disabled:x,readOnly:d,isDisabled:u,isReadOnly:m,value:r,onChange:y,children:o,motionProps:n,...N},k)=>{const[,O]=re({rerender:!0}),{selectedValue:I,getInputProps:c,getLabelProps:v,styles:f}=H(),{index:S,register:R}=fe({disabled:u||m}),V={index:S,value:r,onChange:y,disabled:x,readOnly:d,isDisabled:u,isReadOnly:m},F={position:"relative",cursor:"pointer",flex:"1 1 0%",display:"inline-flex",justifyContent:"center",alignItems:"center",...f.button},M=I===r;return l.jsxs(P.label,{...v(A(V,["onChange"])),className:$("ui-segmented-control__button",C),__css:F,...N,children:[l.jsx(P.input,{...c(V,E(R,k))}),M&&O?l.jsx(pe,{...n}):null,l.jsx(P.span,{zIndex:"1",children:o})]})});w.displayName="SegmentedControlButton";const pe=({className:C,transition:x,...d})=>{const{styles:u}=H(),m={position:"absolute",w:"100%",h:"100%",...u.cursor};return l.jsx(ie,{className:$("ui-segmented-control__cursor",C),layoutDependency:!1,layoutId:"cursor",transition:{type:"spring",bounce:.15,duration:.4,...x},__css:m,...d})};export{Re as S,w as a};
