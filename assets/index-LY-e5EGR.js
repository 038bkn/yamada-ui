import"./index-4g5l5LRQ.js";import{P as p}from"./factory-dcM_aT7G.js";let d=!1,r=null,t=!1,s=!1;const u=new Set,i=(e,o)=>u.forEach(l=>l(e,o)),f=e=>!(e.metaKey||!p&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta"),a=e=>{t=!0,f(e)&&(r="keyboard",i("keyboard",e))},n=e=>{if(r="pointer",e.type==="mousedown"||e.type==="pointerdown"||e.type==="pointerup"){if(t=!0,(e.composedPath?e.composedPath()[0]:e.target).matches(":focus-visible"))return;i("pointer",e)}},m=e=>e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType,y=e=>{m(e)&&(t=!0,r="virtual")},E=e=>{e.target===window||e.target===document||(!t&&!s&&(r="virtual",i("virtual",e)),t=!1,s=!1)},w=()=>{t=!1,s=!0},c=()=>r!=="pointer",L=()=>{typeof window>"u"||d||(HTMLElement.prototype.focus=(...e)=>{t=!0},document.addEventListener("keydown",a,!0),document.addEventListener("keyup",a,!0),document.addEventListener("click",y,!0),window.addEventListener("focus",E,!0),window.addEventListener("blur",w,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",n,!0),document.addEventListener("pointermove",n,!0),document.addEventListener("pointerup",n,!0)):(document.addEventListener("mousedown",n,!0),document.addEventListener("mousemove",n,!0),document.addEventListener("mouseup",n,!0)),d=!0)},b=e=>{L(),e(c());const o=()=>e(c());return u.add(o),()=>{u.delete(o)}};export{b as t};
