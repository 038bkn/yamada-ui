import{j as a}from"./jsx-runtime-Nms4Y4qS.js";import{u as Le}from"./index-CP_iHTUG.js";import{r as o}from"./index-BwDkhjyp.js";import{d as ee,i as we,a as Ve,b as qe,C as Ge}from"./ja-AzJY09-n.js";import{u as Je}from"./index-Irie4EHF.js";import{u as Qe}from"./index-xf8c1cao.js";import{u as Xe}from"./index-D5OdYTIO.js";import{u as Ze,f as $e}from"./form-control-EHuqAfFr.js";import{p as et,P as tt,b as ot,a as nt}from"./popover-content-CMxl5HlT.js";import{u as at,o as st}from"./theme-provider-CgekAyNK.js";import{T as rt,a0 as lt,a1 as it,R as ct,a8 as ut,U as pt,a as te,h as A,d as dt,l as ft,f as Fe,a9 as mt,b as U,c as W,t as Ct,j as Pt}from"./factory-BXeT7qA-.js";import{P as ht}from"./container-portal-D_8J7oaj.js";import{b as gt,a as kt}from"./icon-BjkWeIz-.js";import{f as oe}from"./forward-ref-BmTAT9U5.js";import{a as bt}from"./use-component-style-DuIjxI-P.js";const yt=c=>{var Ie,Oe;const{theme:u}=at();let{id:s,closeOnBlur:f=!0,closeOnEsc:h=!0,placement:m="bottom-start",duration:l=.2,enableMultiple:p,enableRange:g,value:P,defaultValue:j,onChange:R,type:I,defaultType:x,onChangeType:B,month:D,defaultMonth:T,onChangeMonth:S,firstDayOfWeek:N,amountOfMonths:M,paginateBy:H,withWeekdays:z,disableOutsideDays:O,hiddenOutsideDays:k,minDate:d,maxDate:C,locale:t,yearFormat:i,monthFormat:w,weekdayFormat:ae,dateFormat:se,weekendDays:re,today:le,excludeDate:b,calendarVariant:ie,calendarSize:ce,calendarColorScheme:ue,holidays:pe,withHeader:de,withControls:fe,withLabel:me,maxSelectValues:Ce,__selectType:Pe,calendarProps:he,allowInput:y=!0,allowInputBeyond:L=!1,parseDate:q,pattern:Re=/[^0-9\-\/]/g,inputFormat:G="YYYY/MM/DD",autoFocus:Y=!0,isOpen:Te,defaultIsOpen:Be,onOpen:Se,onClose:Ne,onClear:J,onEnter:ge,onDelete:ke,..._}=Ze(c);s??(s=o.useId()),t??(t=((Oe=(Ie=u.__config)==null?void 0:Ie.date)==null?void 0:Oe.locale)??"en");const{"aria-readonly":It,...V}=rt(_,$e),[be,Me]=lt(ct(_,et),it),{disabled:Q,readOnly:X}=V,{isOpen:r,onOpen:ye,onClose:F}=Qe({isOpen:Te,defaultIsOpen:Be,onOpen:Se,onClose:Ne}),Z=o.useRef(null),K=o.useRef(null),He=o.useCallback(e=>{let n=(q==null?void 0:q(e))??ee(e,G,t).toDate();if(n!=null&&!(b!=null&&b(n)))return L||(C&&we(n,C)&&(n=C),d&&Ve(n,d)&&(n=d)),n},[L,b,G,t,C,d,q]),ze=o.useCallback(e=>{if(e!=null&&!(b!=null&&b(e)))return L||(C&&we(e,C)&&(e=C),d&&Ve(e,d)&&(e=d)),ee(e).locale(t??"en").format(G)},[L,b,G,t,C,d]),v=o.useCallback(()=>{var e;Q||X||(ye(),Y&&y&&((e=K.current)==null||e.focus()))},[Y,y,Q,X,ye]),_e=o.useCallback(()=>{var e;r?Y&&y&&((e=K.current)==null||e.focus()):v()},[Y,y,r,v]),ve=o.useCallback(()=>{r||v()},[r,v]),xe=o.useCallback(e=>{const n=ut(e);pt(Z.current,n)||f&&r&&F()},[f,r,F]),De=o.useCallback(e=>{if(e.key===" "&&(e.key=e.code),Q||X)return;const $={Space:r?void 0:E=>{E.preventDefault(),E.stopPropagation(),v()},Enter:r?ge:E=>{E.preventDefault(),E.stopPropagation(),v()},Escape:h?E=>{E.preventDefault(),E.stopPropagation(),F()}:void 0,Backspace:ke}[e.key];$&&$(e)},[h,Q,X,r,F,ge,ke,v]),je=o.useCallback(e=>{var n;e.stopPropagation(),J==null||J(),Y&&y&&r&&((n=K.current)==null||n.focus())},[Y,y,r,J]);Xe({ref:Z,handler:F,enabled:r&&f});const Ye=o.useCallback((e={},n=null)=>({ref:te(Z,n),...be,...e,...V,onClick:A(e.onClick,_.onClick,_e),onBlur:A(e.onBlur,_.onBlur,xe)}),[be,V,xe,_e,_]),Ae=o.useCallback(e=>({..._,...e,isOpen:r,onOpen:v,onClose:F,placement:m,duration:l,trigger:"never",closeOnButton:!1,closeOnBlur:!1}),[l,r,F,v,m,_]),Ke=o.useCallback((e={},n=null)=>{const $={...e.style,...y?{}:{cursor:"pointer"}};return{ref:te(K,n),tabIndex:y?-1:0,role:"combobox","aria-haspopup":"dialog","aria-controls":s,...e,...V,style:$,"data-active":dt(r),"aria-expanded":r,onFocus:A(e.onFocus,_.onFocus,ve),onKeyDown:A(e.onKeyDown,_.onKeyDown,De)}},[s,y,V,r,_,ve,De]),Ue=o.useCallback(e=>({...e,type:I,defaultType:x,onChangeType:B,month:D,defaultMonth:T,onChangeMonth:S,firstDayOfWeek:N,amountOfMonths:M,paginateBy:H,withWeekdays:z,disableOutsideDays:O,hiddenOutsideDays:k,yearFormat:i,monthFormat:w,weekdayFormat:ae,dateFormat:se,weekendDays:re,today:le,holidays:pe,withHeader:de,withControls:fe,withLabel:me,maxSelectValues:Ce,variant:ie,size:ce,colorScheme:ue,...he,value:P,defaultValue:j,onChange:R,minDate:d,maxDate:C,excludeDate:b,locale:t,__selectType:Pe,enableMultiple:p,enableRange:g}),[k,Ce,p,g,M,ue,he,ce,ie,se,T,x,j,O,b,N,pe,t,C,d,D,w,R,S,B,H,le,I,P,ae,re,fe,de,me,z,i,Pe]),We=o.useCallback(({clear:e,...n})=>({...n,...V,onClick:A(n.onClick,e?je:void 0)}),[V,je]);return{id:s,allowInput:y,pattern:Re,inputProps:Me,formControlProps:V,containerRef:Z,inputRef:K,isOpen:r,onOpen:v,onClose:F,dateToString:ze,stringToDate:He,getContainerProps:Ye,getPopoverProps:Ae,getFieldProps:Ke,getCalendarProps:Ue,getIconProps:We}},[_t,ne]=ft({strict:!1,name:"DatePickerContext"}),vt=({value:c,defaultValue:u,onChange:s,placeholder:f,closeOnSelect:h=!0,...m})=>{const[l,p]=Je({value:c,defaultValue:u,onChange:s,onUpdate:(t,i)=>!qe(t,i)}),{inputRef:g,id:P,allowInput:j,pattern:R,inputProps:I,formControlProps:x,onClose:B,dateToString:D,stringToDate:T,getContainerProps:S,getPopoverProps:N,getFieldProps:M,getCalendarProps:H,getIconProps:z}=yt({...m,value:l,defaultValue:u,onChange:t=>{const i=D(t);p(t),k(i),h&&t&&B()},onClear:()=>{p(void 0),k(void 0)},onClose:()=>{var i;const t=D(l);k(t),(i=m.onClose)==null||i.call(m)}}),[O,k]=o.useState(D(l)),d=o.useCallback(t=>{let i=t.target.value;i=i.replace(R,"");const w=T(i);k(i),w&&ee(w).isValid()?p(w):p(void 0)},[R,T,k,p]);Fe(()=>{p(c)},[c]),Fe(()=>{if(g.current&&mt(g.current))return;const t=D(l);k(t)},[l]);const C=o.useCallback((t={},i=null)=>{const w={...t.style,...I.style,...j?{}:{pointerEvents:"none"}};return{placeholder:f,...x,autoComplete:"off",...I,...t,ref:i,style:w,id:P,tabIndex:j?0:-1,value:O??"",cursor:x.readOnly?"default":"text",pointerEvents:x.disabled?"none":"auto",onChange:A(t.onChange,d)}},[I,j,f,x,P,O,d]);return{id:P,value:l,getContainerProps:S,getPopoverProps:N,getFieldProps:M,getInputProps:C,getIconProps:z,getCalendarProps:H}},Kt=oe((c,u)=>{const[s,f]=bt("DatePicker",c);let{className:h,isClearable:m=!0,color:l,h:p,height:g,minH:P,minHeight:j,containerProps:R,inputProps:I,iconProps:x,clearIconProps:B,portalProps:D={isDisabled:!0},...T}=st(f);const{getPopoverProps:S,getContainerProps:N,getCalendarProps:M,getFieldProps:H,getInputProps:z,getIconProps:O,value:k,id:d}=vt(T);p??(p=g),P??(P=j);const C={w:"100%",h:"fit-content",color:l,...s.container};return a.jsx(_t,{value:s,children:a.jsx(tt,{...S(),children:a.jsxs(U.div,{className:W("ui-date-picker",h),__css:C,...N(R),children:[a.jsxs(U.div,{className:"ui-date-picker__inner",__css:{position:"relative",...s.inner},children:[a.jsx(xt,{...H({h:p,minH:P},u),inputProps:z(I)}),m&&k?a.jsx(jt,{...O({clear:!0,...B})}):a.jsx(Ee,{...O({clear:!1,...x})})]}),a.jsx(ht,{...D,children:a.jsx(ot,{id:d,role:"dialog","aria-modal":"true",className:"ui-date-picker__popover",__css:{...s.list},children:a.jsx(Ge,{className:"ui-date-picker__calendar",...M()})})})]})})})}),xt=oe(({className:c,h:u,minH:s,inputProps:f,...h},m)=>{const l=ne(),{ref:p,...g}=f,P={pe:"2rem",h:u,minH:s,display:"flex",alignItems:"center",...l.field};return a.jsx(nt,{children:a.jsx(U.div,{className:W("ui-date-picker__field",c),__css:P,...h,children:a.jsx(U.input,{"aria-label":"Input date value",ref:te(m,p),className:"ui-date-picker__field__input",display:"inline-block",w:"100%",...g})})})}),Ee=oe(({className:c,children:u,__css:s,...f},h)=>{const l={position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",cursor:"pointer",...ne().icon,...s},g=Ct(u).map(P=>o.cloneElement(P,{focusable:!1,"aria-hidden":!0,style:{maxWidth:"1em",maxHeight:"1em",color:"currentColor"}}));return a.jsx(U.div,{ref:h,className:W("ui-date-picker__icon",c),__css:l,...f,children:Pt(u)?g:a.jsx(Dt,{})})}),Dt=({className:c,...u})=>a.jsx(gt,{className:W("ui-date-picker__icon__calendar",c),viewBox:"0 0 24 24",...u,children:a.jsx("path",{fill:"currentColor",d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),jt=({className:c,children:u,...s})=>{const f=o.useRef(null),h=ne(),m=s.disabled,l=Le({ref:f,isDisabled:m,...s});return a.jsx(Ee,{"aria-label":"Clear value",className:W("ui-date-picker__icon--clear",c),__css:h.clearIcon,...l,children:u??a.jsx(kt,{w:"0.5em",h:"0.5em"})})};export{Kt as D,_t as a,xt as b,jt as c,Ee as d,ne as e,yt as u};
