import{j as r,a as Y}from"./jsx-runtime-TtYKBvr-.js";import{u as Z}from"./index-EQvUcbnd.js";import{c as ee}from"./index-OzGX2JcO.js";import{t as te}from"./index-ckhG7OaW.js";import{r as s}from"./index-IybTgENJ.js";import{L as se}from"./index-nIYcwamu.js";import{c as ne,g as ae,o as A,w as $,J as h,h as L,K as S,v as oe,u as w,a as E,L as le}from"./factory-ilkGXtBr.js";import{M as re}from"./motion-HpRHdgWC.js";import{f as T}from"./forward-ref-6T0UNPU-.js";import{u as ie}from"./use-component-style-Ji6G5y4B.js";import{o as ce}from"./theme-provider-xH9zRqO9.js";const{DescendantsContextProvider:de,useDescendants:ue,useDescendant:fe}=ee(),[me,q]=ne({strict:!1,name:"SegmentedControlContext"}),Re=T((p,C)=>{const[u,f]=ie("SegmentedControl",p);let{className:m,id:o,name:y,isReadOnly:a,isDisabled:n,children:O,items:_=[],value:F,defaultValue:k,...d}=ce(f);o??(o=s.useId()),y??(y=`segmented-control-${s.useId()}`),d.onChange=ae(d.onChange);const x=ue(),[g,v]=s.useState(-1),[I,R]=s.useState(!1),M=s.useRef(null),j=s.useRef(new Map),[b,B]=Z({value:F,defaultValue:k,onChange:d.onChange}),z=s.useCallback(t=>{if(n||a){t.preventDefault();return}B(t.target.value)},[n,a,B]),G=s.useCallback((t,e)=>{if(!n)if(e){const i=x.enabledNextValue(t);i&&v(i.index)}else v(t)},[x,n]),J=s.useCallback(()=>v(-1),[]),H=s.useCallback((t={},e=null)=>({...A(d,["onChange","aria-readonly"]),...t,ref:$(M,e),id:o,"aria-disabled":h(n),"aria-readonly":h(a),onBlur:L(t.onBlur,J)}),[o,n,a,J,d]),Q=s.useCallback(({index:t,...e},i=null)=>{const l=e.disabled??e.isDisabled??n,c=e.readOnly??e.isReadOnly??a,D=e.value===b;return{...A(e,["isDisabled","isReadOnly","aria-readonly"]),ref:i,id:`${o}-${t}`,type:"radio",name:y,disabled:l||c,readOnly:c,checked:D,"aria-disabled":h(l),"aria-readonly":h(c),"data-checked":S(D),"data-focus":S(t===g),style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},onChange:L(e.onChange,P=>!l&&!c?z(P):{})}},[n,a,b,o,y,g,z]),U=s.useCallback(({index:t,...e},i=null)=>{const l=e.disabled??e.isDisabled??n,c=e.readOnly??e.isReadOnly??a,D=e.value===b,P=t===g;return{props:e,ref:$(X=>j.current.set(e.value,X),i),"aria-disabled":h(l),"aria-readonly":h(c),"data-checked":S(D),"data-focus":S(P),"data-focus-visible":S(P&&I),onFocus:L(e.onFocus,()=>G(t,l||c||!1)),...l||c?{_hover:{},_active:{},_focus:{},_invalid:{},_focusVisible:{}}:{}}},[g,n,I,a,G,b]);s.useEffect(()=>te(R),[]);const W={display:"inline-flex",alignItems:"center",...u.container},K=oe(O);let V=[];if(!K.length&&_.length?V=_.map(({label:t,value:e,...i},l)=>r(N,{value:e,...i,children:t},l)):V=K,b==null&&k==null)for(const t of V){if(t.type!==N&&t.type.displayName!==N.displayName)continue;const e=t.props.value;B(e);break}return r(de,{value:x,children:r(me,{value:{getInputProps:Q,getLabelProps:U,styles:u,selectedValue:b},children:r(se,{id:o,children:r(w.div,{...H({},C),className:E("ui-segmented-control",m),__css:W,children:V})})})})}),N=T(({className:p,disabled:C,readOnly:u,isDisabled:f,isReadOnly:m,value:o,onChange:y,children:a,motionProps:n,...O},_)=>{const[,F]=le({rerender:!0}),{selectedValue:k,getInputProps:d,getLabelProps:x,styles:g}=q(),{index:v,register:I}=fe({disabled:f||m}),R={index:v,value:o,onChange:y,disabled:C,readOnly:u,isDisabled:f,isReadOnly:m},M={position:"relative",cursor:"pointer",flex:"1 1 0%",display:"inline-flex",justifyContent:"center",alignItems:"center",...g.button},j=k===o;return Y(w.label,{...x(A(R,["onChange"])),className:E("ui-segmented-control__button",p),__css:M,...O,children:[r(w.input,{...d(R,$(I,_))}),j&&F?r(ge,{...n}):null,r(w.span,{zIndex:"1",children:a})]})});N.displayName="SegmentedControlButton";const ge=({className:p,transition:C,...u})=>{const{styles:f}=q(),m={position:"absolute",w:"full",h:"full",...f.cursor};return r(re,{className:E("ui-segmented-control__cursor",p),layoutDependency:!1,layoutId:"cursor",transition:{type:"spring",bounce:.15,duration:.4,...C},__css:m,...u})};export{Re as S,N as a};
