import{r as d}from"./index-IybTgENJ.js";import{d as m,t as f}from"./factory-0U35BYk-.js";const w=({ref:e,handler:s,enabled:r=!0})=>{const u=m(s),t=d.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1});d.useEffect(()=>{if(!r)return;const i=o=>{c(o,e)&&(t.current.isPointerDown=!0)},a=o=>{if(t.current.ignoreEmulatedMouseEvents){t.current.ignoreEmulatedMouseEvents=!1;return}t.current.isPointerDown&&s&&c(o,e)&&(t.current.isPointerDown=!1,u(o))},E=o=>{t.current.ignoreEmulatedMouseEvents=!0,s&&t.current.isPointerDown&&c(o,e)&&(t.current.isPointerDown=!1,u(o))},n=f(e.current);return n.addEventListener("mousedown",i,!0),n.addEventListener("mouseup",a,!0),n.addEventListener("touchstart",i,!0),n.addEventListener("touchend",E,!0),()=>{n.removeEventListener("mousedown",i,!0),n.removeEventListener("mouseup",a,!0),n.removeEventListener("touchstart",i,!0),n.removeEventListener("touchend",E,!0)}},[s,e,u,t,r])},c=(e,s)=>{var u;const r=e.target;return"button"in e&&e.button>0||r&&!f(r).contains(r)?!1:!((u=s.current)!=null&&u.contains(r))};export{w as u};
