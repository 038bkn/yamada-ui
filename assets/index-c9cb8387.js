import{r as E}from"./index-de62f0e0.js";import{c as _,C as b,b as g,q as S}from"./factory-07cc9cf0.js";import{j as M}from"./theme-326cd56d.js";const m=t=>t.sort((c,d)=>{const r=c.compareDocumentPosition(d);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0}),v=(t,c,d)=>{let r=t+1;return d&&r>=c&&(r=0),r},V=(t,c,d)=>{let r=t-1;return d&&r<0&&(r=c),r},y=()=>{const t=new Map,c=e=>{t.forEach(n=>{const s=e.indexOf(n.node);n.index=s,n.node.dataset.index=n.index.toString()})},d=(e,n)=>{if(!e||t.has(e))return;const s=Array.from(t.keys()).concat(e),a=m(s);n!=null&&n.disabled&&(n.disabled=!!n.disabled);const N={node:e,index:-1,...n};t.set(e,N),c(a)},r=e=>{if(e!=null)return M(e)?d(e):n=>d(n,e)},u=e=>{t.delete(e);const n=m(Array.from(t.keys()));c(n)},C=()=>t.clear(),o=e=>I(e).length,f=e=>x(e).length,T=e=>{var n;return e?((n=t.get(e))==null?void 0:n.index)??-1:-1},D=(e,n)=>e==null?-1:x(n).findIndex(s=>s.node.isSameNode(e)),I=e=>{const n=Array.from(t.values());return e?n.filter(e).sort((s,a)=>s.index-a.index):n.sort((s,a)=>s.index-a.index)},x=e=>I(e).filter(({disabled:n})=>!n),l=(e,n)=>{if(o(n)!==0)return I(n)[e]},i=(e,n)=>{if(f(n)!==0)return x(n)[e]};return{register:r,unregister:u,destroy:C,count:o,values:I,value:l,indexOf:T,firstValue:e=>l(0,e),lastValue:e=>l(t.size-1,e),prevValue:(e,n,s=!0)=>{const a=V(e,o(n)-1,s);return l(a,n)},nextValue:(e,n,s=!0)=>{const a=v(e,o(n),s);return l(a,n)},enabledCount:f,enabledValues:x,enabledValue:i,enabledIndexOf:D,enabledfirstValue:e=>i(0,e),enabledlastValue:e=>i(x(e).length-1,e),enabledPrevValue:(e,n,s=!0)=>{const a=l(e);if(!a)return;const N=D(a.node,n),O=V(N,f(n)-1,s);return i(O,n)},enabledNextValue:(e,n,s=!0)=>{const a=l(e);if(!a)return;const N=D(a.node,n),O=v(N,f(n),s);return i(O,n)}}},h=()=>{const t=E.useRef(y());return g(()=>()=>t.current.destroy()),t.current},[A,P]=_({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsContextProvider"}),U=t=>{const c=P(),[d,r]=E.useState(-1),u=E.useRef(null);g(()=>()=>{u.current&&c.unregister(u.current)},[]),g(()=>{if(!u.current)return;const o=Number(u.current.dataset.index);d!=o&&!Number.isNaN(o)&&r(o)});const C=t?b(c.register(t)):b(c.register);return{descendants:c,index:d,enabledIndex:c.enabledIndexOf(u.current,t==null?void 0:t.filter),register:S(C,u)}},Y=()=>({DescendantsContextProvider:b(A),useDescendantsContext:()=>b(P()),useDescendants:()=>h(),useDescendant:t=>U(t)});export{Y as c};
//# sourceMappingURL=index-c9cb8387.js.map
