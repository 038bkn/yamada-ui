import{j as O,a as Ce}from"./jsx-runtime-37f7df21.js";import{u as De}from"./index-87a55062.js";import{r as s}from"./index-f1f2c4b1.js";import{c as we,a as Fe}from"./icon-36765902.js";import{f as Q}from"./forward-ref-92ccee95.js";import{o as Oe,z as Ee,M as be,N as he,l as H,B as Te,h as Re,S as _e,w as se,v as q,y as ve,I as te,s as Ae,d as V,e as G,j as Ne}from"./factory-81c6291d.js";import{b as Le}from"./popover-content-803bc51c.js";import{u as je}from"./index-3333d5de.js";import{c as Be}from"./index-7c7556fc.js";import{u as Me}from"./index-2f981b9c.js";import{u as He,f as Ve}from"./form-control-7888c8d6.js";import{m as Ge,i as Ke,d as J,a as me,p as Ue}from"./theme-2b4f2a73.js";const ze=l=>{var c;return Ue(l)&&!!((c=l==null?void 0:l.getAttribute("role"))!=null&&c.startsWith("select-item"))},{DescendantsContextProvider:pt,useDescendantsContext:ge,useDescendants:We,useDescendant:Ye}=Be(),[xt,j]=Oe({strict:!1,name:"SelectContext"}),mt=({defaultIsOpen:l,placeholder:c,closeOnBlur:a=!0,closeOnEsc:u=!0,closeOnSelect:r=!0,placeholderInOptions:x=!0,omitSelectedValues:n=!1,maxSelectedValues:d,isEmpty:v,placement:g="bottom-start",duration:S=.2,optionProps:y,...o})=>{o=He(o);const f=Ee(o,Ve),C=be(o,he),i=We(),[m,b]=s.useState(-1),[z,X]=s.useState(!1),k=s.useRef(null),Z=s.useRef(null),ne=s.useRef(null),D=s.useRef(new Set([])),[I,K]=je({value:o.value,defaultValue:o.defaultValue,onChange:o.onChange}),[M,W]=s.useState(void 0),N=m>-1,h=H(I),L=(h?!I.length:!I)&&!(c&&x),E=i.values(({node:e})=>h&&I.includes(e.dataset.value??"")).map(({index:e})=>e),T=i.enabledValues(({index:e})=>!E.includes(e)),w=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledfirstValue();if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const P=T[0];b(P.index)}else b(t.index)});D.current.add(e)},[i,T,h,n,E]),U=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledlastValue();if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const P=T.reverse()[0];b(P.index)}else b(t.index)});D.current.add(e)},[i,T,h,n,E]),oe=s.useCallback(()=>{const e=setTimeout(()=>{const P=i.enabledValues().find(({node:A})=>h?I.includes(A.dataset.value??""):A.dataset.value===I);P&&b(P.index)});D.current.add(e)},[i,h,I]),Y=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledNextValue(m);if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const P=T.find(({index:A})=>t.index<A)??T[0];b(P.index)}else b(t.index)});D.current.add(e)},[i,T,m,h,n,E,b]),le=s.useCallback(()=>{const e=setTimeout(()=>{const t=i.enabledPrevValue(m);if(t)if(!h||!n)b(t.index);else if(E.includes(t.index)){const P=T.reverse().find(({index:A})=>A<t.index)??T[0];b(P.index)}else b(t.index)});D.current.add(e)},[i,T,m,h,n,E,b]),B=L||n?w:oe,re=L||n?U:oe,ce=s.useCallback((e,t=!0)=>{const A=i.values().filter(({node:F})=>F.dataset.value===e).map(({node:F,index:$})=>!(c&&x)||$!==0?F.textContent??"":void 0);W(F=>h?(A.forEach($=>{H(F)&&F.includes($??"")?t&&(F=H(F)?F.filter(Pe=>Pe!==$):void 0):F=[...H(F)?F:[],$]}),F):A[0])},[i,h,c,x]),ae=s.useCallback(e=>{K(t=>H(t)?t.includes(e)?t.filter(A=>A!==e):[...t,e]:e),ce(e)},[ce,K]),ke=s.useCallback(e=>{e.stopPropagation(),K([]),W(void 0)},[W,K]),[p,ue]=s.useState(l??!1),R=s.useCallback(()=>{var e;f.disabled||f.readOnly||v||z||(ue(!0),(e=o.onOpen)==null||e.call(o))},[f,v,z,o]),_=s.useCallback(()=>{var e;ue(!1),(e=o.onClose)==null||e.call(o)},[o]),ie=s.useCallback(()=>{let e=i.value(m);if("disabled"in((e==null?void 0:e.node.dataset)??{})&&(e=void 0),!e)return;const t=e.node.dataset.value??"";ae(t),r&&_(),n&&Y()},[r,i,m,n,ae,_,Y]),de=s.useCallback(()=>{p||(R(),B())},[p,B,R]),fe=s.useCallback(()=>{p||(R(),B())},[p,B,R]),pe=s.useCallback(e=>{const t=Ge(e);Ke(k.current,t)||a&&p&&_()},[a,p,_]),xe=s.useCallback(e=>{if(e.key===" "&&(e.key=e.code),f.disabled||f.readOnly)return;const P={ArrowDown:N?()=>Y():p?void 0:te(R,B),ArrowUp:N?()=>le():p?void 0:te(R,re),Space:N?ie:p?void 0:te(R,B),Enter:N?ie:p?void 0:te(R,B),Home:p?w:void 0,End:p?U:void 0,Escape:u?_:void 0}[e.key];P&&(e.preventDefault(),e.stopPropagation(),P())},[f.disabled,f.readOnly,N,p,R,B,re,ie,w,U,u,_,Y,le]);Me({ref:k,handler:_,enabled:a}),s.useEffect(()=>{if(!h||!n&&Te(d))return;const e=I.length>0&&I.length===i.count(),t=I.length===d;e||t?(_(),X(!0)):X(!1)},[n,I,i,h,_,d]),Re(()=>{p||b(-1)},[p]),_e(()=>{D.current.forEach(e=>clearTimeout(e)),D.current.clear()});const ye=s.useCallback(e=>({...o,...e,isOpen:p,onOpen:R,onClose:_,placement:g,duration:S,trigger:"never",closeOnButton:!1}),[S,_,R,g,o,p]),Se=s.useCallback((e={},t=null)=>({ref:se(k,t),...C[0],...e,...f,onClick:q(e.onClick,o.onClick,de),onFocus:q(e.onFocus,o.onFocus,fe),onBlur:q(e.onBlur,o.onBlur,pe)}),[C,f,pe,de,fe,o]),Ie=s.useCallback((e={},t=null)=>({ref:se(Z,t),tabIndex:0,...ve(C[1],["value","defaultValue","onChange"]),...e,"data-active":J(p),"data-placeholder":J(h?!(M!=null&&M.length):M===void 0),"aria-expanded":J(p),onKeyDown:q(e.onKeyDown,o.onKeyDown,xe)}),[C,p,h,M,o,xe]);return{descendants:i,value:I,displayValue:M,focusedIndex:m,placeholder:c,placeholderInOptions:x,omitSelectedValues:n,closeOnSelect:r,isOpen:p,containerRef:k,fieldRef:Z,listRef:ne,optionProps:y,formControlProps:f,onChangeDisplayValue:ce,onChange:ae,onClear:ke,onOpen:R,onClose:_,onFocusFirst:w,onFocusLast:U,onFocusSelected:oe,onFocusNext:Y,onFocusPrev:le,setFocusedIndex:b,getPopoverProps:ye,getContainerProps:Se,getFieldProps:Ie}},$e=()=>{const{listRef:l,focusedIndex:c}=j(),a=ge(),u=s.useRef(-1),r=a.value(c);return s.useEffect(()=>{if(!l.current||!r||u.current===r.index)return;const n=l.current,d=r.node,v=n.clientHeight,g=n.scrollTop,S=g+v,y=d.clientHeight,o=d.offsetTop,f=o+y,C=g<=o&&f<=S,i=u.current<r.index;C||(f<=v?l.current.scrollTo({top:0}):i?l.current.scrollTo({top:f-v}):l.current.scrollTo({top:o+1})),u.current=r.index},[l,r]),{getListProps:s.useCallback((n={},d=null)=>({as:"ul",ref:se(l,d),role:"select",tabIndex:-1,...n}),[l])}},qe=({label:l,...c})=>{const{value:a,omitSelectedValues:u}=j(),r=H(a),x=ge(),n=x.values(),v=(r&&u?x.values(({node:C})=>a.includes(C.dataset.value??"")):[]).map(({index:C})=>C),S=!n.filter(({node:C,index:i})=>{var m;return((m=C.parentElement)==null?void 0:m.dataset.label)===l&&!v.includes(i)}).length,y=be(c,he),o=s.useCallback((C={},i=null)=>{const m={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};return{ref:i,...C,...y[0],style:S?m:void 0}},[y,S]),f=s.useCallback((C={},i=null)=>({ref:i,...C,...y[1],"data-label":l}),[y,l]);return{label:l,getContainerProps:o,getGroupProps:f}},Je=(l,c)=>{const{fieldRef:a,value:u,placeholder:r,placeholderInOptions:x,omitSelectedValues:n,closeOnSelect:d,focusedIndex:v,optionProps:g,onChange:S,onChangeDisplayValue:y,onFocusNext:o,onClose:f,setFocusedIndex:C}=j();let{icon:i,isDisabled:m,isFocusable:b,closeOnSelect:z,children:X,...k}={...g,...c};const Z=!!m&&!b,ne=s.useRef(null),{index:D,register:I,descendants:K}=Ye({disabled:Z}),W=K.values().slice(0,D),N=H(u),L=!(N?!1:W.some(({node:w})=>w.dataset.value===(k.value??"")))&&(N?u.includes(k.value??""):(k.value??"")===u),ee=D===v;r&&D>0&&x&&!k.value&&console.warn(`${N?"MultiSelect":"Select"}: If placeholders are present, All options must be set value. If want to set an empty value, either don't set the placeholder or set 'placeholderInOptions' to false.`);const E=s.useCallback(w=>{if(w.preventDefault(),w.stopPropagation(),m){a.current&&a.current.focus();return}if(!ze(w.currentTarget)){a.current&&a.current.focus();return}C(D),S(k.value??""),a.current&&a.current.focus(),(z??d)&&f(),n&&o()},[m,C,D,S,k.value,a,z,d,f,n,o]);s.useEffect(()=>{L&&y(k.value??"",!1)},[k,L,y]);const T=s.useCallback((w={})=>{const U={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};return{ref:se(ne,l,I),...ve(k,["value"]),...w,role:"select-item",tabIndex:-1,style:n&&L?U:void 0,"data-value":k.value??"","data-focus":J(ee),"data-disabled":J(m),"aria-checked":me(L),"aria-disabled":me(m),onClick:q(k.onClick,w.onClick,E)}},[k,m,ee,L,n,E,l,I]);return{isSelected:L,isFocused:ee,customIcon:i,children:X,getOptionProps:T}},Qe=Q(({className:l,children:c,__css:a,...u},r)=>{const{styles:x}=j(),n={position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",cursor:"pointer",...x.icon,...a},v=Ae(c).map(g=>s.cloneElement(g,{focusable:!1,"aria-hidden":!0,style:{maxWidth:"1em",maxHeight:"1em",color:"currentColor"}}));return O(V.div,{ref:r,className:G("ui-select-icon",l),__css:n,...u,children:Ne(c)?v:O(we,{})})}),Ct=({className:l,children:c,...a})=>{const u=s.useRef(null),{styles:r}=j(),x=a.disabled,n=De({ref:u,isDisabled:x,...a});return O(Qe,{className:G("ui-select-clear-icon",l),__css:r.clearIcon,...n,children:c??O(Fe,{w:"0.5em",h:"0.5em"})})},bt=Q(({className:l,w:c,width:a,minW:u,minWidth:r,...x},n)=>{var S,y,o,f;const{styles:d}=j(),{getListProps:v}=$e();c=c??a??((S=d.list)==null?void 0:S.w)??((y=d.list)==null?void 0:y.width),u=u??r??((o=d.list)==null?void 0:o.minW)??((f=d.list)==null?void 0:f.minWidth);const g={...d.list};return O(Le,{className:G("ui-select-list",l),w:c,minW:u,__css:g,...v(x,n)})}),ht=Q(({className:l,color:c,h:a,height:u,minH:r,minHeight:x,children:n,...d},v)=>{const{styles:g}=j(),{label:S,getContainerProps:y,getGroupProps:o}=qe(d);return a=a??u,r=r??x,Ce(V.li,{className:"ui-select-group-container",__css:{w:"100%",h:"fit-content",color:c},...y(),children:[O(V.span,{className:G("ui-select-group-label"),__css:g.groupLabel,noOfLines:1,children:S}),O(V.ul,{...o({},v),className:G("ui-select-group",l),__css:{h:a,minH:r,...g.group},children:n})]})}),vt=Q(({className:l,icon:c,...a},u)=>{const{styles:r}=j(),{isSelected:x,customIcon:n,children:d,getOptionProps:v}=Je(u,a);c=c??n;const g={textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,gap:"0.75rem",...r.item};return Ce(V.li,{className:G("ui-select-item",l),__css:g,...v(),children:[c!==null?O(Xe,{opacity:x?1:0,children:c||O(Ze,{})}):null,c?O(V.span,{style:{pointerEvents:"none",flex:1},noOfLines:1,children:d}):d]})}),Xe=Q(({className:l,...c},a)=>{const{styles:u}=j(),r={flexShrink:0,display:"inline-flex",justifyContent:"center",alignItems:"center",fontSize:"0.85em",...u.itemIcon};return O(V.span,{ref:a,className:G("ui-select-item-icon",l),__css:r,...c})}),Ze=()=>O("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",children:O("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})});export{vt as O,pt as S,ht as a,xt as b,Qe as c,bt as d,j as e,Ct as f,mt as u};
//# sourceMappingURL=option-208f7514.js.map
