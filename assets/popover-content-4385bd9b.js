import{r as n}from"./index-76fb7be0.js";import{a as w,j as se,F as ie}from"./jsx-runtime-03b4ddbf.js";import{b as ce}from"./index-20d9506e.js";import{u as ue,a as le}from"./index-2107ab02.js";import{u as ae,a as fe,b as me}from"./index-6e209327.js";import{u as de}from"./index-32862ccd.js";import{k as pe,x as Y,t as i,z as ve,a1 as _,C as V,e as Z,p as ge,q as Pe,A as he,d as Q,U as Ce}from"./factory-c9bc4a28.js";import{a as be}from"./use-component-style-ab2b35f8.js";import{o as ye}from"./theme-provider-a03ffa08.js";import{m as Re}from"./motion-90200a2f.js";import{s as j}from"./slide-fade-656e79e8.js";import{s as Be}from"./scale-fade-bf7f1d92.js";import{C as Te}from"./close-button-7617767f.js";import{f as $}from"./forward-ref-8b7d2a6f.js";const[xe,N]=pe({strict:!1,name:"PopoverContext"}),Ye=f=>{const[c,t]=be("Popover",f),{children:p,initialFocusRef:v,restoreFocus:g=!0,autoFocus:y=!0,closeOnBlur:m=!0,closeOnEsc:O=!0,closeOnButton:E=!0,trigger:d="click",openDelay:R=200,closeDelay:P=200,isLazy:I,lazyBehavior:K="unmount",animation:S="scale",duration:D,...X}=ye(t),{isOpen:e,onOpen:B,onClose:r,onToggle:A}=ue(t),T=n.useRef(null),h=n.useRef(null),l=n.useRef(null),{present:M,onAnimationComplete:L}=ce({isOpen:e,ref:l}),a=n.useRef(void 0),C=n.useRef(void 0),x=n.useRef(!1),H=n.useRef(!1);e&&(H.current=!0);const{referenceRef:z,getPopperProps:ee,forceUpdate:U,transformOrigin:q}=de({...X,enabled:e});n.useEffect(()=>()=>{a.current&&clearTimeout(a.current),C.current&&clearTimeout(C.current)},[]),ae({enabled:e,ref:h}),fe(l,{focusRef:h,visible:e,shouldFocus:g&&d==="click"}),me(l,{focusRef:v,visible:e,shouldFocus:y&&d==="click"});const G=le({wasSelected:H.current,enabled:I,mode:K,isSelected:M}),oe=n.useCallback((o={},F=null)=>{const s={...o,style:{...o.style,transformOrigin:q},ref:Y(l,F),children:G?o.children:null,tabIndex:-1,onKeyDown:i(o.onKeyDown,u=>{O&&u.key==="Escape"&&r()}),onBlur:i(o.onBlur,u=>{const b=_(u),k=V(l.current,b),re=V(h.current,b);e&&m&&(!k&&!re)&&r()})};return d==="hover"&&(s.onMouseEnter=i(o.onMouseEnter,()=>{x.current=!0}),s.onMouseLeave=i(o.onMouseLeave,u=>{u.nativeEvent.relatedTarget!==null&&(x.current=!1,setTimeout(r,P))})),s},[P,m,O,e,r,G,q,d]),J=n.useCallback(o=>{T.current==null&&z(o)},[z]),te=n.useCallback((o={},F=null)=>{const s={...o,ref:Y(h,F,J)};return d==="click"&&(s.onClick=i(o.onClick,A),s.onBlur=i(o.onBlur,u=>{const b=_(u),k=!V(l.current,b);e&&m&&k&&r()})),d==="hover"&&(s.onFocus=i(o.onFocus,()=>{a.current===void 0&&B()}),s.onBlur=i(o.onBlur,u=>{const b=_(u),k=!V(l.current,b);e&&m&&k&&r()}),s.onKeyDown=i(o.onKeyDown,u=>{u.key==="Escape"&&r()}),s.onMouseEnter=i(o.onMouseEnter,()=>{x.current=!0,a.current=window.setTimeout(B,R)}),s.onMouseLeave=i(o.onMouseLeave,()=>{x.current=!1,a.current&&(clearTimeout(a.current),a.current=void 0),C.current=window.setTimeout(()=>{x.current===!1&&r()},P)})),s},[P,m,e,J,r,B,A,R,d]),ne=n.useCallback((o={},F=null)=>({...o,ref:Y(F,T,z)}),[T,z]);return w(xe,{value:{isOpen:e,onClose:r,closeOnButton:E,onAnimationComplete:L,forceUpdate:U,getTriggerProps:te,getAnchorProps:ne,getPopperProps:ee,getPopoverProps:oe,animation:S,duration:D,styles:c},children:ve(p,{isOpen:e,onClose:r,forceUpdate:U})})},_e=({children:f})=>{const c=n.Children.only(f),{getTriggerProps:t}=N();return n.cloneElement(c,t(c.props,c.ref))},W=$(({onClick:f,...c},t)=>{const{styles:p,onClose:v}=N(),g={position:"absolute",...p.closeButton};return w(Te,{ref:t,className:Z("ui-popover-close-button"),__css:g,onClick:i(f,y=>{y.stopPropagation(),v==null||v()}),size:"sm",...c})}),Fe=(f="scale",c)=>{const t={reverse:!0,duration:c,enter:{visibility:"visible"},transitionEnd:{exit:{visibility:"hidden"}}};switch(f){case"scale":return{...Be,custom:{...t,scale:.95}};case"top":return{...j,custom:{...t,offsetX:0,offsetY:-16}};case"right":return{...j,custom:{...t,offsetX:16,offsetY:0}};case"left":return{...j,custom:{...t,offsetX:-16,offsetY:0}};case"bottom":return{...j,custom:{...t,offsetX:0,offsetY:16}}}},Ne=$(({as:f="section",className:c,children:t,w:p,width:v,minW:g,minWidth:y,zIndex:m,__css:O,...E},d)=>{var l,M,L,a,C;const{isOpen:R,closeOnButton:P,getPopperProps:I,getPopoverProps:K,onAnimationComplete:S,animation:D,duration:X,styles:e}=N(),B=ge(t),[r,...A]=Pe(B,W),T=()=>se(ie,{children:[r??(P?w(W,{}):null),A]}),h={position:"relative",w:"100%",display:"flex",flexDirection:"column",outline:0,...he(O??e.container,["zIndex"])};return p=p??v??((l=e.container)==null?void 0:l.w)??((M=e.container)==null?void 0:M.width),g=g??y??((L=e.container)==null?void 0:L.minW)??((a=e.container)==null?void 0:a.minWidth),m=m??((C=e.container)==null?void 0:C.zIndex),w(Q.div,{...I({style:{visibility:R?"visible":"hidden"}}),className:"ui-popover",w:p,minW:g,zIndex:m,children:w(Q.section,{as:Re[f],className:Z("ui-popover-content",c),...D!=="none"?Fe(D,X):{},...K({...E,children:T()},d),initial:"exit",animate:R?"enter":"exit",exit:"exit",onAnimationComplete:Ce(S,E.onAnimationComplete),__css:h})})});export{Ye as P,_e as a,Ne as b,W as c,N as u};
//# sourceMappingURL=popover-content-4385bd9b.js.map
