import{r as n}from"./index-76fb7be0.js";import{j as L,a as se}from"./jsx-runtime-29545a09.js";import{b as ie}from"./index-921945f5.js";import{u as ce,a as ue}from"./index-8946f17c.js";import{u as le,a as ae,b as fe}from"./index-4c4f47ee.js";import{u as me}from"./index-9ba5351a.js";import{o as de,m as S,i as M}from"./theme-f3d0af46.js";import{o as pe,w as X,v as i,x as ve,e as Q,s as ge,t as Pe,y as he,d as q,J as Ce}from"./factory-3e6420ff.js";import{a as ye}from"./use-component-style-fb710021.js";import{m as be}from"./motion-90200a2f.js";import{C as Re}from"./close-button-9cffda7a.js";import{f as W}from"./forward-ref-8b7d2a6f.js";import{s as A}from"./slide-fade-d0484666.js";import{s as Be}from"./scale-fade-b8499830.js";const[Te,Y]=pe({strict:!1,name:"PopoverContext"}),Xe=l=>{const[c,t]=ye("Popover",l),{children:m,initialFocusRef:d,restoreFocus:p=!0,autoFocus:C=!0,closeOnBlur:a=!0,closeOnEsc:w=!0,closeOnButton:O=!0,trigger:f="click",openDelay:y=200,closeDelay:P=200,isLazy:V,lazyBehavior:j="unmount",animation:z="scale",duration:k,...I}=de(t),{isOpen:e,onOpen:b,onClose:r,onToggle:E}=ce(t),R=n.useRef(null),F=n.useRef(null),v=n.useRef(null),{present:Z,onAnimationComplete:$}=ie({isOpen:e,ref:v}),g=n.useRef(void 0),K=n.useRef(void 0),B=n.useRef(!1),_=n.useRef(!1);e&&(_.current=!0);const{referenceRef:D,getPopperProps:ee,forceUpdate:N,transformOrigin:H}=me({...I,enabled:e});n.useEffect(()=>()=>{g.current&&clearTimeout(g.current),K.current&&clearTimeout(K.current)},[]),le({enabled:e,ref:F}),ae(v,{focusRef:F,visible:e,shouldFocus:p&&f==="click"}),fe(v,{focusRef:d,visible:e,shouldFocus:C&&f==="click"});const J=ue({wasSelected:_.current,enabled:V,mode:j,isSelected:Z}),oe=n.useCallback((o={},T=null)=>{const s={...o,style:{...o.style,transformOrigin:H},ref:X(v,T),children:J?o.children:null,tabIndex:-1,onKeyDown:i(o.onKeyDown,u=>{w&&u.key==="Escape"&&r()}),onBlur:i(o.onBlur,u=>{const h=S(u),x=M(v.current,h),re=M(F.current,h);e&&a&&(!x&&!re)&&r()})};return f==="hover"&&(s.onMouseEnter=i(o.onMouseEnter,()=>{B.current=!0}),s.onMouseLeave=i(o.onMouseLeave,u=>{u.nativeEvent.relatedTarget!==null&&(B.current=!1,setTimeout(r,P))})),s},[P,a,w,e,r,J,H,f]),U=n.useCallback(o=>{R.current==null&&D(o)},[D]),te=n.useCallback((o={},T=null)=>{const s={...o,ref:X(F,T,U)};return f==="click"&&(s.onClick=i(o.onClick,E),s.onBlur=i(o.onBlur,u=>{const h=S(u),x=!M(v.current,h);e&&a&&x&&r()})),f==="hover"&&(s.onFocus=i(o.onFocus,()=>{g.current===void 0&&b()}),s.onBlur=i(o.onBlur,u=>{const h=S(u),x=!M(v.current,h);e&&a&&x&&r()}),s.onKeyDown=i(o.onKeyDown,u=>{u.key==="Escape"&&r()}),s.onMouseEnter=i(o.onMouseEnter,()=>{B.current=!0,g.current=window.setTimeout(b,y)}),s.onMouseLeave=i(o.onMouseLeave,()=>{B.current=!1,g.current&&(clearTimeout(g.current),g.current=void 0),K.current=window.setTimeout(()=>{B.current===!1&&r()},P)})),s},[P,a,e,U,r,b,E,y,f]),ne=n.useCallback((o={},T=null)=>({...o,ref:X(T,R,D)}),[R,D]);return L(Te,{value:{isOpen:e,onClose:r,closeOnButton:O,onAnimationComplete:$,forceUpdate:N,getTriggerProps:te,getAnchorProps:ne,getPopperProps:ee,getPopoverProps:oe,animation:z,duration:k,styles:c},children:ve(m,{isOpen:e,onClose:r,forceUpdate:N})})},Ye=({children:l})=>{const c=n.Children.only(l),{getTriggerProps:t}=Y();return n.cloneElement(c,t(c.props,c.ref))},G=W(({onClick:l,...c},t)=>{const{styles:m,onClose:d}=Y(),p={position:"absolute",...m.closeButton};return L(Re,{ref:t,className:Q("ui-popover-close-button"),__css:p,onClick:i(l,C=>{C.stopPropagation(),d==null||d()}),size:"sm",...c})}),xe=(l="scale",c)=>{const t={reverse:!0,duration:c,enter:{visibility:"visible"},transitionEnd:{exit:{visibility:"hidden"}}};switch(l){case"scale":return{...Be,custom:{...t,scale:.95}};case"top":return{...A,custom:{...t,offsetX:0,offsetY:-16}};case"right":return{...A,custom:{...t,offsetX:16,offsetY:0}};case"left":return{...A,custom:{...t,offsetX:-16,offsetY:0}};case"bottom":return{...A,custom:{...t,offsetX:0,offsetY:16}}}},_e=W(({as:l="section",className:c,children:t,w:m,width:d,minW:p,minWidth:C,zIndex:a,__css:w,...O},f)=>{const{isOpen:y,closeOnButton:P,getPopperProps:V,getPopoverProps:j,onAnimationComplete:z,animation:k,duration:I,styles:e}=Y(),b=ge(t),[r,...E]=Pe(b,G),R={position:"relative",w:"100%",display:"flex",flexDirection:"column",outline:0,...he(w??e.container,["zIndex"])};return m=m??d??e.container.w??e.container.width,p=p??C??e.container.minW??e.container.minWidth,a=a??e.container.zIndex,L(q.div,{...V({style:{visibility:y?"visible":"hidden"}}),className:"ui-popover",w:m,minW:p,zIndex:a,children:se(q.section,{as:be[l],className:Q("ui-popover-content",c),...k!=="none"?xe(k,I):{},...j(O,f),initial:"exit",animate:y?"enter":"exit",exit:"exit",onAnimationComplete:Ce(z,O.onAnimationComplete),__css:R,children:[r??(P?L(G,{}):null),E]})})});export{Xe as P,Ye as a,_e as b,G as c,Y as u};
//# sourceMappingURL=popover-content-2a2f9133.js.map
